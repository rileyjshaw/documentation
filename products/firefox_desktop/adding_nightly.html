<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Nightly builds - Documentation for Mozilla l10n Drivers</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="expanded "><a href="../../products/android-l10n/index.html"><strong aria-hidden="true">2.</strong> Android-l10n</a></li><li><ol class="section"><li class="expanded "><a href="../../products/android-l10n/adding_new_locales.html"><strong aria-hidden="true">2.1.</strong> Adding new locales</a></li></ol></li><li class="expanded "><a href="../../products/appstores/index.html"><strong aria-hidden="true">3.</strong> App stores</a></li><li><ol class="section"><li class="expanded "><a href="../../products/appstores/new_release_android.html"><strong aria-hidden="true">3.1.</strong> New Android release</a></li><li class="expanded "><a href="../../products/appstores/new_release_ios.html"><strong aria-hidden="true">3.2.</strong> New iOS release</a></li></ol></li><li class="expanded "><a href="../../products/firefox_android/index.html"><strong aria-hidden="true">4.</strong> Firefox for Android</a></li><li><ol class="section"><li class="expanded "><a href="../../products/firefox_android/adding_singlelocale.html"><strong aria-hidden="true">4.1.</strong> Single-locale builds</a></li><li class="expanded "><a href="../../products/firefox_android/adding_multilocales.html"><strong aria-hidden="true">4.2.</strong> Multi-locales build</a></li></ol></li><li class="expanded "><a href="../../products/firefox_desktop/index.html"><strong aria-hidden="true">5.</strong> Firefox Desktop</a></li><li><ol class="section"><li class="expanded "><a href="../../products/firefox_desktop/adding_nightly.html" class="active"><strong aria-hidden="true">5.1.</strong> Nightly builds</a></li><li class="expanded "><a href="../../products/firefox_desktop/adding_release.html"><strong aria-hidden="true">5.2.</strong> Beta/Release builds</a></li><li class="expanded "><a href="../../products/firefox_desktop/removing_locales.html"><strong aria-hidden="true">5.3.</strong> Removing locales</a></li></ol></li><li class="expanded "><a href="../../products/review/index.html"><strong aria-hidden="true">6.</strong> Review</a></li><li><ol class="section"><li class="expanded "><a href="../../products/review/signoffs.html"><strong aria-hidden="true">6.1.</strong> Sign-offs</a></li><li class="expanded "><a href="../../products/review/review.html"><strong aria-hidden="true">6.2.</strong> Review strings</a></li></ol></li><li class="expanded "><a href="../../products/firefox_iOS/index.html"><strong aria-hidden="true">7.</strong> Firefox for iOS</a></li><li><ol class="section"><li class="expanded "><a href="../../products/firefox_iOS/review_iOSstrings.html"><strong aria-hidden="true">7.1.</strong> Reviewing new strings</a></li></ol></li><li class="expanded "><a href="../../products/mozilla_org/index.html"><strong aria-hidden="true">8.</strong> Mozilla.org</a></li><li><ol class="section"><li class="expanded "><a href="../../products/mozilla_org/extract_strings.html"><strong aria-hidden="true">8.1.</strong> Process overview</a></li><li class="expanded "><a href="../../products/mozilla_org/working_bedrock.html"><strong aria-hidden="true">8.2.</strong> Working with Bedrock</a></li><li class="expanded "><a href="../../tools/webdashboards/import_translations.html"><strong aria-hidden="true">8.3.</strong> Importing translations</a></li><li class="expanded "><a href="../../products/mozilla_org/updating_mozillaorg_production.html"><strong aria-hidden="true">8.4.</strong> Updating production</a></li><li class="expanded "><a href="../../products/mozilla_org/enable_production.html"><strong aria-hidden="true">8.5.</strong> New locales</a></li></ol></li><li class="expanded "><a href="../../products/searchplugins/setup_searchplugins.html"><strong aria-hidden="true">9.</strong> Searchplugins</a></li><li class="expanded "><a href="../../tools/pontoon/index.html"><strong aria-hidden="true">10.</strong> Pontoon</a></li><li><ol class="section"><li class="expanded "><a href="../../tools/pontoon/adding_new_project.html"><strong aria-hidden="true">10.1.</strong> New project</a></li><li class="expanded "><a href="../../tools/pontoon/adding_new_short_term_project.html"><strong aria-hidden="true">10.2.</strong> New short-term project</a></li><li class="expanded "><a href="../../tools/pontoon/adding_new_locale.html"><strong aria-hidden="true">10.3.</strong> New locale</a></li><li class="expanded "><a href="../../tools/pontoon/sending_notifications.html"><strong aria-hidden="true">10.4.</strong> Notifications</a></li><li class="expanded "><a href="../../tools/pontoon/renaming_a_file.html"><strong aria-hidden="true">10.5.</strong> Renaming a localization file</a></li></ol></li><li class="expanded "><a href="../../tools/webdashboards/index.html"><strong aria-hidden="true">11.</strong> Web dashboards</a></li><li><ol class="section"><li class="expanded "><a href="../../tools/webdashboards/langchecker.html"><strong aria-hidden="true">11.1.</strong> Langchecker</a></li><li class="expanded "><a href="../../tools/webdashboards/webdashboard.html"><strong aria-hidden="true">11.2.</strong> Webdashboard</a></li><li class="expanded "><a href="../../tools/webdashboards/bootstrap_new_locale.html"><strong aria-hidden="true">11.3.</strong> Bootstrap a new locale</a></li><li class="expanded "><a href="../../tools/webdashboards/add_locales.html"><strong aria-hidden="true">11.4.</strong> Add locales to an existing file</a></li><li class="expanded "><a href="../../tools/webdashboards/update_existing_file.html"><strong aria-hidden="true">11.5.</strong> Update an existing file</a></li><li class="expanded "><a href="../../tools/webdashboards/remove_obsolete_files.html"><strong aria-hidden="true">11.6.</strong> Remove obsolete files</a></li><li class="expanded "><a href="../../tools/webdashboards/add_new_file.html"><strong aria-hidden="true">11.7.</strong> Add a new file to an existing project</a></li></ol></li><li class="expanded "><a href="../../tools/mercurial/index.html"><strong aria-hidden="true">12.</strong> Mercurial</a></li><li><ol class="section"><li class="expanded "><a href="../../tools/mercurial/setting_mercurial_environment.html"><strong aria-hidden="true">12.1.</strong> Set up the environment</a></li><li class="expanded "><a href="../../tools/mercurial/creating_mercurial_patch.html"><strong aria-hidden="true">12.2.</strong> Create a patch</a></li><li class="expanded "><a href="../../tools/mercurial/useful_mercurial_commands.html"><strong aria-hidden="true">12.3.</strong> Useful Mercurial commands</a></li></ol></li><li class="expanded "><a href="../../misc/index.html"><strong aria-hidden="true">13.</strong> Other docs</a></li><li><ol class="section"><li class="expanded "><a href="../../misc/creating_new_repository.html"><strong aria-hidden="true">13.1.</strong> New l10n repository</a></li><li class="expanded "><a href="../../misc/working_w_l10n_agency.html"><strong aria-hidden="true">13.2.</strong> How to work with a Localization Agency</a></li><li class="expanded "><a href="../../misc/documentation_styleguide.html"><strong aria-hidden="true">13.3.</strong> Documentation styleguide</a></li><li class="expanded "><a href="../../misc/stock_emails.html"><strong aria-hidden="true">13.4.</strong> Stock emails</a></li><li class="expanded "><a href="../../config/setup_l10ndrivers_vm.html"><strong aria-hidden="true">13.5.</strong> L10n-drivers VM setup</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Documentation for Mozilla l10n Drivers</h1>

                        <div class="right-buttons">
                            <a href="../../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#adding-a-new-locale-to-nightly-builds" id="adding-a-new-locale-to-nightly-builds">Adding a new locale to Nightly builds</a></h1>
<p>There are a few steps to complete in order to have Nightly builds for a new locale:</p>
<ul>
<li>File a tracking bug and dependencies.</li>
<li>Land initial content in l10n repositories.</li>
<li>Set up searchplugins.</li>
<li>Add new locale to build configuration.</li>
<li>Add new locale to product-details.</li>
</ul>
<h2><a class="header" href="#file-a-tracking-bug-and-dependencies-to-add-the-new-locale" id="file-a-tracking-bug-and-dependencies-to-add-the-new-locale">File a tracking bug and dependencies to add the new locale</a></h2>
<p>The first step is to create <a href="https://l10n.mozilla.org/bugs/new-locale">all the bugs</a> you need for this new locale. Let’s consider Lao (lo) as an example:</p>
<ul>
<li>Locale: <code>lo</code>.</li>
<li>Language: <code>Lao</code>.</li>
<li>Component: leave <code>Other</code> if there’s no component on Bugzilla yet, otherwise type in the component name in the <code>Mozilla Localizations</code> product (in this case <code>lo / Lao</code>).</li>
<li>Name: first name of the locale leader. It will be used as part of the bug messages.</li>
<li>Bugzilla ID: Bugzilla ID (email address) of the locale leader. It will be used to CC them to all these bugs.</li>
<li>Application: leave Firefox.</li>
<li>Version: leave the default.</li>
</ul>
<p>Click the <em>Create Buglinks</em> button, and a set of links will appear at the bottom of the page. Not all of them might be needed, for example LDAP is required only for Tableau access, repositories might already exist, etc. Make sure to always start with the <code>shipping</code> link, since that’s going to be the tracker bug, with an alias used in other bugs to set dependencies (<code>fx-l10n-LOCALECODE</code>, <code>fx-l10n-lo</code> in this example).</p>
<p>Always double check the content of the bugs for errors or outdated content. If the information is obsolete, you can update the templates in this <a href="https://wiki.mozilla.org/L10n:Bugogram">Wiki page</a> (it will require a new deployment of Elmo to production).</p>
<h2><a class="header" href="#land-initial-content-in-l10n-repository" id="land-initial-content-in-l10n-repository">Land initial content in l10n repository</a></h2>
<p>With cross-channel, all builds of Firefox are generated using strings from the l10n-central repository. If a project started localizing using a BitBucket repository, it’s <strong>fundamental</strong> to populate l10n-central with that content when requesting the official repository creation on <code>https://hg.mozilla.org/l10n-central/LOCALE_CODE</code>.</p>
<p>After the first content lands in l10n-central, it’s a good idea to perform some basic checks before enabling the build:</p>
<ul>
<li>Check <code>toolkit/global/intl.properties</code> (<a href="https://hg.mozilla.org/mozilla-central/file/default/toolkit/locales/en-US/chrome/global/intl.properties">en-US version</a>) for evident mistakes.</li>
<li>Check if there’s a <code>region.properties</code> file in <code>browser/chrome/browser-region/region.properties</code>, if needed replace it with the <a href="../searchplugins/files/desktop_region.properties">stock version</a>.</li>
</ul>
<h2><a class="header" href="#set-up-searchplugins" id="set-up-searchplugins">Set up searchplugins</a></h2>
<p>Check the <a href="../searchplugins/setup_searchplugins.html">Set up searchplugins</a> document for detailed instructions on how to set up searchplugins for new locales.</p>
<h2><a class="header" href="#add-new-locale-to-build-configuration" id="add-new-locale-to-build-configuration">Add new locale to build configuration</a></h2>
<p>First of all make sure that your environment is <a href="../../tools/mercurial/setting_mercurial_environment.html">correctly set up</a>, update your local mozilla-unified clone and make sure it’s on the <code>central</code> bookmark:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/mozilla-unified
$ hg pull -u
$ hg up central
</code></pre>
<p>The first file to modify is <code>browser/locales/all-locales</code>, open it with your text editor of choice.</p>
<pre><code class="language-BASH">$ atom browser/locales/all-locales
</code></pre>
<p>And add the new locale to the list. With Atom and the Sort Lines package installed, you can press <code>F5</code> to make sure that the list is in <strong>alphabetical order</strong>.</p>
<p>The second file to modify is <code>browser/locales/l10n.toml</code>. This is the beginning of the file:</p>
<pre><code># This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

basepath = &quot;../..&quot;

locales = [
    &quot;ach&quot;,
    &quot;af&quot;,
    &quot;an&quot;,
    &quot;ar&quot;,
    &quot;as&quot;,
...
</code></pre>
<p>Identify the <code>locales</code> section, and add the new locale code between double quotes, followed by a comma. As before, you can use Atom to make sure the list is in alphabetical order (make sure to select only the lines with actual locale codes before pressing <code>F5</code>).</p>
<p>After you’ve finished editing the files, check the status of the repository, and the diff.</p>
<pre><code class="language-BASH">$ hg status
M browser/locales/all-locales
M browser/locales/l10n.toml

$ hg diff
diff --git a/browser/locales/all-locales b/browser/locales/all-locales
--- a/browser/locales/all-locales
+++ b/browser/locales/all-locales
@@ -51,17 +51,16 @@ ja
 kn
 ko
 lij
+lo
 lt
 ltg
 lv

 diff --git a/browser/locales/l10n.toml b/browser/locales/l10n.toml
 --- a/browser/locales/l10n.toml
 +++ b/browser/locales/l10n.toml
 @@ -59,17 +59,16 @@ locales = [
      &quot;kn&quot;,
      &quot;ko&quot;,
      &quot;lij&quot;,
 +    &quot;lo&quot;,
      &quot;lt&quot;,
      &quot;ltg&quot;,
      &quot;lv&quot;,
</code></pre>
<p><code>M</code> in <code>hg status</code> indicates that the file has been modified, <code>+</code> in <code>hg diff</code> that the line has been added. Follow the instructions available in <a href="../../tools/mercurial/creating_mercurial_patch.html">this document</a> to create a patch, submit it for review, and land it.</p>
<h2><a class="header" href="#add-new-locale-to-product-details" id="add-new-locale-to-product-details">Add new locale to product-details</a></h2>
<p>Product-details, used to publish the build on mozilla.org, is generated by <a href="https://github.com/mozilla-releng/ship-it">Ship It</a>. Instructions are available in <a href="https://github.com/mozilla-releng/ship-it/blob/master/README-l10n.md">this README</a>. Note that, once reviewed and merged, the change won’t be available until the new version of <em>Ship It</em> is deployed to production.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../products/firefox_desktop/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../products/firefox_desktop/adding_release.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../../products/firefox_desktop/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../../products/firefox_desktop/adding_release.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
