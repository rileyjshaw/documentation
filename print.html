<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Documentation for Mozilla l10n Drivers</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="expanded "><a href="products/android-l10n/index.html"><strong aria-hidden="true">2.</strong> Android-l10n</a></li><li><ol class="section"><li class="expanded "><a href="products/android-l10n/adding_new_locales.html"><strong aria-hidden="true">2.1.</strong> Adding new locales</a></li></ol></li><li class="expanded "><a href="products/appstores/index.html"><strong aria-hidden="true">3.</strong> App stores</a></li><li><ol class="section"><li class="expanded "><a href="products/appstores/new_release_android.html"><strong aria-hidden="true">3.1.</strong> New Android release</a></li><li class="expanded "><a href="products/appstores/new_release_ios.html"><strong aria-hidden="true">3.2.</strong> New iOS release</a></li></ol></li><li class="expanded "><a href="products/firefox_android/index.html"><strong aria-hidden="true">4.</strong> Firefox for Android</a></li><li><ol class="section"><li class="expanded "><a href="products/firefox_android/adding_singlelocale.html"><strong aria-hidden="true">4.1.</strong> Single-locale builds</a></li><li class="expanded "><a href="products/firefox_android/adding_multilocales.html"><strong aria-hidden="true">4.2.</strong> Multi-locales build</a></li></ol></li><li class="expanded "><a href="products/firefox_desktop/index.html"><strong aria-hidden="true">5.</strong> Firefox Desktop</a></li><li><ol class="section"><li class="expanded "><a href="products/firefox_desktop/adding_nightly.html"><strong aria-hidden="true">5.1.</strong> Nightly builds</a></li><li class="expanded "><a href="products/firefox_desktop/adding_release.html"><strong aria-hidden="true">5.2.</strong> Beta/Release builds</a></li><li class="expanded "><a href="products/firefox_desktop/removing_locales.html"><strong aria-hidden="true">5.3.</strong> Removing locales</a></li></ol></li><li class="expanded "><a href="products/review/index.html"><strong aria-hidden="true">6.</strong> Review</a></li><li><ol class="section"><li class="expanded "><a href="products/review/signoffs.html"><strong aria-hidden="true">6.1.</strong> Sign-offs</a></li><li class="expanded "><a href="products/review/review.html"><strong aria-hidden="true">6.2.</strong> Review strings</a></li></ol></li><li class="expanded "><a href="products/firefox_iOS/index.html"><strong aria-hidden="true">7.</strong> Firefox for iOS</a></li><li><ol class="section"><li class="expanded "><a href="products/firefox_iOS/review_iOSstrings.html"><strong aria-hidden="true">7.1.</strong> Reviewing new strings</a></li></ol></li><li class="expanded "><a href="products/mozilla_org/index.html"><strong aria-hidden="true">8.</strong> Mozilla.org</a></li><li><ol class="section"><li class="expanded "><a href="products/mozilla_org/extract_strings.html"><strong aria-hidden="true">8.1.</strong> Process overview</a></li><li class="expanded "><a href="products/mozilla_org/working_bedrock.html"><strong aria-hidden="true">8.2.</strong> Working with Bedrock</a></li><li class="expanded "><a href="tools/webdashboards/import_translations.html"><strong aria-hidden="true">8.3.</strong> Importing translations</a></li><li class="expanded "><a href="products/mozilla_org/updating_mozillaorg_production.html"><strong aria-hidden="true">8.4.</strong> Updating production</a></li><li class="expanded "><a href="products/mozilla_org/enable_production.html"><strong aria-hidden="true">8.5.</strong> New locales</a></li></ol></li><li class="expanded "><a href="products/searchplugins/setup_searchplugins.html"><strong aria-hidden="true">9.</strong> Searchplugins</a></li><li class="expanded "><a href="tools/pontoon/index.html"><strong aria-hidden="true">10.</strong> Pontoon</a></li><li><ol class="section"><li class="expanded "><a href="tools/pontoon/adding_new_project.html"><strong aria-hidden="true">10.1.</strong> New project</a></li><li class="expanded "><a href="tools/pontoon/adding_new_short_term_project.html"><strong aria-hidden="true">10.2.</strong> New short-term project</a></li><li class="expanded "><a href="tools/pontoon/adding_new_locale.html"><strong aria-hidden="true">10.3.</strong> New locale</a></li><li class="expanded "><a href="tools/pontoon/sending_notifications.html"><strong aria-hidden="true">10.4.</strong> Notifications</a></li><li class="expanded "><a href="tools/pontoon/renaming_a_file.html"><strong aria-hidden="true">10.5.</strong> Renaming a localization file</a></li></ol></li><li class="expanded "><a href="tools/webdashboards/index.html"><strong aria-hidden="true">11.</strong> Web dashboards</a></li><li><ol class="section"><li class="expanded "><a href="tools/webdashboards/langchecker.html"><strong aria-hidden="true">11.1.</strong> Langchecker</a></li><li class="expanded "><a href="tools/webdashboards/webdashboard.html"><strong aria-hidden="true">11.2.</strong> Webdashboard</a></li><li class="expanded "><a href="tools/webdashboards/bootstrap_new_locale.html"><strong aria-hidden="true">11.3.</strong> Bootstrap a new locale</a></li><li class="expanded "><a href="tools/webdashboards/add_locales.html"><strong aria-hidden="true">11.4.</strong> Add locales to an existing file</a></li><li class="expanded "><a href="tools/webdashboards/update_existing_file.html"><strong aria-hidden="true">11.5.</strong> Update an existing file</a></li><li class="expanded "><a href="tools/webdashboards/remove_obsolete_files.html"><strong aria-hidden="true">11.6.</strong> Remove obsolete files</a></li><li class="expanded "><a href="tools/webdashboards/add_new_file.html"><strong aria-hidden="true">11.7.</strong> Add a new file to an existing project</a></li></ol></li><li class="expanded "><a href="tools/mercurial/index.html"><strong aria-hidden="true">12.</strong> Mercurial</a></li><li><ol class="section"><li class="expanded "><a href="tools/mercurial/setting_mercurial_environment.html"><strong aria-hidden="true">12.1.</strong> Set up the environment</a></li><li class="expanded "><a href="tools/mercurial/creating_mercurial_patch.html"><strong aria-hidden="true">12.2.</strong> Create a patch</a></li><li class="expanded "><a href="tools/mercurial/useful_mercurial_commands.html"><strong aria-hidden="true">12.3.</strong> Useful Mercurial commands</a></li></ol></li><li class="expanded "><a href="misc/index.html"><strong aria-hidden="true">13.</strong> Other docs</a></li><li><ol class="section"><li class="expanded "><a href="misc/creating_new_repository.html"><strong aria-hidden="true">13.1.</strong> New l10n repository</a></li><li class="expanded "><a href="misc/working_w_l10n_agency.html"><strong aria-hidden="true">13.2.</strong> How to work with a Localization Agency</a></li><li class="expanded "><a href="misc/documentation_styleguide.html"><strong aria-hidden="true">13.3.</strong> Documentation styleguide</a></li><li class="expanded "><a href="misc/stock_emails.html"><strong aria-hidden="true">13.4.</strong> Stock emails</a></li><li class="expanded "><a href="config/setup_l10ndrivers_vm.html"><strong aria-hidden="true">13.5.</strong> L10n-drivers VM setup</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Documentation for Mozilla l10n Drivers</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#documentation" id="documentation">Documentation</a></h1>
<p>This repository includes several documents describing how to perform internal tasks within the <a href="https://wiki.mozilla.org/L10n:Mozilla_Team">l10n-drivers team</a> at Mozilla.</p>
<p>Topics covered:</p>
<ul>
<li>Manage <a href="products/firefox_android/">Firefox for Android</a> and <a href="products/firefox_desktop/">Firefox desktop</a>: setting up builds, bootstrap productization settings, and testing.</li>
<li>How to <a href="products/review/review.html">review strings</a> and <a href="products/review/signoffs.html">perform sign-offs</a> for Firefox desktop and Firefox for Android.</li>
<li>Manage <a href="products/appstores/">App Store and Google Play</a> content updates.</li>
<li>Manage <a href="products/mozilla_org/">mozilla.org</a> localization.</li>
<li>Technical documentation and common tasks for our <a href="tools/webdashboards/">webdashboards</a>.</li>
<li>Perform common and advanced tasks on <a href="tools/pontoon/">Pontoon</a> like adding new locale, and creating a new project.</li>
<li>Other <a href="misc/">miscellaneous documents</a> related to localization tasks.</li>
</ul>
<h2><a class="header" href="#how-to-read-these-documents" id="how-to-read-these-documents">How to read these documents</a></h2>
<p>You will need a Unix-like environment (Linux, macOS) to run most of the tools. Across the entire documentation, commands to run in a terminal are described like this:</p>
<pre><code class="language-BASH">$ composer update
</code></pre>
<p><code>$</code> is not part of the command, it just indicates the terminal prompt. The command to type or copy and paste is simply <code>composer update</code>.</p>
<p>In several occasions documents use aliases instead of the complete path to commands: for example <code>lang_update</code> instead of <code>path_to_langchecker_clone/app/scripts/lang_update</code>. Check <a href="config/setup_l10ndrivers_vm.html">Setting up a Linux Virtual Machine for Webdashboards</a> for instructions on how to setup a virtual machine running on Linux Ubuntu with all the necessary packages and aliases.</p>
<h2><a class="header" href="#updating-the-documentation" id="updating-the-documentation">Updating the documentation</a></h2>
<p>Please see the <a href="https://github.com/mozilla-l10n/documentation/blob/master/README.md">README file in our GitHub repository</a>.</p>
<h1><a class="header" href="#l10n-and-android-l10n" id="l10n-and-android-l10n">L10n and android-l10n</a></h1>
<p>Some documentation specific for common tasks regarding android-l10n and l10n:</p>
<ul>
<li><a href="products/android-l10n/adding_new_locales.html">Adding new locales</a>.</li>
</ul>
<h1><a class="header" href="#adding-new-locales-to-specific-projects" id="adding-new-locales-to-specific-projects">Adding new locales to specific projects</a></h1>
<p>These are instructions in order to add new locales to Android mobile products living within the <a href="https://github.com/mozilla-l10n/android-l10n/">android-l10n project</a>.</p>
<h2><a class="header" href="#edit-the-l10ntoml-files" id="edit-the-l10ntoml-files">Edit the l10n.toml file(s)</a></h2>
<p>All android-l10n products live within the <a href="https://github.com/mozilla-l10n/android-l10n/">android-l10n project</a>. Depending on the product that requires a new locale to be added, the corresponding l10n.toml file will have to be edited by adding the new locale code in it.</p>
<p>The l10n.toml files live in their corresponding project folder, located here for:</p>
<ul>
<li><a href="https://github.com/mozilla-l10n/android-l10n/blob/master/mozilla-mobile/fenix/l10n.toml">Fenix</a></li>
<li><a href="https://github.com/mozilla-l10n/android-l10n/blob/master/mozilla-mobile/android-components/l10n.toml">Android-Components</a></li>
<li><a href="https://github.com/mozilla-l10n/android-l10n/blob/master/mozilla-mobile/firefox-tv/l10n.toml">Firefox for Fire TV</a></li>
<li><a href="https://github.com/mozilla-l10n/android-l10n/blob/master/MozillaReality/FirefoxReality/l10n.toml">Firefox Reality</a></li>
<li><a href="https://github.com/mozilla-l10n/android-l10n/blob/master/mozilla-lockwise/lockwise-android/l10n.toml">Lockwise for Android</a></li>
</ul>
<p>Each l10n.toml file typically looks like this:</p>
<pre><code>basepath = &quot;.&quot;

locales = [
    &quot;ab-CD&quot;,
    &quot;an&quot;,
    &quot;ar&quot;,
    &quot;as&quot;,
    &quot;ast&quot;,
    &quot;az&quot;,
...
]

# Expose the following branches to localization
# Changes to this list should be announced to the l10n team ahead of time.
branches = [
    &quot;master&quot;,
]

[env]

[[paths]]
  reference = &quot;app/src/main/res/values/strings.xml&quot;
  l10n = &quot;app/src/main/res/values-{android_locale}/strings.xml&quot;
</code></pre>
<p>Identify the <code>locales</code> section, add the desired new locale code in this  list. With Atom and the Sort Lines package installed, you can press <code>F5</code> to make sure that the list is in <strong>alphabetical order</strong>.</p>
<p>Save your edited file, then commit and push from your branch to the android-l10n repository.</p>
<p>Note that all products except Firefox for Fire TV share strings with Android Components, so you will also have to edit the Android Components l10n.toml file and add the new locale there.</p>
<h2><a class="header" href="#add-new-locales-to-pontoon" id="add-new-locales-to-pontoon">Add new locales to Pontoon</a></h2>
<p>Once the patch has landed, the new locale has to be added in Pontoon as well. The steps to follow can be found in the existing <a href="products/android-l10n/../../tools/pontoon/adding_new_locale.html">Pontoon documentation here</a>.</p>
<h1><a class="header" href="#working-with-app-stores" id="working-with-app-stores">Working with App Stores</a></h1>
<p>Some documentation specific for common tasks on App Stores</p>
<ul>
<li><a href="products/appstores/new_release_android.html">Firefox for Android: manage a new release</a>.</li>
<li><a href="products/appstores/new_release_ios.html">Firefox for iOS: manage a new release</a>.</li>
</ul>
<p>For documentation about Webdashboard and Langchecker, see <a href="products/appstores/../../tools/webdashboards/">this page</a>.</p>
<h1><a class="header" href="#firefox-for-android---manage-a-new-release" id="firefox-for-android---manage-a-new-release">Firefox for Android - Manage a new release</a></h1>
<ul>
<li><a href="products/appstores/new_release_android.html#create-the-new-lang-files-for-beta-and-release">Create the new .lang files for Beta and Release</a></li>
<li><a href="products/appstores/new_release_android.html#track-the-files-in-dashboards-updating-langchecker">Track the files in dashboards updating Langchecker</a></li>
<li><a href="products/appstores/new_release_android.html#commit-lang-files-to-the-appstores-repository">Commit .lang files to the appstores repository</a></li>
<li><a href="products/appstores/new_release_android.html#updating-the-list-of-supported-locales">Updating the list of supported locales</a></li>
<li><a href="products/appstores/new_release_android.html#add-strings-to-templates-in-stores_l10n">Add strings to templates in stores_l10n</a></li>
</ul>
<p>When creating a new release, normally the <em>What’s new</em> section needs to be moved from Beta to Release, and there are new strings to expose for the Beta channel.</p>
<p>In this example:</p>
<ul>
<li><em>What’s new</em> strings for the current Release is stored in <code>fx_android/whatsnew/android_46.lang</code>.</li>
<li><em>What’s new</em> strings for the current Beta is stored in <code>fx_android/whatsnew/android_47.lang</code>.</li>
</ul>
<p>The actions to perform are:</p>
<ul>
<li>Create a new file <code>fx_android/whatsnew/android_48.lang</code> for the upcoming Beta version.</li>
<li>Update comment references in <code>fx_android/whatsnew/android_47.lang</code>, moving from Beta to Release.</li>
<li>Track the files in both Langchecker and Stores apps.</li>
</ul>
<p>This document assumes that you have set up the system as explained in <a href="products/appstores/../../config/setup_l10ndrivers_vm.html">this document</a>, so aliases like <code>lang_update</code> are available, repositories are already cloned in <code>~/mozilla/repositories</code>, Atom is available and includes the syntax highlighter for LANG files.</p>
<p><strong>IMPORTANT:</strong> Remember to run <code>gitup</code> before you do anything. If you run the command in the middle of the work, don’t forget to go back to the branch (it will checkout <code>master</code> for all repositories).</p>
<h2><a class="header" href="#create-the-new-lang-files-for-beta-and-release" id="create-the-new-lang-files-for-beta-and-release">Create the new .lang files for Beta and Release</a></h2>
<p>For all changes you need to create branches and then open pull requests.</p>
<p>In this case you’re creating a branch <strong>beta48</strong> in the <code>appstores</code> repository, and editing in Atom the reference en-US file.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/repositories/appstores/
$ git branch beta48
$ git checkout beta48
$ atom en-US/fx_android/whatsnew/android_48.lang
</code></pre>
<p>This is the content of the new file (strings are communicated by Release Driver, about a week before the release date).</p>
<pre><code>## NOTE: These strings are displayed on Google Play in the What’s new section for Firefox 48 beta
## NOTE: See https://l10n.mozilla-community.org/stores_l10n/locale/fx_android/beta/


;Content Notifications for infrequent websites
Content Notifications for infrequent websites


;Suggest “Add to home screen” for frequently used websites
Suggest “Add to home screen” for frequently used websites


;Migrate reading list to bookmarks
Migrate reading list to bookmarks
</code></pre>
<p>Now update the initial content of <code>en-US/fx_android/whatsnew/android_47.lang</code>, replacing references to <code>beta</code> with <code>release</code>. For example, from:</p>
<pre><code>## NOTE: These strings are displayed on Google Play in the What’s new section for Firefox 47 beta
## NOTE: See https://l10n.mozilla-community.org/stores_l10n/locale/fx_android/beta/
</code></pre>
<p>to:</p>
<pre><code>## NOTE: These strings are displayed on Google Play in the What’s new section for Firefox 47
## NOTE: See https://l10n.mozilla-community.org/stores_l10n/locale/fx_android/release/
</code></pre>
<p>These files will be committed later to the repository, since they’re still not tracked in Langchecker.</p>
<h2><a class="header" href="#track-the-files-in-dashboards-updating-langchecker" id="track-the-files-in-dashboards-updating-langchecker">Track the files in dashboards updating Langchecker</a></h2>
<p>You then need to start tracking these files in Langchecker. The process is described in detail in <a href="products/appstores/../../tools/webdashboards/add_new_file.html">this document</a>.</p>
<p>Again, you need to create a branch in the langchecker repository.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/langchecker/
$ git branch beta48
$ git checkout beta48
$ atom app/config/sources.inc.php
</code></pre>
<p>At this point you’re ready to add the new files to <code>$appstores_lang</code>. The easiest way is to start by identifying the files used for the previous cycle. For example, if you’re adding 48 Beta and promoting 47 to release, identify files for 47 Beta and 46 Release:</p>
<pre><code class="language-PHP">$appstores_lang = [
    ...
    'fx_android/whatsnew/android_46.lang' =&gt; [
        'deadline'          =&gt; '2016-04-26',
        'supported_locales' =&gt; $fx_android_store,
    ],
    'fx_android/whatsnew/android_47.lang' =&gt; [
        'supported_locales' =&gt; $fx_android_store,
    ],
</code></pre>
<p>What you’ll need to do is:</p>
<ul>
<li>Add the new file for 48 Beta (<code>fx_android/whatsnew/android_48.lang</code>).</li>
<li>Remove the deadline from the previous release and add it to the new file.</li>
</ul>
<pre><code class="language-PHP">$appstores_lang = [
    ...
    'fx_android/whatsnew/android_46.lang' =&gt; [
        'supported_locales' =&gt; $fx_android_store,
    ],
    'fx_android/whatsnew/android_47.lang' =&gt; [
        'deadline'          =&gt; '2016-06-07',
        'supported_locales' =&gt; $fx_android_store,
    ],
    'fx_android/whatsnew/android_48.lang' =&gt; [
        'supported_locales' =&gt; $fx_android_store,
    ],
</code></pre>
<p>The previous release (46) is not obsolete yet, you can mark it as such the next time you update the file. The result would be:</p>
<pre><code class="language-PHP">$appstores_lang = [
    ...
    'fx_android/whatsnew/android_46.lang' =&gt; [
        'flags' =&gt; [
            'obsolete' =&gt; ['all'],
        ],
        'supported_locales' =&gt; $fx_android_store,
    ],
</code></pre>
<p>As a general rule, there should be only two non obsolete release files near the end of the cycle.</p>
<p>Now you can commit your changes to Langchecker. Always check with <code>git status</code> to confirm that you’re only including changes to <code>sources.inc.php</code>.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/langchecker/
$ git add app/config/sources.inc.php
$ git commit -m &quot;Track AppStores files for 47 and 48 beta&quot;
$ git push origin beta48
</code></pre>
<h2><a class="header" href="#commit-lang-files-to-the-appstores-repository" id="commit-lang-files-to-the-appstores-repository">Commit .lang files to the appstores repository</a></h2>
<p>Now you’re ready to copy the new files to all locales, and propagate all comment changes to <code>fx_android/whatsnew/android_47.lang</code>:</p>
<pre><code class="language-BASH">$ lang_update all 12 all
</code></pre>
<p>Check your local installation of langchecker for errors by visiting http://localhost/langchecker/?action=errors</p>
<p>If there are no errors, check the status of this repository with <code>git status</code>, and the content of the new files for at least one locale, to confirm that strings were imported correctly.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/repositories/appstores/
$ git add .
$ git commit -a -m &quot;Add new Google Play files for Firefox 47 and 48 Beta&quot;
$ git push origin beta48
</code></pre>
<p>Note that you need to explicitly add the files with <code>git add</code>, since most of them are not tracked yet.</p>
<h2><a class="header" href="#updating-the-list-of-supported-locales" id="updating-the-list-of-supported-locales">Updating the list of supported locales</a></h2>
<p>Before you start working on stores_l10n, remember to run the <code>app/scripts/update_shipping_locales.py</code> script in the <code>~/mozilla/git/stores_l10n/</code> directory, as this project is used to keep track of which locales ship in each version of supported apps (Firefox for Android/iOS, Focus for Android/iOS). You can use the same branch for running the script, then adding strings to templates (explained in the next section).</p>
<p>In fact, as a general rule, you should periodically run this script - especially before starting to work on stores_l10n. If the script changes the list of locales:</p>
<ul>
<li>Run <code>lang_update all 12 all</code> to add missing files in the <code>appstores</code> repository.</li>
<li>Check in Pontoon if the new locales already have the <a href="https://pontoon.mozilla.org/projects/appstores/">Appstores</a> project enabled. If not, you will have to add the locale in the Admin interface, but only <strong>after files have been added</strong> to the repository, i.e. all branches have been merged.</li>
</ul>
<h2><a class="header" href="#add-strings-to-templates-in-stores_l10n" id="add-strings-to-templates-in-stores_l10n">Add strings to templates in stores_l10n</a></h2>
<p>Now you need to use the new files and strings in stores_l10n. Again, you’re going to work on a branch.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/stores_l10n/
$ git branch beta48
$ git checkout beta48
$ atom app/classes/Stores/Project.php
</code></pre>
<p>The variable to update is <code>$template</code>. From:</p>
<pre><code class="language-PHP">public $templates = [
    'fx_android' =&gt; [
        'release' =&gt; [
            'template' =&gt; 'fx_android/release/listing_apr_2016.php',
            'langfile' =&gt; 'fx_android/description_release.lang',
            'whatsnew' =&gt; 'fx_android/whatsnew/android_46.lang',
            ],
        'beta' =&gt; [
            'template' =&gt; 'fx_android/beta/listing_may_2015.php',
            'langfile' =&gt; 'fx_android/description_beta.lang',
            'whatsnew' =&gt; 'fx_android/whatsnew/android_47.lang',
            ],
    ],
</code></pre>
<p>To:</p>
<pre><code class="language-PHP">public $templates = [
    'fx_android' =&gt; [
        'release' =&gt; [
            'template' =&gt; 'fx_android/release/listing_apr_2016.php',
            'langfile' =&gt; 'fx_android/description_release.lang',
            'whatsnew' =&gt; 'fx_android/whatsnew/android_47.lang',
            ],
        'beta' =&gt; [
            'template' =&gt; 'fx_android/beta/listing_may_2015.php',
            'langfile' =&gt; 'fx_android/description_beta.lang',
            'whatsnew' =&gt; 'fx_android/whatsnew/android_48.lang',
            ],
    ],
</code></pre>
<p>Then you need to update <code>app/templates/fx_android/release/listing_apr_2016.php</code> with the strings for Release, and <code>app/templates/fx_android/beta/listing_may_2015.php</code> with the strings for Beta.</p>
<p>At this point open the local installation of stores_l10n available at http://localhost/stores_l10n/ and check both Release and Beta channel. If everything looks good, you can commit and push.</p>
<pre><code class="language-BASH">$ git commit -a -m &quot;Add new Google Play files for Firefox 47 and 48 Beta&quot;
$ git push origin beta48
</code></pre>
<p>Now you’re ready to open pull requests for each of the three involved repositories.</p>
<p>If you’re using the l10n-drivers VM, both <strong>langchecker</strong> and <strong>stores_l10n</strong> are forks, so you’ll find them in your user account, e.g. <code>https://github.com/flodolo/langchecker/</code>. <strong>appstores</strong>, on the other hand, is a direct clone of the mozilla-l10n repository.</p>
<h1><a class="header" href="#firefox-for-ios---manage-a-new-release" id="firefox-for-ios---manage-a-new-release">Firefox for iOS - Manage a new release</a></h1>
<ul>
<li><a href="products/appstores/new_release_ios.html#create-the-lang-file-for-the-new-release">Create the .lang file for the new release</a></li>
<li><a href="products/appstores/new_release_ios.html#track-the-new-file-in-dashboards-updating-langchecker">Track the new file in dashboards updating Langchecker</a></li>
<li><a href="products/appstores/new_release_ios.html#commit-lang-files-to-the-appstores-repository">Commit .lang files to the appstores repository</a></li>
<li><a href="products/appstores/new_release_ios.html#updating-the-list-of-supported-locales">Updating the list of supported locales</a></li>
<li><a href="products/appstores/new_release_ios.html#add-strings-to-templates-in-stores_l10n">Add strings to templates in stores_l10n</a></li>
</ul>
<p>When creating a new release, normally there’s a new <em>What’s new</em> section for the upcoming version.</p>
<p>Assuming the new version is 6.0, the actions to perform are:</p>
<ul>
<li>Create a new file <code>fx_ios/whatsnew/ios_6_0.lang</code>.</li>
<li>Track the file in both Langchecker and Stores apps.</li>
</ul>
<p>This document assumes that you have set up the system as explained in <a href="products/appstores/../../config/setup_l10ndrivers_vm.html">this document</a>, so aliases like <code>lang_update</code> are available, repositories are already cloned in <code>~/mozilla/repositories</code>, Atom is available and includes the syntax highlighter for LANG files.</p>
<h2><a class="header" href="#create-the-lang-file-for-the-new-release" id="create-the-lang-file-for-the-new-release">Create the .lang file for the new release</a></h2>
<p>For all changes you need to create branches and then open pull requests.</p>
<p>In this case you’re creating a branch <strong>ios6_0</strong> in the <code>appstores</code> repository, and editing in Atom the reference en-US file.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/repositories/appstores/
$ git branch ios6_0
$ git checkout ios6_0
$ atom en-US/fx_ios/whatsnew/ios_6_0.lang
</code></pre>
<p>This is the content of the new file (strings are communicated by releng).</p>
<pre><code>## NOTE: These strings are displayed on App Store in the What’s new section for Firefox for iOS 6.0
## NOTE: See https://l10n.mozilla-community.org/stores_l10n/locale/fx_ios/release/

;Automatically open web links in Firefox from mail apps such as Outlook, Airmail, Mail.Ru, myMail and Spark. Also, make one of these mail services your default mail app when sending emails from Firefox.
Automatically open web links in Firefox from mail apps such as Outlook, Airmail, Mail.Ru, myMail and Spark. Also, make one of these mail services your default mail app when sending emails from Firefox.

;Fixed other bugs
Fixed other bugs


;App optimization improvements
App optimization improvements
</code></pre>
<p>This file will be committed later to the repository, since it’s still not tracked in langchecker.</p>
<h2><a class="header" href="#track-the-new-file-in-dashboards-updating-langchecker" id="track-the-new-file-in-dashboards-updating-langchecker">Track the new file in dashboards updating Langchecker</a></h2>
<p>You then need to start tracking this file in Langchecker. The process is described in detail in <a href="products/appstores/../../tools/webdashboards/add_new_file.html">this document</a>.</p>
<p>Again, you need to create a branch in the langchecker repository.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/langchecker/
$ git branch ios6_0
$ git checkout ios6_0
$ atom app/config/sources.inc.php
</code></pre>
<p>At this point you’re ready to add the new file to <code>$appstores_lang</code>. The easiest way is to start by identifying the file used for the previous cycle. For example, if you’re adding Firefox for iOS 6.0, identify the file used for 5.0:</p>
<pre><code class="language-PHP">$appstores_lang = [
    ...
    'fx_ios/whatsnew/ios_5_0.lang' =&gt; [
        'deadline'          =&gt; '2016-07-27',
        'supported_locales' =&gt; $fx_ios_store,
    ],
</code></pre>
<p>What you’ll need to do is:</p>
<ul>
<li>Add the new file for 6.0 (<code>fx_ios/whatsnew/ios_6_0.lang</code>) by copying the one used in the previous cycle and updating the version number.</li>
<li>Mark the previous file as obsolete by adding to its definition as indicated in the following example. As a general rule, there should be only one obsolete file in total, and the previous obsolete file can be deleted.</li>
</ul>
<pre><code class="language-PHP">'flags' =&gt; [
    'obsolete' =&gt; ['all'],
],
</code></pre>
<ul>
<li>Remove the deadline from the previous file and add it to the new one.</li>
</ul>
<pre><code class="language-PHP">$appstores_lang = [
    ...
    'fx_ios/whatsnew/ios_5_0.lang' =&gt; [
        'flags' =&gt; [
            'obsolete' =&gt; ['all'],
        ],
        'supported_locales' =&gt; $fx_ios_store,
    ],
    'fx_ios/whatsnew/ios_6_0.lang' =&gt; [
        'deadline'          =&gt; '2017-12-20',
        'supported_locales' =&gt; $fx_ios_store,
    ],
</code></pre>
<p>Now you can commit your changes to Langchecker. Always check with <code>git status</code> to confirm that you’re only including changes to <code>sources.inc.php</code>.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/langchecker/
$ git add app/config/sources.inc.php
$ git commit -m &quot;Track What's new page for iOS 6.0&quot;
$ git push origin ios6_0
</code></pre>
<h2><a class="header" href="#commit-lang-files-to-the-appstores-repository-1" id="commit-lang-files-to-the-appstores-repository-1">Commit .lang files to the appstores repository</a></h2>
<p>At this point you’re ready to copy the new file to all locales.</p>
<pre><code class="language-BASH">$ lang_update all 12 all
</code></pre>
<p>Check your local installation of langchecker for errors by visiting http://localhost/langchecker/?action=errors</p>
<p>If there are no errors, check the status of this repository with <code>git status</code>, and the content of the new file for at least one locale.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/repositories/appstores/
$ git add .
$ git commit -a -m &quot;Add What's new file for iOS 6.0&quot;
$ git push origin ios6_0
</code></pre>
<p>Note that you need to explicitly add the files with <code>git add</code>, since most of them are not tracked yet.</p>
<h2><a class="header" href="#updating-the-list-of-supported-locales-1" id="updating-the-list-of-supported-locales-1">Updating the list of supported locales</a></h2>
<p>Before you start working on stores_l10n, remember to run the <code>app/scripts/update_shipping_locales.py</code> script in the <code>~/mozilla/git/stores_l10n/</code> directory, as this project is used to keep track of which locales ship in each version of supported apps (Firefox for Android/iOS, Focus for Android/iOS). You can use the same branch for running the script, then adding strings to templates (explained in the next section).</p>
<p>In fact, as a general rule, you should periodically run this script - especially before starting to work on stores_l10n. If the script changes the list of locales:</p>
<ul>
<li>Run <code>lang_update all 12 all</code> to add missing files in the <code>appstores</code> repository.</li>
<li>Check in Pontoon if the new locales already have the <a href="https://pontoon.mozilla.org/projects/appstores/">Appstores</a> project enabled. If not, you will have to add the locale in the Admin interface, but only <strong>after files have been added</strong> to the repository, i.e. all branches have been merged.</li>
</ul>
<h2><a class="header" href="#add-strings-to-templates-in-stores_l10n-1" id="add-strings-to-templates-in-stores_l10n-1">Add strings to templates in stores_l10n</a></h2>
<p>Now you need to use the new file and strings in stores_l10n. Again, you’re going to work on a branch.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/stores_l10n/
$ git branch ios6_0
$ git checkout ios6_0
$ atom app/classes/Stores/Project.php
</code></pre>
<p>The variable to update is <code>$template</code>. From:</p>
<pre><code class="language-PHP">public $templates = [
   ...
   'fx_ios' =&gt; [
       'release' =&gt; [
           'template' =&gt; 'fx_ios/release/listing_sept_2015.php',
           'langfile' =&gt; 'fx_ios/description_release.lang',
           'whatsnew' =&gt; 'fx_ios/whatsnew/ios_5_0.lang',
       ],
   ],
</code></pre>
<p>To:</p>
<pre><code class="language-PHP">public $templates = [
   ...
   'fx_ios' =&gt; [
       'release' =&gt; [
           'template' =&gt; 'fx_ios/release/listing_sept_2015.php',
           'langfile' =&gt; 'fx_ios/description_release.lang',
           'whatsnew' =&gt; 'fx_ios/whatsnew/ios_6_0.lang',
       ],
   ],
</code></pre>
<p>Then you need to update <code>app/templates/fx_ios/release/listing_sept_2015.php</code>.
Search for the <code>$whatsnew</code> variable, and replace the old strings between straight quotes, removing or adding new lines as necessary.</p>
<pre><code class="language-PHP">$whatsnew = function ($translations) use ($_) {
    return &lt;&lt;&lt;OUT
• {$_('Automatically open web links in Firefox from mail apps such as Outlook, Airmail, Mail.Ru, myMail and Spark. Also, make one of these mail services your default mail app when sending emails from Firefox.')}
• {$_('Fixed other bugs')}
• {$_('App optimization improvements ')}
OUT;
};
</code></pre>
<p>At this point open the local installation of stores_l10n available at http://localhost/stores_l10n/ and check the Apple Appstore Release tab. If everything looks good, you can commit and push.</p>
<pre><code class="language-BASH">$ git commit -a -m &quot;Add What's new file for iOS 6.0&quot;
$ git push origin ios6_0
</code></pre>
<p>Now you’re ready to open pull requests for each of the three involved repositories.</p>
<p>If you’re using the l10n-drivers VM, both <strong>langchecker</strong> and <strong>stores_l10n</strong> are forks, so you’ll find them in your user account, e.g. <code>https://github.com/flodolo/langchecker/</code>. <strong>appstores</strong>, on the other hand, is a direct clone of the mozilla-l10n repository.</p>
<h1><a class="header" href="#l10n-and-firefox-for-android" id="l10n-and-firefox-for-android">L10n and Firefox for Android</a></h1>
<p>Some documentation specific for common tasks regarding Firefox for Android and l10n:</p>
<ul>
<li><a href="products/firefox_android/../../tools/mercurial/setting_mercurial_environment.html">Set up the environment</a>.</li>
<li><a href="products/firefox_android/adding_singlelocale.html">Adding a locale to single-locale builds</a>.</li>
<li><a href="products/firefox_android/adding_multilocales.html">Adding a locale to the multi-locales build</a>.</li>
<li><a href="products/firefox_android/../searchplugins/setup_searchplugins.html">Set up searchplugins</a>.</li>
</ul>
<h1><a class="header" href="#adding-a-new-locale-to-the-single-locale-build" id="adding-a-new-locale-to-the-single-locale-build">Adding a new locale to the single-locale build</a></h1>
<p>Android has two different types of builds: a multi-locale build that ships in Google Play Store, and a single-locale build (containing only one locale) that is mostly used for testing.</p>
<p>The list of locales for which single-locale builds are created is stored inside a file named <strong>all-locales</strong> within Mozilla’s code repositories. Since the goal is to create Nightly builds, the file will be in mozilla-central: https://hg.mozilla.org/mozilla-central/file/default/browser/locales/all-locales</p>
<h2><a class="header" href="#file-a-bug-to-add-the-new-locale" id="file-a-bug-to-add-the-new-locale">File a bug to add the new locale</a></h2>
<p>You need to file a bug in Firefox for Android::General requesting the new locale (see for example <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1271839">this bug for Guaraní</a>). You can use this <a href="https://bugzilla.mozilla.org/enter_bug.cgi?assigned_to=lebedel.delphine%40gmail.com&amp;bug_file_loc=http%3A%2F%2F&amp;bug_ignored=0&amp;bug_severity=normal&amp;bug_status=NEW&amp;cc=francesco.lodolo%40gmail.com&amp;cf_blocking_b2g=---&amp;cf_blocking_fennec=---&amp;cf_fx_iteration=---&amp;cf_fx_points=---&amp;cf_status_b2g_2_0=---&amp;cf_status_b2g_2_0m=---&amp;cf_status_b2g_2_1=---&amp;cf_status_b2g_2_1_s=---&amp;cf_status_b2g_2_2=---&amp;cf_status_b2g_2_2r=---&amp;cf_status_b2g_2_5=---&amp;cf_status_b2g_2_6=---&amp;cf_status_b2g_master=---&amp;cf_status_firefox46=---&amp;cf_status_firefox47=---&amp;cf_status_firefox48=---&amp;cf_status_firefox49=---&amp;cf_status_firefox_esr38=---&amp;cf_status_firefox_esr45=---&amp;cf_tracking_b2g=---&amp;cf_tracking_firefox46=---&amp;cf_tracking_firefox47=---&amp;cf_tracking_firefox48=---&amp;cf_tracking_firefox49=---&amp;cf_tracking_firefox_esr38=---&amp;cf_tracking_firefox_esr45=---&amp;cf_tracking_firefox_relnote=---&amp;cf_tracking_relnote_b2g=---&amp;comment=Please%20add%20the%20LOCALENAME%20%28ab-CD%29%20locale%20to%20all-locales%20to%20start%20Fennec%20single-locale%20builds%20in%20central%20and%20add%20Fennec%20to%20this%20team%27s%20dashboard.&amp;component=General&amp;contenttypemethod=autodetect&amp;contenttypeselection=text%2Fplain&amp;defined_groups=1&amp;flag_type-37=X&amp;flag_type-4=X&amp;flag_type-41=X&amp;flag_type-607=X&amp;flag_type-720=X&amp;flag_type-721=X&amp;flag_type-737=X&amp;flag_type-781=X&amp;flag_type-787=X&amp;flag_type-799=X&amp;flag_type-800=X&amp;flag_type-803=X&amp;flag_type-835=X&amp;flag_type-855=X&amp;flag_type-864=X&amp;flag_type-875=X&amp;flag_type-889=X&amp;flag_type-892=X&amp;flag_type-901=X&amp;flag_type-905=X&amp;flag_type-908=X&amp;form_name=enter_bug&amp;maketemplate=Remember%20values%20as%20bookmarkable%20template&amp;op_sys=Unspecified&amp;priority=--&amp;product=Firefox%20for%20Android&amp;rep_platform=Unspecified&amp;short_desc=%20Add%20%22ab-CD%22%20to%20Fennec%20all-locales%20for%20single-locale%20builds&amp;target_milestone=---&amp;version=unspecified">bug template</a> to make things faster (update with the appropriate locale code and language name).</p>
<p>You also want to file a bug to use as tracker (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1271970">example for gn</a>), adding an alias like <code>fm-l10n-gn</code> for <code>gn</code> and blocking <code>fm-l10n-tracker</code>.</p>
<h2><a class="header" href="#land-initial-content-in-l10n-repository" id="land-initial-content-in-l10n-repository">Land initial content in l10n repository</a></h2>
<p>With cross-channel, all builds of Firefox and Firefox Android are generated using strings from the l10n-central repository. If a project started localizing using a BitBucket repository, it’s <strong>fundamental</strong> to populate l10n-central with that content when requesting the official repository creation on <code>https://hg.mozilla.org/l10n-central/LOCALE_CODE</code>.</p>
<p>After the first content lands in l10n-central, it’s a good idea to perform some basic checks before enabling the build:</p>
<ul>
<li>Check <code>toolkit/global/intl.properties</code> (<a href="https://hg.mozilla.org/mozilla-central/file/default/toolkit/locales/en-US/chrome/global/intl.properties">en-US version</a>) for evident mistakes.</li>
<li>Check if there’s a <code>region.properties</code> file in <code>mobile/chrome/region.properties</code>. If needed replace it with the <a href="products/firefox_android/../searchplugins/files/mobile_region.properties">stock version</a>.</li>
</ul>
<h2><a class="header" href="#set-up-searchplugins" id="set-up-searchplugins">Set up searchplugins</a></h2>
<p>Check the <a href="products/firefox_android/../searchplugins/setup_searchplugins.html">Set up searchplugins</a> document for detailed instructions on how to set up searchplugins for new locales.</p>
<h2><a class="header" href="#creating-a-patch-for-build-configuration" id="creating-a-patch-for-build-configuration">Creating a patch for build configuration</a></h2>
<p>First of all make sure that your environment is <a href="products/firefox_android/../../tools/mercurial/setting_mercurial_environment.html">correctly set up</a>, and update your local mozilla-unified clone:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/mozilla-unified
$ hg pull -r default -u
$ hg update central
</code></pre>
<p>The file to modify is in <code>mobile/android/locales/all-locales</code>, open it with your text editor of choice.</p>
<pre><code class="language-BASH">$ atom mobile/android/locales/all-locales
</code></pre>
<p>And add the new locale to the list. With Atom and the Sort Lines package installed, you can press <code>F5</code> to make sure that the list is in <strong>alphabetical order</strong>. Let’s say for example that you need to add <code>ab-CD</code> to the list of supported locales.</p>
<p>The second file to modify is <code>mobile/android/locales/l10n.toml</code>. This is the beginning of the file:</p>
<pre><code># This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

basepath = &quot;../../..&quot;

locales = [
    &quot;an&quot;,
    &quot;ar&quot;,
    &quot;as&quot;,
    &quot;ast&quot;,
    &quot;az&quot;,
...
</code></pre>
<p>Identify the <code>locales</code> section, and add the new locale code between double quotes, followed by a comma. As before, you can use Atom to make sure the list is in alphabetical order (make sure to select only the lines with actual locale codes before pressing <code>F5</code>).</p>
<p>Once this is done, identify the <code>exclude-multi-locale</code> section. Since this locale is not shipping on multi-locale builds yet, you should add it there too.</p>
<p>After you’ve finished editing the files, check the status of the repository, and the diff.</p>
<pre><code class="language-BASH">$ hg status
M mobile/android/locales/all-locales

$ hg diff
--- a/mobile/android/locales/all-locales
+++ b/mobile/android/locales/all-locales
@@ -1,8 +1,9 @@
+ab-CD
 ar
 be
 ca
 cs
 da
 de
 es-AR
 es-ES

 diff --git a/mobile/android/locales/l10n.toml b/mobile/android/locales/l10n.toml
 --- a/mobile/android/locales/l10n.toml
 +++ b/mobile/android/locales/l10n.toml
 @@ -9,8 +9,9 @@ locales = [
 +    &quot;ab-CD&quot;,
      &quot;ar&quot;,
      &quot;be&quot;,
      &quot;ca&quot;,
      &quot;cs&quot;,
      &quot;da&quot;,
      &quot;es-AR&quot;,
@@ -9,8 +9,9 @@ exclude-multi-locale = [
  +    &quot;ab-CD&quot;,
       &quot;ia&quot;,
       &quot;oc&quot;,
...
</code></pre>
<p><code>M</code> in <code>hg status</code> indicates that the file has been modified, <code>+</code> in <code>hg diff</code> that the line has been added. Follow the instructions available in <a href="products/firefox_android/../../tools/mercurial/creating_mercurial_patch.html">this document</a> to create a patch, submit it for review, and land it.</p>
<h2><a class="header" href="#after-the-patch-has-landed" id="after-the-patch-has-landed">After the patch has landed</a></h2>
<p>A couple of days after the patch has landed check on FTP if builds are being generated for this new locale: https://ftp.mozilla.org/pub/mobile/nightly/latest-mozilla-central-android-api-16-l10n/</p>
<p>If there are no builds present, it’s usually due to errors in the locale, for example straight single or double quotes in Android DTDs. Check the team’s dashboard for these kind of errors.</p>
<h1><a class="header" href="#adding-a-new-locale-to-the-multi-locales-build" id="adding-a-new-locale-to-the-multi-locales-build">Adding a new locale to the multi-locales build</a></h1>
<p>Android has two different types of builds: a multi-locale build that ships in Google Play Store, and a single-locale build (containing only one locale) that is mostly used for testing.</p>
<p>The list of locales included in the multi-locales build is stored inside a file named <strong>maemo-locales</strong> within Mozilla’s code repositories. Since the goal is to create Nightly builds, the file will be in mozilla-central: https://hg.mozilla.org/mozilla-central/file/default/mobile/android/locales/maemo-locales</p>
<h2><a class="header" href="#file-a-bug-to-add-the-new-locale-1" id="file-a-bug-to-add-the-new-locale-1">File a bug to add the new locale</a></h2>
<p>You need to file a bug in Firefox for Android::General requesting the new locale (see for example <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1262464">this bug for Serbian</a>). You can use this <a href="https://bugzilla.mozilla.org/enter_bug.cgi?assigned_to=lebedel.delphine%40gmail.com&amp;bug_file_loc=http%3A%2F%2F&amp;bug_ignored=0&amp;bug_severity=normal&amp;bug_status=NEW&amp;cc=francesco.lodolo%40gmail.com&amp;cf_blocking_b2g=---&amp;cf_blocking_fennec=---&amp;cf_fx_iteration=---&amp;cf_fx_points=---&amp;cf_status_b2g_2_0=---&amp;cf_status_b2g_2_0m=---&amp;cf_status_b2g_2_1=---&amp;cf_status_b2g_2_1_s=---&amp;cf_status_b2g_2_2=---&amp;cf_status_b2g_2_2r=---&amp;cf_status_b2g_2_5=---&amp;cf_status_b2g_2_6=---&amp;cf_status_b2g_master=---&amp;cf_status_firefox46=---&amp;cf_status_firefox47=---&amp;cf_status_firefox48=---&amp;cf_status_firefox49=---&amp;cf_status_firefox_esr38=---&amp;cf_status_firefox_esr45=---&amp;cf_tracking_b2g=---&amp;cf_tracking_firefox46=---&amp;cf_tracking_firefox47=---&amp;cf_tracking_firefox48=---&amp;cf_tracking_firefox49=---&amp;cf_tracking_firefox_esr38=---&amp;cf_tracking_firefox_esr45=---&amp;cf_tracking_firefox_relnote=---&amp;cf_tracking_relnote_b2g=---&amp;comment=Please%20add%20the%20LOCALENAME%20%28ab-CD%29%20locale%20to%20maemo-locales%20to%20ship%20it%20in%20the%20Fennec%20multilocale%20APK.%20%0D%0A%0D%0AA%20revision%20has%20been%20signed%20off%20in%20Central%2C%20they%27re%20good%20to%20ship%20their%20first%20release%20with%20XX.&amp;component=General&amp;contenttypemethod=autodetect&amp;contenttypeselection=text%2Fplain&amp;defined_groups=1&amp;flag_type-37=X&amp;flag_type-4=X&amp;flag_type-41=X&amp;flag_type-607=X&amp;flag_type-720=X&amp;flag_type-721=X&amp;flag_type-737=X&amp;flag_type-781=X&amp;flag_type-787=X&amp;flag_type-799=X&amp;flag_type-800=X&amp;flag_type-803=X&amp;flag_type-835=X&amp;flag_type-855=X&amp;flag_type-864=X&amp;flag_type-875=X&amp;flag_type-889=X&amp;flag_type-892=X&amp;flag_type-901=X&amp;flag_type-905=X&amp;flag_type-908=X&amp;form_name=enter_bug&amp;maketemplate=Remember%20values%20as%20bookmarkable%20template&amp;op_sys=Unspecified&amp;priority=--&amp;product=Firefox%20for%20Android&amp;rep_platform=Unspecified&amp;short_desc=%20Add%20%22ab-CD%22%20to%20Fennec%20maemo-locales%20for%20the%20multi-locale%20build&amp;target_milestone=---&amp;version=unspecified">bug template</a> to make things faster:</p>
<ul>
<li>Update it with the appropriate locale code and language name.</li>
<li>Update the target version for Firefox in comment 0.</li>
<li>Set the <code>relnote-firefox</code> flag, e.g.</li>
</ul>
<pre><code>Release Note Request (optional, but appreciated)
[Why is this notable]: New locale
[Suggested wording]: &quot;Locale added: LANGUAGE (ab-CD)&quot;
[Links (documentation, blog post, etc)]:
</code></pre>
<h2><a class="header" href="#creating-a-patch-for-build-configuration-1" id="creating-a-patch-for-build-configuration-1">Creating a patch for build configuration</a></h2>
<p>First of all make sure that your environment is <a href="products/firefox_android/../../tools/mercurial/setting_mercurial_environment.html">correctly set up</a>, and update your local mozilla-unified clone:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/mozilla-unified
$ hg pull -r default -u
$ hg update central
</code></pre>
<p>The first file to modify is in <code>mobile/android/locales/maemo-locales</code>, open it with your text editor of choice.</p>
<pre><code class="language-BASH">$ atom mobile/android/locales/maemo-locales
</code></pre>
<p>And add the new locale to the list. With Atom and the Sort Lines package installed, you can press <code>F5</code> to make sure that the list is in <strong>alphabetical order</strong>. Let’s say for example that you need to add <code>ab-CD</code> to the list of supported locales.</p>
<p>The second file to modify is <code>mobile/android/locales/l10n.toml</code>. This is the beginning of the file:</p>
<pre><code># This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

basepath = &quot;../../..&quot;

locales = [
    &quot;ab-CD&quot;,
    &quot;an&quot;,
    &quot;ar&quot;,
    &quot;as&quot;,
    &quot;ast&quot;,
    &quot;az&quot;,
...
</code></pre>
<p>Identify the <code>locales</code> section, and make sure the locale is already listed under the <code>locales</code> section (it should have been added when enabling single locale builds). In the example above, the locale is represented by <code>ab-CD</code>.</p>
<p>Then locate the <code>exclude-multi-locale</code> section, and remove the locale from this list.</p>
<p>After you’ve finished editing the files, check the status of the repository, and the diff.</p>
<pre><code class="language-BASH">$ hg status
M mobile/android/locales/maemo-locales

$ hg diff
--- a/mobile/android/locales/maemo-locales
+++ b/mobile/android/locales/maemo-locales
@@ -1,8 +1,9 @@
+ab-CD
 ar
 be
 ca
 cs
 da
 de
 es-AR
 es-ES

 diff --git a/mobile/android/locales/l10n.toml b/mobile/android/locales/l10n.toml
 --- a/mobile/android/locales/l10n.toml
 +++ b/mobile/android/locales/l10n.toml
 @@ -9,8 +9,9 @@ locales = [
      &quot;ab-CD&quot;,
      &quot;ar&quot;,
      &quot;be&quot;,
      &quot;ca&quot;,
      &quot;cs&quot;,
      &quot;da&quot;,
      &quot;es-AR&quot;,
@@ -9,8 +9,9 @@ exclude-multi-locale = [
  -    &quot;ab-CD&quot;,
       &quot;ia&quot;,
       &quot;oc&quot;,
...
</code></pre>
<p><code>M</code> in <code>hg status</code> indicates that the file has been modified, <code>+</code> in <code>hg diff</code> that the line has been added, and <code>-</code> means it was removed. Follow the instructions available in <a href="products/firefox_android/../../tools/mercurial/creating_mercurial_patch.html">this document</a> to create a patch, submit it for review, and land it.</p>
<p><strong>IMPORTANT:</strong> an error in a single locale is going to break the multi-locales build for all locales, English included.</p>
<h1><a class="header" href="#l10n-and-firefox-desktop" id="l10n-and-firefox-desktop">L10n and Firefox desktop</a></h1>
<p>Some documentation specific for common tasks regarding Firefox desktop and l10n:</p>
<ul>
<li><a href="products/firefox_desktop/../../tools/mercurial/setting_mercurial_environment.html">Set up the environment</a>.</li>
<li><a href="products/firefox_desktop/adding_nightly.html">Adding a locale to Nightly builds</a>.</li>
<li><a href="products/firefox_desktop/adding_release.html">Adding a locale to Beta and Release builds</a>.</li>
<li><a href="products/firefox_desktop/../searchplugins/setup_searchplugins.html">Set up searchplugins</a>.</li>
<li><a href="products/firefox_desktop/removing_locales.html">Removing a locale</a>.</li>
</ul>
<h1><a class="header" href="#adding-a-new-locale-to-nightly-builds" id="adding-a-new-locale-to-nightly-builds">Adding a new locale to Nightly builds</a></h1>
<p>There are a few steps to complete in order to have Nightly builds for a new locale:</p>
<ul>
<li>File a tracking bug and dependencies.</li>
<li>Land initial content in l10n repositories.</li>
<li>Set up searchplugins.</li>
<li>Add new locale to build configuration.</li>
<li>Add new locale to product-details.</li>
</ul>
<h2><a class="header" href="#file-a-tracking-bug-and-dependencies-to-add-the-new-locale" id="file-a-tracking-bug-and-dependencies-to-add-the-new-locale">File a tracking bug and dependencies to add the new locale</a></h2>
<p>The first step is to create <a href="https://l10n.mozilla.org/bugs/new-locale">all the bugs</a> you need for this new locale. Let’s consider Lao (lo) as an example:</p>
<ul>
<li>Locale: <code>lo</code>.</li>
<li>Language: <code>Lao</code>.</li>
<li>Component: leave <code>Other</code> if there’s no component on Bugzilla yet, otherwise type in the component name in the <code>Mozilla Localizations</code> product (in this case <code>lo / Lao</code>).</li>
<li>Name: first name of the locale leader. It will be used as part of the bug messages.</li>
<li>Bugzilla ID: Bugzilla ID (email address) of the locale leader. It will be used to CC them to all these bugs.</li>
<li>Application: leave Firefox.</li>
<li>Version: leave the default.</li>
</ul>
<p>Click the <em>Create Buglinks</em> button, and a set of links will appear at the bottom of the page. Not all of them might be needed, for example LDAP is required only for Tableau access, repositories might already exist, etc. Make sure to always start with the <code>shipping</code> link, since that’s going to be the tracker bug, with an alias used in other bugs to set dependencies (<code>fx-l10n-LOCALECODE</code>, <code>fx-l10n-lo</code> in this example).</p>
<p>Always double check the content of the bugs for errors or outdated content. If the information is obsolete, you can update the templates in this <a href="https://wiki.mozilla.org/L10n:Bugogram">Wiki page</a> (it will require a new deployment of Elmo to production).</p>
<h2><a class="header" href="#land-initial-content-in-l10n-repository-1" id="land-initial-content-in-l10n-repository-1">Land initial content in l10n repository</a></h2>
<p>With cross-channel, all builds of Firefox are generated using strings from the l10n-central repository. If a project started localizing using a BitBucket repository, it’s <strong>fundamental</strong> to populate l10n-central with that content when requesting the official repository creation on <code>https://hg.mozilla.org/l10n-central/LOCALE_CODE</code>.</p>
<p>After the first content lands in l10n-central, it’s a good idea to perform some basic checks before enabling the build:</p>
<ul>
<li>Check <code>toolkit/global/intl.properties</code> (<a href="https://hg.mozilla.org/mozilla-central/file/default/toolkit/locales/en-US/chrome/global/intl.properties">en-US version</a>) for evident mistakes.</li>
<li>Check if there’s a <code>region.properties</code> file in <code>browser/chrome/browser-region/region.properties</code>, if needed replace it with the <a href="products/firefox_desktop/../searchplugins/files/desktop_region.properties">stock version</a>.</li>
</ul>
<h2><a class="header" href="#set-up-searchplugins-1" id="set-up-searchplugins-1">Set up searchplugins</a></h2>
<p>Check the <a href="products/firefox_desktop/../searchplugins/setup_searchplugins.html">Set up searchplugins</a> document for detailed instructions on how to set up searchplugins for new locales.</p>
<h2><a class="header" href="#add-new-locale-to-build-configuration" id="add-new-locale-to-build-configuration">Add new locale to build configuration</a></h2>
<p>First of all make sure that your environment is <a href="products/firefox_desktop/../../tools/mercurial/setting_mercurial_environment.html">correctly set up</a>, update your local mozilla-unified clone and make sure it’s on the <code>central</code> bookmark:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/mozilla-unified
$ hg pull -u
$ hg up central
</code></pre>
<p>The first file to modify is <code>browser/locales/all-locales</code>, open it with your text editor of choice.</p>
<pre><code class="language-BASH">$ atom browser/locales/all-locales
</code></pre>
<p>And add the new locale to the list. With Atom and the Sort Lines package installed, you can press <code>F5</code> to make sure that the list is in <strong>alphabetical order</strong>.</p>
<p>The second file to modify is <code>browser/locales/l10n.toml</code>. This is the beginning of the file:</p>
<pre><code># This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

basepath = &quot;../..&quot;

locales = [
    &quot;ach&quot;,
    &quot;af&quot;,
    &quot;an&quot;,
    &quot;ar&quot;,
    &quot;as&quot;,
...
</code></pre>
<p>Identify the <code>locales</code> section, and add the new locale code between double quotes, followed by a comma. As before, you can use Atom to make sure the list is in alphabetical order (make sure to select only the lines with actual locale codes before pressing <code>F5</code>).</p>
<p>After you’ve finished editing the files, check the status of the repository, and the diff.</p>
<pre><code class="language-BASH">$ hg status
M browser/locales/all-locales
M browser/locales/l10n.toml

$ hg diff
diff --git a/browser/locales/all-locales b/browser/locales/all-locales
--- a/browser/locales/all-locales
+++ b/browser/locales/all-locales
@@ -51,17 +51,16 @@ ja
 kn
 ko
 lij
+lo
 lt
 ltg
 lv

 diff --git a/browser/locales/l10n.toml b/browser/locales/l10n.toml
 --- a/browser/locales/l10n.toml
 +++ b/browser/locales/l10n.toml
 @@ -59,17 +59,16 @@ locales = [
      &quot;kn&quot;,
      &quot;ko&quot;,
      &quot;lij&quot;,
 +    &quot;lo&quot;,
      &quot;lt&quot;,
      &quot;ltg&quot;,
      &quot;lv&quot;,
</code></pre>
<p><code>M</code> in <code>hg status</code> indicates that the file has been modified, <code>+</code> in <code>hg diff</code> that the line has been added. Follow the instructions available in <a href="products/firefox_desktop/../../tools/mercurial/creating_mercurial_patch.html">this document</a> to create a patch, submit it for review, and land it.</p>
<h2><a class="header" href="#add-new-locale-to-product-details" id="add-new-locale-to-product-details">Add new locale to product-details</a></h2>
<p>Product-details, used to publish the build on mozilla.org, is generated by <a href="https://github.com/mozilla-releng/ship-it">Ship It</a>. Instructions are available in <a href="https://github.com/mozilla-releng/ship-it/blob/master/README-l10n.md">this README</a>. Note that, once reviewed and merged, the change won’t be available until the new version of <em>Ship It</em> is deployed to production.</p>
<h1><a class="header" href="#adding-a-new-locale-to-beta-and-release-builds" id="adding-a-new-locale-to-beta-and-release-builds">Adding a new locale to Beta and Release builds</a></h1>
<p>The majority of the work has already been completed when setting up <a href="products/firefox_desktop/adding_nightly.html">Nightly builds</a>. There are a few prerequisites before adding a new locale to Beta and Release:</p>
<ul>
<li>Localization should have reached a good level of completion, especially for user facing parts of the UI.</li>
<li>Localization team has demonstrated a consistent effort, being able to keep up for at least a couple of cycles with the incoming flow of new strings.</li>
<li>L10n-drivers have performed testing of the builds on different operative systems without identifying critical issues.</li>
<li>There is a relevant number of users on the Nightly channel. This number varies based on the language, for minority languages 10-20 users is a good result. Also, a trend showing growth is important as well.</li>
</ul>
<p>To track this work, you need to file a bug in Firefox::Build Config (like <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1359321">this example</a>), blocking the original tracking bug for the locale (<code>fx-l10n-LOCALE</code>).</p>
<h2><a class="header" href="#add-locale-to-build-configuration" id="add-locale-to-build-configuration">Add locale to build configuration</a></h2>
<p>First of all make sure that your environment is <a href="products/firefox_desktop/../../tools/mercurial/setting_mercurial_environment.html">correctly set up</a>, update your local mozilla-unified clone and make sure it’s on the <code>central</code> bookmark:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/mozilla-unified
$ hg pull -u
$ hg up central
</code></pre>
<p>The file to modify is in <code>browser/locales/shipped-locales</code>, open it with your text editor of choice.</p>
<pre><code class="language-BASH">$ atom browser/locales/shipped-locales
</code></pre>
<p>And add the new locale to the list. With Atom and the Sort Lines package installed, you can press <code>F5</code> to make sure that the list is in <strong>alphabetical order</strong>.</p>
<p>After you’ve finished editing the file, check the status of the repository, and the diff. Let’s consider for example the task of adding Urdu (ur).</p>
<pre><code class="language-BASH">$ hg status
M browser/locales/shipped-locales

$ hg diff
--- a/browser/locales/shipped-locales
+++ b/browser/locales/shipped-locales
@@ -83,14 +84,13 @@ son
 te
 th
 tr
 uk
+ur
 uz
 vi
 xh
 zh-CN
</code></pre>
<p><code>M</code> in <code>hg status</code> indicates that the file has been modified, <code>+</code> in <code>hg diff</code> that the line has been added. Follow the instructions available in <a href="products/firefox_desktop/../../tools/mercurial/creating_mercurial_patch.html">this document</a> to create a patch, submit it for review, and land it.</p>
<p>You also need to set the <code>relnote-firefox</code> flag to <code>?</code> in the bug, the suggested comment is <code>Suggested for release notes: &quot;Locale added: LANGUAGE_NAME (LOCALE_CODE)&quot;</code>.</p>
<p>In order to have builds when the Beta cycle starts, make sure to sign-off the locale on <a href="https://l10n.mozilla.org/">the dashboard</a> (elmo) for central before next merge day, and verify that a sign-off is correctly available on beta before beta1.</p>
<h2><a class="header" href="#update-language-pack-settings-on-amo" id="update-language-pack-settings-on-amo">Update language pack settings on AMO</a></h2>
<p>The language pack for the new locale will be uploaded automatically by release automation on <em>addons.mozilla.org</em> (starting with the Beta version). A few follow-up manual steps are needed:</p>
<ul>
<li>The <code>Mozilla</code> account needs to be added as author for the language pack.</li>
<li>The <code>target_locale</code> field needs to be set for the language pack (via Django admin UI).</li>
<li>The locale needs to be defined in <a href="https://github.com/mozilla/addons-frontend/blob/master/src/core/languages.js">this JavaScript file</a>.</li>
</ul>
<p>For the first two steps, an email needs to be sent to AMO administrators (amo-admins(at)mozilla.org).</p>
<p>These steps will make the language pack available in both the <a href="https://addons.mozilla.org/firefox/language-tools/">Language Tools</a> page and the API used by Firefox to add new languages from preferences.</p>
<h1><a class="header" href="#removing-a-locale-from-firefox-desktop" id="removing-a-locale-from-firefox-desktop">Removing a locale from Firefox desktop</a></h1>
<p>Removing a locale from Firefox builds should be the last step in a long series of passages. A locale is removed when:</p>
<ul>
<li>There’s no visible activity in Pontoon for a year.</li>
<li>The translation level of Firefox is dropping, causing a good portion of the user interface to appear in English.</li>
<li>Outreach to existing community and locale leaders doesn’t produce results.</li>
<li>Attempts to find new localizers, via social networks and other tools (e.g. <a href="https://github.com/mozilla-l10n/localizer-documentation/blob/master/webprojects/snippets.md">snippets</a>), doesn’t find any potential contributors.</li>
</ul>
<h2><a class="header" href="#removing-a-locale-from-nightly" id="removing-a-locale-from-nightly">Removing a locale from Nightly</a></h2>
<p>If a locale is only shipping in Nightly, it’s enough to remove the locale from build configuration.</p>
<p>The process is identical to the one use to <a href="products/firefox_desktop/adding_nightly.html#add-new-locale-to-build-configuration">add a new locale</a>, just removing the locale code from <code>browser/locales/all-locales</code>.</p>
<p>Locale also needs to be removed from <a href="https://github.com/mozilla-releng/ship-it/blob/master/README-l10n.md">Ship It</a>.</p>
<h2><a class="header" href="#removing-a-locale-from-beta-and-release" id="removing-a-locale-from-beta-and-release">Removing a locale from Beta and Release</a></h2>
<p>Removing a locale already shipping in official builds (Beta, Release) is a much more complex process. These are the steps:</p>
<ul>
<li><a href="products/firefox_desktop/removing_locales.html#check-usage-statistics">Check usage statistics</a>.</li>
<li><a href="products/firefox_desktop/removing_locales.html#redirect-existing-users-to-another-locale">Redirect existing users to another locale</a>.</li>
<li><a href="products/firefox_desktop/removing_locales.html#remove-locale-from-beta-builds">Remove locale from Beta builds</a>.</li>
</ul>
<p>Mercurial repositories and Bugzilla components are not removed when dropping a locale.</p>
<p>Given the number of teams and processes involved, a <strong>tracking bug should be filed</strong> (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1304743">example</a>).</p>
<h3><a class="header" href="#check-usage-statistics" id="check-usage-statistics">Check usage statistics</a></h3>
<p>Existing users for this locale need to be moved to another language, otherwise they would remain forever on an obsolete build. The first step is to determine the current usage statistics:</p>
<ul>
<li>Check the number of ADIs for this locale on <a href="https://dataviz.mozilla.org/#/views/LocalizedFirefoxDesktopADI/LocalizedFirefoxDesktopADI">Tableau</a>.</li>
<li>Check usage on Telemetry using a <a href="https://sql.telemetry.mozilla.org/queries/4237">query similar to this one</a>.</li>
</ul>
<p>If the locale has a significant userbase (in the hundreds of users), you need to determine the best locale to fall back to. Possible sources of information are:</p>
<ul>
<li>Wikipedia page for the language to determine where it’s spoken, and if there are other languages commonly spoken in the area.</li>
<li><a href="https://dataviz.mozilla.org/#/views/LocalizedFirefoxDesktopADI/LocalizedFirefoxDesktopADI">Tableau</a> for the language distribution in these countries.</li>
</ul>
<p>You also need to verify with Business Development if there are <strong>contractual obligations regarding search engines</strong>.</p>
<p>For example, Belarusian was recently removed from builds:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Belarusian_language">Belarusian</a> is the official language of Belarus. The Wikipedia page also has information about the number of people speaking both Russian and Belarusian in the region.</li>
<li>Russian is an official language of Belarus.</li>
<li>Russia has a low percentage of <a href="https://en.wikipedia.org/wiki/List_of_countries_by_English-speaking_population">population speaking English</a>.</li>
</ul>
<p>For these reasons, Russian was selected as the best fall back language for Belarusian. Unfortunately, sources might not always point into the same direction, in some cases en-US might be the only viable option.</p>
<h3><a class="header" href="#redirect-existing-users-to-another-locale" id="redirect-existing-users-to-another-locale">Redirect existing users to another locale</a></h3>
<p>Once identified the language to fall back to, a bug needs to be <a href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Release%20Engineering&amp;component=Releases">filed in Release Engineering::Releases</a> to redirect users via update snippets. An example of such bug is <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1304747">available here</a>.</p>
<h3><a class="header" href="#remove-locale-from-beta-builds" id="remove-locale-from-beta-builds">Remove locale from Beta builds</a></h3>
<p>The process is identical to the one use to <a href="products/firefox_desktop/adding_release.html#add-locale-to-build-configuration">add a new locale</a>, just removing the locale code from <code>browser/locales/shipped-locales</code> in Beta. The change will ride the train to Release at the end of the cycle.</p>
<h1><a class="header" href="#review-process" id="review-process">Review process</a></h1>
<ul>
<li><a href="products/review/review.html">How to review strings in Firefox desktop and Firefox for Android</a></li>
<li><a href="products/review/signoffs.html">How to manage sign-offs for Firefox desktop and Firefox for Android</a></li>
</ul>
<h1><a class="header" href="#sign-offs-for-firefox-desktop-and-firefox-for-android" id="sign-offs-for-firefox-desktop-and-firefox-for-android">Sign-offs for Firefox desktop and Firefox for Android</a></h1>
<ul>
<li><a href="products/review/signoffs.html#how-to-perform-sign-offs">How to perform sign-offs</a></li>
<li><a href="products/review/signoffs.html#bulk-sign-offs">Bulk sign-offs</a></li>
<li><a href="products/review/signoffs.html#things-to-check-when-doing-a-sign-off">Things to check when doing a sign-off</a></li>
</ul>
<p>Sign-offs are a way for l10n-drivers to indicate that a specific changeset is technically sound and ready to ship in Firefox desktop or Firefox for Android. Currently, thanks to cross-channel, we ship all versions of Firefox from a <a href="https://hg.mozilla.org/l10n-central/">single localization repository</a>, but sign-offs only happen for the Beta channel:</p>
<ul>
<li>Nightly builds always use the tip of the repository, i.e. the latest changes available.</li>
<li>Beta builds only use the signed off version.</li>
<li>Release builds uses the latest signed off version from Beta, and can’t normally be updated to use a most recent version.</li>
</ul>
<p>Sign-offs are tied to a specific app version. For example, Firefox 57 starts in Nightly and doesn’t get any sign-off; it then moves to Beta and get multiple sign-offs as the localization progresses. It then moves to release, and any dot release (e.g. 57.0.1) will use the latest sign-off available for the 57 version, done when it was still in Beta.</p>
<p>Note that sign-offs on Beta are not possible through the entire cycle: sign-offs deadline is normally on Wednesday, about 2 weeks before the release, to allow time for at least one more Beta build before the end of the cycle.</p>
<p>Beta sign-offs are performed on l10n.mozilla.org (Elmo) <a href="https://l10n.mozilla.org/shipping/dashboard?tree=fennec_beta&amp;tree=fx_beta">in this page</a>.</p>
<h2><a class="header" href="#how-to-perform-sign-offs" id="how-to-perform-sign-offs">How to perform sign-offs</a></h2>
<p><a href="https://l10n.mozilla.org/shipping/dashboard?tree=fennec_beta&amp;tree=fx_beta">This page</a> only includes sign-offs for Firefox desktop (<code>fx_beta</code>) and Firefox for Android (<code>fennec_beta</code>) beta.</p>
<p><img src="products/review/../../assets/images/signoffs/signoffs_table.png" alt="Sign-offs table repository" /></p>
<p>A green checkmark is displayed in the <em>Status</em> column if the locale has a sign-off, while it’s empty if there are no sign-offs for this locale. This typically happens for brand new locales that are only shipping in Nightly.</p>
<p>The <em>Action</em> column can display several icons:</p>
<ul>
<li>A prohibited icon indicates that there is no activity after the last sign-off (belonging to a previous version), and therefore it’s not possible to do an updated sign-off.</li>
<li>A sparkline icon indicates activity that should be checked:
<ul>
<li>Green indicates that the translation is complete (no error, no missing strings).</li>
<li>Orange means that the product is still incomplete.</li>
<li>Red means that there are errors in the localization. The number of errors and warnings is also reported within the table.</li>
</ul>
</li>
</ul>
<p>To perform the sign-off, click on the sparkline icon. It will open a new page, showing information about the last sign-off, and the changesets that follows it.</p>
<p><img src="products/review/../../assets/images/signoffs/changesets_table.png" alt="List of changesets" /></p>
<p>For each changeset, it’s possible to check <code>compare-locale</code>’s results by clicking on the link in the second column from the left. Errors and warnings would be reported in the link too.</p>
<p>Some changesets won’t have a link to <code>compare-locales</code>’s results (e.g. the second row in the image above). That indicates a changeset that doesn’t affect the product you’re currently signing off (e.g. a Thunderbird change in Firefox), and it’s not a good candidate for sign-offs.</p>
<p>By clicking in one of the cells in the rightmost column, by default you can display a diff between the latest changeset and the most recent sign-off. Note that both circles can be dragged, to display the diff between specific changesets. It’s also possible to load more changeset at the bottom of the table using the <em>Load more</em> button.</p>
<p><img src="products/review/../../assets/images/signoffs/diff_view.png" alt="Diff view" /></p>
<p>In this view, green means that content has been added, red it’s been removed, while orange indicates a change. Each level of the diff can be collapsed simply by clicking on the same line as the file or folder name.</p>
<p>Once you have reviewed the diff, you can return to the previous page, and sign off the changeset by clicking the <em>sign off…</em> button. To accept the sign-off, simply click the <em>Sign off</em> button:</p>
<p><img src="products/review/../../assets/images/signoffs/accept_signoff.png" alt="Requesting and accepting a sign-off" /></p>
<p>To explicitly reject a sign-off, unselect the <em>Sign off and accept</em> checkbox. Then click on <em>Review…</em> and reject the sign-off with a reason.</p>
<p><img src="products/review/../../assets/images/signoffs/reject_signoff.png" alt="Rejecting a sign-off" /></p>
<h2><a class="header" href="#bulk-sign-offs" id="bulk-sign-offs">Bulk sign-offs</a></h2>
<p>A <a href="https://l10n.mozilla.org/shipping/drivers">new view</a> has been added to Elmo to perform sign-offs in bulk. This is particularly useful, for example, after running Fluent migrations, when all locales receive changes and would require an updated sign-off.</p>
<p><img src="products/review/../../assets/images/signoffs/drivers_view.png" alt="Bulk sign-offs landing page" /></p>
<p>In the initial page it’s possible to select a product version. For example, clicking <code>Firefox 71</code> in the <em>Bulk Sign-Off</em> column will lead to this view:</p>
<p><img src="products/review/../../assets/images/signoffs/drivers_view_product.png" alt="Single product, bulk sign-offs page" /></p>
<p>The number of rows displayed depends on how many pending sign-offs there are for the requested product version. If there aren’t new changesets compared to the existing sign-offs, the table will be empty.</p>
<p>In each row:</p>
<ul>
<li>The first column shows the locale code, with a link to the locale’s sign-off page for the product version (e.g. <code>/shipping/signoffs/ach/fx71</code>).</li>
<li>The second column has the summary of <code>compare-locales</code>’s run for the latest changeset (link points to the full results). If empty, it means that there are no results available: either checks are still queued, or they didn’t run because the latest changeset doesn’t include files relevant for the requested product version (e.g. only Thunderbird changes, when the sign-off is for Firefox).</li>
<li>The third column links to the diff view between the last accepted sign-off and the latest changeset.</li>
</ul>
<p>After reviewing the diff, to accept a sign-off you can click the <em>Accept</em> button. It’s important to note that there will be no confirmation dialog, and it’s not possible to reject a sign-off from this view. The row will be automatically removed from the table after accepting a sign-off.</p>
<h2><a class="header" href="#things-to-check-when-doing-a-sign-off" id="things-to-check-when-doing-a-sign-off">Things to check when doing a sign-off</a></h2>
<p>The first thing to do is to look at errors and warnings. For warnings, always double check if the number increased from the last sign-off, identify which changeset introduced new warnings, and if they’re acceptable.</p>
<p>Here are a few more things to look out for when doing sign-offs:</p>
<ul>
<li>Strings, or portion of text, remaining in English or becoming empty.</li>
<li>Translated keyboard shortcuts (command keys). Unlike access keys, they should remain identical to English.</li>
<li>Changes to files that require review, like <code>region.properties</code>.</li>
<li><a href="https://www.mozilla.org/en-US/styleguide/communications/translation/">Changes to branding</a>, i.e. translated or transliterated brand names (Mozilla, Firefox).</li>
<li>Changes to <code>extensions/spellcheck</code> (dictionaries). We can only ship dictionaries if they have a compatible license. If a dictionary was already present, it’s likely to be OK. A brand new dictionary should land with a bug associated.</li>
</ul>
<h1><a class="header" href="#reviewing-strings-in-firefox-desktop-and-firefox-for-android" id="reviewing-strings-in-firefox-desktop-and-firefox-for-android">Reviewing strings in Firefox desktop and Firefox for Android</a></h1>
<ul>
<li><a href="products/review/review.html#review-landed-strings">Review landed strings</a>
<ul>
<li><a href="products/review/review.html#review-strings-landing-in-mozilla-central">Review strings landing in mozilla-central</a></li>
<li><a href="products/review/review.html#review-strings-landing-in-gecko-strings-quarantine">Review strings landing in gecko-strings-quarantine</a></li>
<li><a href="products/review/review.html#run-compare-locales-against-gecko-strings">Run compare-locales against gecko-strings</a></li>
<li><a href="products/review/review.html#run-compare-locales-against-a-localization-repository">Run compare-locales against a localization repository</a></li>
<li><a href="products/review/review.html#push-reviewed-strings-to-gecko-strings">Push reviewed strings to gecko-strings</a></li>
</ul>
</li>
</ul>
<h2><a class="header" href="#review-landed-strings" id="review-landed-strings">Review landed strings</a></h2>
<p>Starting from Firefox 57, all versions of Firefox desktop and Firefox for Android ship by localizing a single repository containining the reference English strings, called <a href="https://hg.mozilla.org/l10n/gecko-strings">gecko-strings</a>. It is generated from strings landing in the code repository for each branch (e.g. mozilla-central and comm-central for Nightly, mozilla-beta and comm-beta for Beta, etc.), and it’s exposed to localization tools like Pontoon.</p>
<p>There is a second repository, <a href="https://hg.mozilla.org/users/axel_mozilla.com/gecko-strings-quarantine">gecko-strings-quarantine</a>, used as a buffer to avoid exposing poor strings to the larger audience of localizers.</p>
<p>The localizations for all channels can be found in <a href="https://hg.mozilla.org/l10n-central/">l10n-central</a>, with a single repository for each locale.</p>
<p>The review process consists of three parts:</p>
<ul>
<li>Review strings landing in <code>mozilla-central</code>. Currently <code>comm-central</code> doesn’t undergo a similar review process.</li>
<li>Review strings landing in <code>gecko-strings-quarantine</code>. Currently, the quarantine repository is updated manually every few days.</li>
<li>Push reviewed strings to <code>gecko-strings</code>, and start the localization process.</li>
</ul>
<h3><a class="header" href="#review-strings-landing-in-mozilla-central" id="review-strings-landing-in-mozilla-central">Review strings landing in mozilla-central</a></h3>
<p>You can get the list of changesets touching localized strings in the last 2 days from <a href="https://hg.mozilla.org/mozilla-central/log?rev=keyword(%22locales/en-US%22)+and+pushdate(%22-2%22)">mozilla-central</a>. Adjust the <code>pushdate</code> part if you want to see more or less days.</p>
<p>There are some irrelevant changesets, like en-US dictionary updates, but the majority of landings are relevant and need to be checked for localization issues.</p>
<p>You need to open each changeset, and identify changed files that are relevant for localization (.properties, .dtd, .ini).</p>
<p>Things to look out for:</p>
<ul>
<li>Unclear strings and missing localization comments: the best way to identify them is to translate the strings, only having the string and comment as context (not the entire file, or the bug). For example: is the word used both a noun and a verb in English? Is the ID clear enough to give context (e.g. <code>buttonLabel</code>)?</li>
<li>String changes without new IDs.</li>
<li>Duplicated strings.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Localization/Localization_content_best_practices">Localization issues</a>, like misused plural forms, unclear comments, etc.</li>
</ul>
<p>In case of issues, you have two options:</p>
<ul>
<li>Ask sheriffs (via bug or IRC in #sheriffs) to back out the patch.</li>
<li>Ask clarifications in the bug, and decide if it’s worth to stop exposing new strings until the issue is fixed.</li>
</ul>
<h3><a class="header" href="#review-strings-landing-in-gecko-strings-quarantine" id="review-strings-landing-in-gecko-strings-quarantine">Review strings landing in gecko-strings-quarantine</a></h3>
<p>The next step is to spot check changes landed in <a href="https://hg.mozilla.org/users/axel_mozilla.com/gecko-strings-quarantine/shortlog">gecko-strings-quarantine</a>. Here are some things to look out for:</p>
<ul>
<li>Check if a changeset is removing strings. This should happen only when a string landed in Nightly and was removed during the same cycle, or at the beginning of a release cycle when a group of strings becomes unused in all shipping versions.</li>
<li>Compare the changeset with the original landing in mozilla-central. Each changeset’s header contains a set of references (consider <a href="https://hg.mozilla.org/users/axel_mozilla.com/gecko-strings-quarantine/rev/9c9e89dd4fd5">this example</a>), the most important one is <code>X-Channel-Converted-Revision</code>, which links to the original landing in the code repository.</li>
</ul>
<h3><a class="header" href="#run-compare-locales-against-gecko-strings" id="run-compare-locales-against-gecko-strings">Run compare-locales against gecko-strings</a></h3>
<p>A good next step to check for issues is to run <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/compare-locales">compare-locales</a> against the <code>gecko-strings</code> repository.</p>
<p>First of all make sure that your environment is <a href="products/review/../../tools/mercurial/setting_mercurial_environment.html">correctly set up</a>, and update your local <code>mozilla-unified</code> clone.</p>
<p><code>compare-locales</code> needs to be installed on your system. You can either install a specific release, or clone the <a href="https://hg.mozilla.org/l10n/compare-locales/">hg repository</a> and install it via <code>pip install -e .</code>. You can check that <code>compare-locales</code> is running correctly by checking its version:</p>
<pre><code>$ compare-locales --version
compare-locales 2.1
</code></pre>
<p>Let’s assume that:</p>
<ul>
<li><a href="https://hg.mozilla.org/users/axel_mozilla.com/gecko-strings-quarantine">gecko-strings-quarantine</a> is cloned in <code>~/l10n/gecko-strings-quarantine</code>.</li>
<li><a href="https://hg.mozilla.org/mozilla-unified">mozilla-unified</a> is cloned in <code>~/src/mozilla-unified</code>, and you checked out the version corresponding to the converted changeset.</li>
</ul>
<p>Then run</p>
<pre><code>$ compare-locales --unified --full ~/src/mozilla-unified/browser/locales/l10n.toml ~/src/mozilla-unified/mobile/android/locales/l10n.toml ~/l10n gecko-strings-quarantine
</code></pre>
<p>If you also have <a href="https://hg.mozilla.org/comm-central">comm-central</a> checked out, you can check Thunderbird and allies with:</p>
<pre><code>$ compare-locales --unified --full -Dmozilla=~/src/mozilla-unified/ ~/src/comm-central/mail/locales/l10n.toml ~/src/comm-central/calendar/locales/l10n.toml ~/src/comm-central/suite/locales/l10n.toml ~/l10n gecko-strings-quarantine
</code></pre>
<p>When running these, you should see no errors or warnings. When running them against the central revisions, you should see no missing or changed strings, while having obsolete strings is expected. When running against beta or release revisions, expect to have changed strings, but again, no missing strings.</p>
<p>Note: when running compare-locales against a non-existing locale code, use the <code>--full</code> commandline argument to get all strings in submodules. In particular for gecko-strings, you need that, otherwise you only get the strings in the <code>browser</code> and <code>mobile/android</code> directories.</p>
<h3><a class="header" href="#run-compare-locales-against-a-localization-repository" id="run-compare-locales-against-a-localization-repository">Run compare-locales against a localization repository</a></h3>
<p>A good next step to check for issues is to run compare-locales against a localization repository frequently updated (Italian and French are good examples).</p>
<ul>
<li><a href="https://hg.mozilla.org/l10n-central/it">l10n-central/it</a> is cloned in <code>~/l10n/it</code>.</li>
</ul>
<p>To run compare-locales against <code>mozilla-unified</code> and Italian, for both desktop and Android, you can run:</p>
<pre><code>$ compare-locales --unified ~/src/mozilla-unified/browser/locales/l10n.toml ~/src/mozilla-unified/mobile/android/locales/l10n.toml ~/l10n it
</code></pre>
<p>To run compare-locales against <code>gecko-strings-quarantine</code> and Italian, for both desktop and Android, you can run:</p>
<pre><code>$ compare-locales --unified ~/l10n/gecko-strings-quarantine/_configs/browser.toml ~/l10n/gecko-strings-quarantine/_configs/mobile-android.toml ~/l10n it
</code></pre>
<p>Both are really long commands, so it’s convenient to create Bash aliases in <code>~/.bash_profile</code> for them, e.g.</p>
<pre><code>cmp_moz=&quot;compare-locales --unified ~/src/mozilla-unified/browser/locales/l10n.toml ~/src/mozilla-unified/mobile/android/locales/l10n.toml ~/l10n it&quot;
cmp_mozx=&quot;compare-locales --unified ~/l10n/gecko-strings-quarantine/_configs/browser.toml ~/l10n/gecko-strings-quarantine/_configs/mobile-android.toml ~/l10n it&quot;
</code></pre>
<p>Let’s start with the output of <code>compare-locales</code> against <code>gecko-strings-quarantine</code>: most of the time, it should only report missing strings. There will be obsolete strings only if a string was removed, which is a rare event in cross-channel.</p>
<p>For example, this is the output for a fully localized locale.</p>
<pre><code>$ compare-locales --unified ~/l10n/gecko-strings-quarantine/_configs/browser.toml ~/l10n/gecko-strings-quarantine/_configs/mobile-android.toml ~/l10n it
it:
changed: 9914
changed_w: 52351
keys: 1383
unchanged: 883
unchanged_w: 1085
91% of entries changed
</code></pre>
<p>Check the results for duplicated strings and errors. For example, if a new error shows up for a missing variable, it’s likely that a string changed without a new ID and introduced new variables.</p>
<p>The output of <code>compare-locales</code> against <code>mozilla-unified</code> is going to contain a lot of noise, since it includes all strings that are obsolete for <code>mozilla-central</code>, but are still needed for other branches. If you’re interested in only seeing missing strings, i.e. strings that need to be added to the l10n repository, you can <code>grep</code> the results by piping the output to <code>egrep '^\s*\+'</code>.</p>
<pre><code>$ compare-locales --unified ~/src/mozilla-unified/browser/locales/l10n.toml ~/src/mozilla-unified/mobile/android/locales/l10n.toml ~/l10n it | egrep '^\s*\+'
</code></pre>
<h3><a class="header" href="#push-reviewed-strings-to-gecko-strings" id="push-reviewed-strings-to-gecko-strings">Push reviewed strings to gecko-strings</a></h3>
<p>If there are no issues in <code>gecko-strings-quarantine</code>, the next step is to push changes to <code>gecko-strings</code> and expose content to tools.</p>
<p>One time setup: after you cloned <code>gecko-strings-quarantine</code> on your system, you need to edit its <code>.hg/hgrc</code> file, and add <code>gecko-strings</code> as path. While you only need <code>https</code> for pulling the quarantine repository, you need <code>ssh</code> in order to push updates to <code>gecko-strings</code>.</p>
<p>The content of <code>~/l10n/gecko-strings-quarantine/.hg/hgrc</code> should be similar to this:</p>
<pre><code>[paths]
default = https://hg.mozilla.org/users/axel_mozilla.com/gecko-strings-quarantine
gecko-strings = ssh://hg.mozilla.org/l10n/gecko-strings
</code></pre>
<p>To push the current <code>default</code> to <code>gecko-strings</code>, from the <code>gecko-strings-quarantine</code> folder simply run:</p>
<pre><code>$ hg push -r default gecko-strings
</code></pre>
<p>Instead of <code>default</code>, you can also push a specific changeset, e.g.</p>
<pre><code>$ hg push -r 4c05bc050007 gecko-strings
</code></pre>
<h1><a class="header" href="#l10n-and-firefox-for-ios" id="l10n-and-firefox-for-ios">L10n and Firefox for iOS</a></h1>
<p>Some documentation specific for common tasks regarding Firefox for iOS and l10n:</p>
<ul>
<li><a href="products/firefox_iOS/review_iOSstrings.html">Reviewing new strings for a new release</a>.</li>
</ul>
<h1><a class="header" href="#reviewing-strings-for-a-new-release-of-firefox-for-ios" id="reviewing-strings-for-a-new-release-of-firefox-for-ios">Reviewing strings for a new release of Firefox for iOS</a></h1>
<p>Usually, a new release of Firefox for iOS means an update to strings. If this is the case, a pull request will be made by the iOS team, in order to land these new strings in the <a href="https://github.com/mozilla-l10n/firefoxios-l10n">mozilla-l10n firefoxios-l10n repository</a>.</p>
<p>At this point, the PR is reviewed by an l10n-driver - most often by the PM in charge of the project.</p>
<p>Let’s go over some of the steps needed over time in order to review correctly strings for a new release.</p>
<h2><a class="header" href="#reviewing-the-pr" id="reviewing-the-pr">Reviewing the PR</a></h2>
<p>When you’re getting close to the end of the <a href="https://wiki.mozilla.org/Firefox_for_iOS_Train_Schedule">Firefox for iOS l10n cycle</a>, the iOS team will make a pull request in order to land new strings for the upcoming release.</p>
<p>Let’s consider a past PR, which was done for v6.0:
https://github.com/mozilla-l10n/firefoxios-l10n/pull/19</p>
<p>The first thing you’ll want to do is to check the changes to the /en-US folder:
https://github.com/mozilla-l10n/firefoxios-l10n/pull/19/commits/edcee6500a4cec7cd40251e0dd2c047a5ffbe3ae</p>
<h3><a class="header" href="#acceptable-changes" id="acceptable-changes">Acceptable changes</a></h3>
<p>Changes to attributes like tool-version and build-num are expected, they happen every time you change the version of Xcode.</p>
<p>Same for the utf-8 -&gt; UTF-8 at the beginning, and version number bumping to 6.0. Note that these should now be automatically translated (so will not appear as new strings for localizers and they will not need to touch them).</p>
<p>Changes to comments (<note>) are irrelevant in terms of string updates, so they’re also OK.</p>
<p>Remember also that the script converts Unicode literals into UTF-8 characters. Example: https://github.com/mozilla-l10n/firefoxios-l10n/pull/19/commits/713def82602224556d797b46e3f6d611297ee3e3#diff-42d28e544c7a30099950b7a09a69f2caL2289</p>
<p>As you can see, the <code>&amp;#173;</code> was not lost - it was converted to the invisible UTF-8 character.</p>
<h3><a class="header" href="#potentially-problematic-changes-removals" id="potentially-problematic-changes-removals">Potentially problematic changes (removals)</a></h3>
<p>Then you start scrolling down, checking if the new strings make sense: the first one you find is NSCameraUsageDescription.</p>
<p>You mostly need to pay attention to the strings removed. Double-check each time that iOS team clearly realizes that they won’t be able to release updates to v5 (or any v5.x release) once strings are exported.</p>
<p>For example: <code>Menu.NightModeAction.Title</code> is removed. If it’s used in v5, and the iOS team plans to release an update to v5 in the future, localizations will miss that string.</p>
<h3><a class="header" href="#quickly-review-other-locales" id="quickly-review-other-locales">Quickly review other locales</a></h3>
<p>Once you’ve checked <code>templates</code>, you can pick at least one locale and see what changes:
https://github.com/mozilla-l10n/firefoxios-l10n/pull/19/commits/a1c041a012e6996bd8bdaec88f21f3c34fe383b0</p>
<h2><a class="header" href="#reviewing-strings-during-the-cycle" id="reviewing-strings-during-the-cycle">Reviewing strings during the cycle</a></h2>
<p>It’s good to keep an eye on the strings landing during the Firefox for iOS cycle. In fact, if you wait to review strings when the PR is already opened, it’s going to be complicated to get a fix in (until <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1270855">Bug 1270855</a> is resolved).</p>
<p>You should try to periodically check out the strings landing, and try to localize them in your head: how would you translate them? Would you be able to do it without the app? Is the localization comment clear enough?</p>
<p>You might also need to identify the bug that added that string, see if there are screenshots, or ask if the iOS team can provide one. The point below explains how to find that bug.</p>
<h3><a class="header" href="#how-to-find-the-bug-that-introduced-a-string" id="how-to-find-the-bug-that-introduced-a-string">How to find the bug that introduced a string</a></h3>
<p>Let’s consider an example of new strings for Firefox for iOS, with <a href="https://github.com/mozilla-l10n/firefoxios-l10n/pull/19">this past PR</a>.</p>
<p>The ID is <code>NSCameraUsageDescription</code>, the label <code>This lets you take and upload photos</code>
It doesn’t have a localization comment, which is bad.</p>
<p>In fact currently, the only strings that can not have localization comments are strings that are located in <code>InfoPlist.strings</code> and <code>Info.plist</code> - see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1277515">Bug 1277515</a> for more details. Otherwise, strings should always have localization comments.</p>
<p>So you open the main repository page:
https://github.com/mozilla-mobile/firefox-ios</p>
<p>And use the search box at the top, searching for the string ID (or the string):
https://github.com/mozilla-mobile/firefox-ios/search?utf8=%E2%9C%93&amp;q=NSCameraUsageDescription</p>
<p>In this case you find two occurrences. The first one is the most interesting, so you open the file:
https://github.com/mozilla-mobile/firefox-ios/blob/978bf46bb680291c61c5d21b6dc26472388a374f/Client/en.lproj/InfoPlist.strings</p>
<p>Then use the <code>Blame</code> link on top:
https://github.com/mozilla-mobile/firefox-ios/blame/978bf46bb680291c61c5d21b6dc26472388a374f/Client/en.lproj/InfoPlist.strings</p>
<p>On the left, you should (almost always) find the bug reference:
https://bugzilla.mozilla.org/show_bug.cgi?id=1312842</p>
<h2><a class="header" href="#wrapping-up-your-work" id="wrapping-up-your-work">Wrapping up your work</a></h2>
<p>So you’ve reviewed the strings during the cycle, and the PR looks good? Wait! Don’t merge it quite yet.</p>
<p>You will need to announce this on <a href="https://lists.mozilla.org/listinfo/dev-l10n">dev.l10n mailing list</a> as soon as you merge the PR. Prepare your email in advance. Here’s <a href="https://groups.google.com/forum/#!searchin/mozilla.dev.l10n/ios$20v7%7Csort:relevance/mozilla.dev.l10n/oR5u3MdMLgE/952I4eyADAAJ">an example</a> of what it should contain.</p>
<p><a href="https://pontoon.mozilla.org/projects/firefox-for-ios/">Pontoon</a> should get the new strings automatically, but it’s always a good idea to double check just in case.</p>
<h1><a class="header" href="#working-on-mozillaorg" id="working-on-mozillaorg">Working on mozilla.org</a></h1>
<p>Some documentation specific for common tasks on mozilla.org</p>
<ul>
<li><a href="products/mozilla_org/extract_strings.html">Process overview to expose mozilla.org content for localization</a></li>
<li><a href="products/mozilla_org/working_bedrock.html">Working with Bedrock: running it, extracting strings from templates, tips</a>.</li>
<li><a href="products/mozilla_org/../../tools/webdashboards/import_translations.html">Importing translations from existing files</a>.</li>
<li><a href="products/mozilla_org/updating_mozillaorg_production.html">Updating mozilla.org production</a>.</li>
<li><a href="products/mozilla_org/enable_production.html">Enable a new locale on production</a>.</li>
</ul>
<p>For documentation about Webdashboard and Langchecker, see <a href="products/mozilla_org/../../tools/webdashboards/">this page</a>.</p>
<h1><a class="header" href="#process-overview-to-expose-mozillaorg-content-for-localization" id="process-overview-to-expose-mozillaorg-content-for-localization">Process overview to expose mozilla.org content for localization</a></h1>
<p>This document describes the tools and processes involved in converting a mozilla.org template in English to a .lang file containing localizable content and relevant information to help with localization.</p>
<h2><a class="header" href="#this-is-a-brief-overview-of-the-process" id="this-is-a-brief-overview-of-the-process">This is a brief overview of the process</a></h2>
<ul>
<li>In <a href="https://github.com/mozilla/bedrock">Bedrock</a>, when a page is in the final coding review phase in GitHub and content is finalized, an <a href="https://github.com/mozilla/bedrock/pulls?q=is%3Aopen+is%3Apr+label%3AL10N">L10n label</a> is added to the PR, signaling that it is ready for string extraction.</li>
<li>Strings are extracted from the identified templates, generating a temporary .lang file. The new strings are manually added to an existing en-US .lang file, or a brand new file added to the <a href="https://github.com/mozilla-l10n/www.mozilla.org">mozilla.org l10n repository</a>. A pull request is opened to review the en-US initial content for issues or errors.</li>
<li>Another PR is created in the <a href="https://github.com/mozilla-l10n/langchecker/">Langchecker</a> repository. Langchecker is the tool used to keep track of all localizable files in the l10n repositories, and contains a set of scripts used to manage the repository.</li>
<li>After both PRs are reviewed and approved, a script will be run locally to propagate the en-US content into files in other locales. That means both adding a new file, or adding new strings to existing files.</li>
<li>Once merged to the master branch, files will be available on www.mozilla.org repository for localization, and the merge commit will be cherry-picked to <a href="https://github.com/mozilla-l10n/bedrock-l10n">bedrock-l10n</a>, the localization production repository. Within 20 minutes, Pontoon will display the status of the new or updated files for all locales.</li>
<li>In some cases, an email through a mailing list will be sent out to communicate the localization request. At this point, the L10n tag is also removed from Bedrock’s PR.</li>
</ul>
<h2><a class="header" href="#environment" id="environment">Environment</a></h2>
<p>In order to run Langchecker locally, you need a recent version of PHP (ideally 7 and above):</p>
<ul>
<li><a href="https://github.com/mozilla-l10n/langchecker/">Langchecker</a> repository has instructions on how to <a href="https://github.com/mozilla-l10n/langchecker/#installation">install</a> the tool. The <a href="https://github.com/mozilla-l10n/langchecker/wiki">Wiki</a> has detailed informations on all the available scripts.</li>
<li>While Apache is not needed (you can use PHP internal web server), it’s highly recommended.</li>
<li>L10n-drivers use a VMWare virtual machine based on Ubuntu LTS. This VM includes a set of Bash aliases and symbolic links designed to simplify the workflow. You can find the script used to set up the VM <a href="https://github.com/mozilla-l10n/vm_scripts/blob/master/setup_vm/setup_vm.sh">here</a>, and the list of aliases <a href="https://github.com/mozilla-l10n/vm_scripts/blob/master/.bashrc_aliases">here</a>.</li>
</ul>
<h2><a class="header" href="#step-by-step-details-for-the-entire-process" id="step-by-step-details-for-the-entire-process">Step by step details for the entire process</a></h2>
<h3><a class="header" href="#extract-strings-from-a-template-in-bedrock" id="extract-strings-from-a-template-in-bedrock">Extract strings from a template in Bedrock</a></h3>
<p>The process is detailed in <a href="products/mozilla_org/../../products/mozilla_org/working_bedrock.html">this document</a>.</p>
<p>Note: you only use this generated .lang file as a reference. You still need to add comments and reorder strings before exposing them for localization.</p>
<h3><a class="header" href="#prepare-the-en-us-lang-file" id="prepare-the-en-us-lang-file">Prepare the en-US .lang file</a></h3>
<p>It is very important to have a clean, error free .lang file in en-US. Once the file is approved and content is pushed into other locales, if an error is found then, it will take much more effort to correct. If localizers have already started their work, the cleanup is even messier. At that point, it is a fix in one file versus fixes in 100+ files.</p>
<p>Initial review should include checking the file against the page on the testing server and checking against the template. This is to ensure that there are no hard coded strings.</p>
<p>Note: if there is an update to an existing page, it is advised to still generate the .lang file, and copy the new string there instead of copying it from the .html file. This is to make sure, for example, that the syntax used for variable replacements is correct, and remove eventual extra white spaces between words that are not carried over to the .lang file.</p>
<h3><a class="header" href="#add-notes-and-comments-to-the-extracted-file" id="add-notes-and-comments-to-the-extracted-file">Add notes and comments to the extracted file:</a></h3>
<p>Add important information at the top of the file:</p>
<ul>
<li>A Note (<code>## NOTE:</code>) for <a href="https://github.com/mozilla-l10n/www.mozilla.org/blob/f5747193ee5af7e83fafa2cf70a2031dfa3d9773/en-US/firefox/facebookcontainer/index.lang#L2">demo/test URLs</a>.</li>
<li>A Note for test instruction if necessary, for a page that is more dynamic, such as the <a href="https://github.com/mozilla-l10n/www.mozilla.org/blob/f5747193ee5af7e83fafa2cf70a2031dfa3d9773/en-US/firefox/tracking-protection-tour.lang#L8">privacy_protection_tour.lang</a>.</li>
<li>Make sure to add tags, if there are strings <a href="products/mozilla_org/working_bedrock.html#l10n-tags">bound to l10n tags</a>.</li>
</ul>
<p>Proceed to the content of the file. Add a comment to the following type of strings to provide more context:</p>
<ul>
<li>Page title and description. Typically, a page title string should be translated in a short or catchy way.</li>
<li>If the string contains a link, to which <a href="https://github.com/mozilla-l10n/www.mozilla.org/blob/f5747193ee5af7e83fafa2cf70a2031dfa3d9773/en-US/firefox/tracking-protection-tour.lang#L129">URL</a> it points to. This gives context to localizers.</li>
<li>If a string is behind a tag, make sure to add the <a href="https://github.com/mozilla-l10n/langchecker/wiki/.lang-files-format#string-meta-data">tag bindings</a>.</li>
<li>A new string behind a tag makes another string obsolete. Make sure to add <a href="https://github.com/mozilla-l10n/www.mozilla.org/blob/f5747193ee5af7e83fafa2cf70a2031dfa3d9773/en-US/firefox/tracking-protection-tour.lang#L99">an obsolete comment</a> to help localizers prioritize their work, and that old and new strings are next to each other. This will also make removal of old strings easier in further updates.</li>
<li>A comment for an alternative to an expression that may not be culturally relevant, or to a pun that doesn’t translate well.</li>
<li>Check English content for capitalization, hyphenated word to make sure they are consistent with the <a href="https://design.firefox.com/photon/copy/word-list.html">Firefox style guide</a> (macOS vs. MacOS, sign in to vs. sign into).</li>
</ul>
<p>When all is done, create a PR in the www.mozilla.org repo for review. Describe what the PR is for, add references to the Bedrock’s pull requests to add context for the review.</p>
<p>Check for possible <a href="https://l10n.mozilla-community.org/langchecker/?action=errors">errors</a> such as duplicates or unmatched strings before requesting for review. In order to do this, you will need to run Langchecker locally, and make sure that both the l10n repository and Langchecker’s are using the branches you’re working on.</p>
<h3><a class="header" href="#work-with-the-scripts-in-langchecker" id="work-with-the-scripts-in-langchecker">Work with the scripts in Langchecker</a></h3>
<p>Below are some of the common commands and purposes of using Lanchecker.</p>
<p>You use Langchecker for the following purposes:</p>
<ul>
<li><a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/sources.inc.php">app/config/sources.inc.php</a>: modify this file when there is a new or an updated .lang: add file name, define supported locales, deadline and flags.</li>
<li><a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/locales.inc.php">app/config/locales.inc.php</a>: bootstrap a new new locale on Mozilla.org</li>
</ul>
<p>The following commands are used for some common tasks:</p>
<ul>
<li><code>lang_update</code> is to populate new and revised content in the en-US into localized files.</li>
<li><code>mark_active</code> will add an <code>## active ##</code> tag at the beginning of the file after checking that the entire file is translated and no errors are detected. The associate template will be live on production.</li>
<li><code>add_tags</code> tracks the completion of the tagged strings, and add the tag on top of the file when all are translated.</li>
</ul>
<p>For more details, check <a href="products/mozilla_org/../../tools/webdashboards/langchecker.html">here</a>.</p>
<p>This document details the process to <a href="products/mozilla_org/updating_mozillaorg_production.html">update production repo</a>.</p>
<h2><a class="header" href="#pontoon-and-communication" id="pontoon-and-communication">Pontoon and Communication</a></h2>
<p>Within 20 minutes, the content change will show up on <a href="https://pontoon.mozilla.org/projects/mozillaorg/">Pontoon project dashboard</a>. L10n-driver will update project deadline (high level against all other projects) and page level deadline (if applicable) when viewing the entire mozilla.org page status in a given locale.</p>
<p>An email communication about this localization request will be sent out soon after.</p>
<h1><a class="header" href="#working-with-bedrock" id="working-with-bedrock">Working with Bedrock</a></h1>
<ul>
<li><a href="products/mozilla_org/working_bedrock.html#running-bedrock">Running Bedrock</a></li>
<li><a href="products/mozilla_org/working_bedrock.html#extracting-strings-from-a-template">Extracting strings from a template</a></li>
<li><a href="products/mozilla_org/working_bedrock.html#notes-about-templates-and-l10n">Notes about templates and l10n</a>
<ul>
<li><a href="products/mozilla_org/working_bedrock.html#wrapping-strings">Wrapping strings</a></li>
<li><a href="products/mozilla_org/working_bedrock.html#shared-lang-files">Shared .lang files</a></li>
<li><a href="products/mozilla_org/working_bedrock.html#loading-other-lang-files">Loading other .lang files</a></li>
<li><a href="products/mozilla_org/working_bedrock.html#activating-a-template">Activating a template</a></li>
<li><a href="products/mozilla_org/working_bedrock.html#l10n-tags">L10n tags</a></li>
<li><a href="products/mozilla_org/working_bedrock.html#try-a-patch-locally">Try a patch locally</a></li>
<li><a href="products/mozilla_org/working_bedrock.html#identifying-l10n-issues-in-a-patch">Identifying l10n issues in a patch</a></li>
</ul>
</li>
</ul>
<p>This document covers a few tasks and tips regarding Bedrock.</p>
<h2><a class="header" href="#running-bedrock" id="running-bedrock">Running Bedrock</a></h2>
<p>You can install Bedrock by following the instructions available in <a href="https://bedrock.readthedocs.io/en/latest/install.html">this page</a>.</p>
<p>If you’re using the virtual machine described in <a href="products/mozilla_org/../../config/setup_l10ndrivers_vm.html">this document</a>, Bedrock is already installed in <code>~/mozilla/git/bedrock</code>.</p>
<p>Move into the main folder, activate the Virtual environment, and run the server</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/bedrock/
$ source venv/bin/activate
$ ./manage.py runserver
</code></pre>
<p>In a different terminal window run</p>
<pre><code class="language-BASH">$ gulp
</code></pre>
<p>At this point Bedrock will be available at http://localhost:8000</p>
<p>In the virtual machine the locale folder is a symbolic link to the mozilla.org trunk l10n repository.</p>
<p>Don’t forget to exit the virtual environment by running <code>deactivate</code> when you’re finished.</p>
<h2><a class="header" href="#extracting-strings-from-a-template" id="extracting-strings-from-a-template">Extracting strings from a template</a></h2>
<p>The first part is to identify the template (or templates) you need to extract strings from. For example, assuming that you want to extract strings from <code>bedrock/mozorg/templates/mozorg/contribute/signup.html</code>, you would run from Bedrock’s main folder:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/bedrock/
$ source venv/bin/activate
(venv) $ ./manage.py l10n_extract bedrock/mozorg/templates/mozorg/contribute/signup.html
</code></pre>
<p>If the last command returns any error, try reinstalling the requirements with</p>
<pre><code class="language-BASH">$ pip install -r requirements/dev.txt
</code></pre>
<p>At this point a .lang file will be created inside <code>/locale/templates</code> with all the strings extracted. The name of the file depends on several factors: for example the template could include another template that specify a specific .lang file so, instead of having <code>locale/templates/mozorg/contribute/signup.lang</code>, you have <code>locale/templates/mozorg/contribute/index.lang</code>.</p>
<p>The suggestion is to always remove the <code>templates</code> folder before doing an extraction, to make sure you start from a clean situation.</p>
<p>Note that you can also use wildcards in the command, e.g. <code>./manage.py l10n_extract bedrock/mozorg/templates/mozorg/contribute/*.html</code>, but you should try to extract strings only from the template you need.</p>
<p>One final note: you only use this generated .lang file as a reference, you still need to add comments and reorder strings before exposing them for localization.</p>
<h2><a class="header" href="#notes-about-templates-and-l10n" id="notes-about-templates-and-l10n">Notes about templates and l10n</a></h2>
<h3><a class="header" href="#wrapping-strings" id="wrapping-strings">Wrapping strings</a></h3>
<pre><code class="language-DJANGO">&lt;span class=&quot;outline-button more&quot;&gt;{{ _('Start using the Mozilla Stumbler app') }}&lt;/span&gt;
</code></pre>
<p>Localizable strings are wrapped like <code>_('This')</code>. That means you can simply copy and paste the string <code>This</code> instead of performing a full extraction.</p>
<p>More complex strings can be wrapped in <em>trans</em> blocks, e.g.</p>
<pre><code class="language-DJANGO">&lt;p class=&quot;license&quot;&gt;
  {% trans url=url('foundation.licensing.website-content') %}
  Portions of this content are ©1998–{{ current_year }} by individual
  mozilla.org contributors. Content available under
  a &lt;a href=&quot;{{ url }}&quot;&gt;Creative Commons license&lt;/a&gt;.
  {% endtrans %}
&lt;/p&gt;
</code></pre>
<h3><a class="header" href="#shared-lang-files" id="shared-lang-files">Shared .lang files</a></h3>
<p>There are some <a href="https://github.com/mozilla/bedrock/blob/master/bedrock/settings/base.py#L199">shared .lang files</a> that are available across all templates:</p>
<ul>
<li>main.lang</li>
<li>download_button.lang</li>
</ul>
<p>If a string is available in one of these files, it can be safely used by any of the other templates. This is useful, but these files shouldn’t become bigger than necessary.</p>
<h3><a class="header" href="#loading-other-lang-files" id="loading-other-lang-files">Loading other .lang files</a></h3>
<p>The <code>add_lang_files</code> directive is used in templates to specify a different .lang file, or include strings from another .lang file. Example above: normally a template called <code>bedrock/mozorg/templates/mozorg/contribute/signup.html</code> should generate a file called <code>mozorg/contribute/signup.lang</code>, but instead it generates a .lang file called <code>mozorg/contribute/index</code>. Why? Because the template has this directive:</p>
<pre><code class="language-DJANGO">{% add_lang_files &quot;mozorg/contribute/index&quot; %}
</code></pre>
<p>This is particularly important to understand .lang file activation.</p>
<h3><a class="header" href="#activating-a-template" id="activating-a-template">Activating a template</a></h3>
<p>A .lang file is active when it starts with the line <code>## ACTIVE ##</code>.
A file is activated by l10n-drivers when all strings inside this file are translated, and the page can be displayed in production. Example: https://www.mozilla.org/firefox/new uses <code>firefox/new.lang</code> for strings:</p>
<ul>
<li>https://www.mozilla.org/en-US/firefox/new will always work, since it’s en-US.</li>
<li>https://www.mozilla.org/fr/firefox/new will work if <code>fr/firefox/new.lang</code> is activated. If it’s not, it will redirect to en-US (or any other active locale before en-US in the accept_languages header).</li>
<li>https://www-dev.allizom.org/fr/firefox/new will always work, because files are always active on the dev server.</li>
</ul>
<p>If you’re running Bedrock locally, you need to change <code>bedrock/settings/local.py</code> to modify the behaviour:</p>
<ul>
<li><code>DEV = True</code> means that the server is set as DEV, and all locales will be enabled.</li>
<li><code>DEV = False</code> means that the server is set as PROD, and specific pages will work only if a locale has the file activated.</li>
</ul>
<p>One important fact to keep in mind: if you add a new .lang file with the <code>add_lang_files</code> directive, the activation status will be inherited. Always double check with the production settings.</p>
<p>It’s possible to activate l10n files by using the <a href="https://github.com/mozilla-l10n/langchecker/wiki/CLI-scripts-syntax#mark_active">mark_active script</a> available in Langchecker. It will activate only locales that are completely localized and don’t have any errors.</p>
<h3><a class="header" href="#l10n-tags" id="l10n-tags">L10n tags</a></h3>
<p>Bedrock supports l10n tags through the <code>l10n_has_tag</code> function. For example:</p>
<pre><code class="language-DJANGO">{% if l10n_has_tag('sync_device_note') %}
  {{ _('Learn more about bookmarks') }}
{% else %}
  {{ _('Learn more') }}
{% endif %}
</code></pre>
<p>l10n tags allow to add a new string in the template and to push it to production without waiting for localization to happen: if the l10n .lang file has this tag, the template will use the new string <code>Learn more about bookmarks</code>, otherwise if will fallback to the previous version <code>Learn more</code>.</p>
<p>The tag appears as <code>sync_device_note</code> in the code, but it will appear as <code>## sync_device_note ##</code> at the beginning of the .lang file. Using underscores is preferable to dashes for tag names.</p>
<p>It’s possible to add tags to l10n files by using the <a href="https://github.com/mozilla-l10n/langchecker/wiki/CLI-scripts-syntax#add_tags">add tags script</a> available in Langchecker. It will add tags only if the file translated all strings associated to it.</p>
<p>All tags are enabled by default on a DEV server.</p>
<p>For more information about .lang files, for example how to bind a string to a tag, see <a href="https://github.com/mozilla-l10n/langchecker/wiki/.lang-files-format">the wiki page</a>.</p>
<h3><a class="header" href="#try-a-patch-locally" id="try-a-patch-locally">Try a patch locally</a></h3>
<p>Let’s assume you want to test a pull request locally, for example to extract strings. The URL for this pull request is https://github.com/mozilla/bedrock/pull/4100. By adding <code>.patch</code> to the URL you get a patch for this PR: https://github.com/mozilla/bedrock/pull/4100.patch.</p>
<p>You can download this patch and apply it locally.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/bedrock/
$ source venv/bin/activate
(venv) $ wget https://github.com/mozilla/bedrock/pull/4101.patch
(venv) $ git apply 4101.patch
(venv) $ gulp
</code></pre>
<p>Remember that Bedrock on the VM-l10n uses a link to the actual trunk repository, so make sure to delete any test you make. The <code>templates</code> folder will be automatically ignored.</p>
<h3><a class="header" href="#identifying-l10n-issues-in-a-patch" id="identifying-l10n-issues-in-a-patch">Identifying l10n issues in a patch</a></h3>
<p>The most common issue is that strings are not <em>wrapped</em>, so they’re not exposed by the extraction process or translated, even if the string is available in the .lang file. To identify them you need to run the patch locally with a modified .lang file, for example adding asterisks or other characters to the English string. There might be need for a tool to automatically create such a file.</p>
<p>How to read a patch and identify the string? One possible approach is to load the patch (add .patch to the PR URL) in a text editor, and use this regular expression to search for new/changed lines with wrapped strings: <code>^\+.*_\(.*\)</code>. The regular expression can be read as: search for a line starting with <code>+</code> and including a <code>_(…)</code> structure. Note that a change might be generated by a change in padding, so the block moves but the string is always the same.</p>
<p>Normally PRs are tagged as L10N to indicate that the PR has some impact on l10n (new strings), either by devs or l10n-drivers.</p>
<h1><a class="header" href="#importing-translations-from-existing-files" id="importing-translations-from-existing-files">Importing translations from existing files</a></h1>
<p>Sometimes it’s useful to import strings from existing files. A typical example is when an existing page is replaced by a new template, with some strings in common.</p>
<p>First of all, always make sure that your repositories are up to date. If you’re using the l10n-drivers VM, simply run <code>gitup</code>.</p>
<p>Let’s consider a simple example: the string <code>Internet Health</code> is currently available in <code>main.lang</code>. A new page is created (<code>mozorg/internet-health.lang</code>), and it includes that string in the template. Since <code>main.lang</code> is a shared file it would be possible to avoid adding the string to the new template, but in this case you want to make sure that localizers can use an alternative translation.</p>
<p>To start check that all locales have the untranslated string available in <code>mozorg/internet-health.lang</code></p>
<pre><code class="language-BASH">$ lang_update mozorg/internet-health.lang 0 all
</code></pre>
<p>At this point you need to work on langchecker, editing your local copy of <a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/scripts/lang_update#L105">app/scripts/lang_update</a>.</p>
<pre><code class="language-BASH">$ atom ~/mozilla/git/app/scripts/lang_update
</code></pre>
<p>Search for the variable <code>$import_files</code> and add the file from which you want to import strings (<code>main.lang</code> in this case). Make also sure that <code>$import_website</code> is set to <code>0</code> (identifier for <code>mozilla.org</code>).</p>
<pre><code class="language-PHP">$import_files = ['main.lang'];
$import_website = 0;
</code></pre>
<p>This will make the next run of <code>lang_update</code> import existing strings from <code>main.lang</code>. For this reason, always run <code>lang_update</code> only against the file you wish to update.</p>
<p>Now you can run the update, propagating updates to all locales:</p>
<pre><code class="language-BASH">$ lang_update mozorg/internet-health.lang 0 all
</code></pre>
<p>Note that <code>$import_files</code> is an array, which means you could have more source files, e.g.</p>
<pre><code class="language-PHP">$import_files = ['main.lang', 'mozorg/home/index.lang'];
</code></pre>
<p>The order is relevant: files are checked in the order they’re available in the array, the first matching translation is kept.</p>
<p><strong>Important</strong>: make sure to not commit this change to langchecker. You can either ignore it and it will be removed the next time you run <code>gitup</code>, or reset the repository with <code>git reset --hard</code>.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/langchecker
$ git reset --hard
</code></pre>
<p>Check your local installation of langchecker for errors by visiting http://localhost/langchecker/?action=errors</p>
<p>If there are no errors, check the status of this repository with <code>git status</code>, and the content of the updated files for at least one locale (with <code>git diff LOCALE</code>), to confirm that strings were imported correctly. Then push to your branch.</p>
<p>It’s a good idea to send localizers an email to explain why the string will be already translated when they start working on the file.</p>
<h1><a class="header" href="#updating-mozillaorg-production" id="updating-mozillaorg-production">Updating mozilla.org production</a></h1>
<p>For mozilla.org there are two separate repositories:</p>
<ul>
<li><a href="https://github.com/mozilla-l10n/www.mozilla.org">www.mozilla.org</a> is used for <strong>trunk</strong> localization, it’s accessible to localizers and tools and is used to localize the <a href="https://www-dev.allizom.org/it/">DEV server</a>.</li>
<li><a href="https://github.com/mozilla-l10n/bedrock-l10n">bedrock-l10n</a> is used for <strong>production</strong> localization of www.mozilla.org</li>
</ul>
<p>l10n-drivers are in charge of manually moving files from trunk to prod after doing a technical review. On Linux <a href="http://meldmerge.org/">meld</a> is a great tool for this task: you can open both repositories, move files between them and visualize the changes between the two versions.</p>
<pre><code class="language-BASH">$ meld path/to/trunk_repository path/to/production_repository
</code></pre>
<p>If you’re using the virtual machine described in <a href="products/mozilla_org/../../config/setup_l10ndrivers_vm.html">this document</a>, there are a few shortcuts:</p>
<ul>
<li><code>trunkst</code> will move into the trunk folder, and check the status (<code>git status</code>).</li>
<li><code>prodst</code> will do the same for production, but will also fetch updates from trunk in case you want to cherry-pick changesets (see next section).</li>
<li><code>mozmeld</code> will open meld with trunk on the left, and production on the right. Use alt+up/down to move to the next change, use alt+right to move from trunk to production. <strong>Don’t</strong> move the README file, since they’re different between the two repositories.</li>
<li><code>gitup</code> will update all Git repositories, discard pending changing, and checkout master branch.</li>
</ul>
<h2><a class="header" href="#cherry-picking-changes" id="cherry-picking-changes">Cherry-picking changes</a></h2>
<p>Sometimes moving files manually between the two repositories in not viable, for example when updating a file in all locales. In this case it’s possible to cherry-pick a commit from trunk into production.</p>
<p>When you commit a change to the trunk repository you will get a SHA for the changes</p>
<pre><code class="language-BASH">$ trunkst
$ git commit -a -m &quot;Update translation&quot;
[master 31c3920] Update translation
 1 file changed, 1 insertion(+)
$ git push
</code></pre>
<p>In this case the changeset is <em>31c3920</em>. From the production repository:</p>
<pre><code class="language-BASH">$ prodst
$ git cherry-pick 31c3920
[master 380ebdc] Update translation
 Date: Mon May 2 17:31:06 2016 +0200
 1 file changed, 1 insertion(+)
$ git push
</code></pre>
<h2><a class="header" href="#doing-a-manual-push-to-production" id="doing-a-manual-push-to-production">Doing a manual push to production</a></h2>
<p>If you want to do this all manually using Git, you can follow these steps:</p>
<ol>
<li>Make sure the master branches for your clones of both the trunk and production repositories are up to date.</li>
<li>In your local clone of the <strong>production</strong> repo, add a remote that points to the <strong>trunk</strong> repo using <code>git remote add trunk https://github.com/%GITUHB-USERNAME%/www.mozilla.org.git</code>.</li>
<li>Run <code>git checkout master</code>.</li>
<li>Run <code>git fetch trunk</code>.</li>
<li>Now <code>git cherry-pick</code> the commit from the <strong>trunk</strong> repo, referencing the Git hash of the commit you wish to include (e.g. <code>git cherry-pick 31c3920</code>).</li>
<li>Push the changes to master using <code>git push upstream master</code> (assuming <code>upstream</code> is your remote that points to <code>https://github.com/mozilla-l10n/bedrock-l10n.git</code>).</li>
</ol>
<h2><a class="header" href="#guidelines" id="guidelines">Guidelines</a></h2>
<p>There are some principles to keep in mind when updating the production repository:</p>
<ol>
<li>Before moving any file, check the <a href="https://l10n.mozilla-community.org/langchecker/?action=errors">Errors view</a>, possibly on your local installation.</li>
<li>Check the diff for each file before moving it to production, to see if there are any errors.</li>
<li>In case of any doubts always check the page on your local installation of Bedrock or the <a href="https://www-dev.allizom.org/it/">DEV server</a>, especially for new locales.</li>
</ol>
<h1><a class="header" href="#enable-a-new-locale-on-production-for-mozillaorg" id="enable-a-new-locale-on-production-for-mozillaorg">Enable a new locale on production for mozilla.org</a></h1>
<p>All locales available in the <a href="https://github.com/mozilla-l10n/www.mozilla.org">www.mozilla.org GitHub repository</a> are automatically enabled on the <a href="https://www-dev.allizom.org/">dev server</a>. In order to enable a language for <a href="https://www.allizom.org/">stage</a> and <a href="https://www.mozilla.org/">production</a>, it needs to be added to Bedrock’s settings.</p>
<p>Before doing that, make sure that the locale has reached a good level of completion, and test the main pages on the dev server.</p>
<p>First, <a href="https://bugzilla.mozilla.org/enter_bug.cgi?product=www.mozilla.org&amp;component=L10N">file a bug</a> to track this change. Bug number will be needed for the commit message later. Consider for example <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1338759">this bug</a>, to add Nepali to production.</p>
<h2><a class="header" href="#create-a-new-branch" id="create-a-new-branch">Create a new branch</a></h2>
<p>A clone of your fork of Bedrock is already available in the <a href="products/mozilla_org/../../config/setup_l10ndrivers_vm.html">virtual machine</a>, so run <code>gitup</code> to make sure everything is up to date. Then move to Bedrock’s folder, and create a new branch, for example using the bug number as reference.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/bedrock
$ git branch bug1338759
$ git checkout bug1338759
</code></pre>
<p>If you see a message referencing legal-docs like this one, it means that there’s an unwanted change in the legal-docs repository:</p>
<pre><code class="language-BASH">$ git checkout bug1338759
M	vendor-local/src/legal-docs
Switched to branch 'bug1338759'
</code></pre>
<p>You can verify it by running <code>git status</code></p>
<pre><code class="language-BASH">$ git status
On branch bug1338759
Changes not staged for commit:
  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)

	modified:   vendor-local/src/legal-docs (new commits)

no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)
</code></pre>
<p><strong>IMPORTANT</strong>: you need to get rid of this change before doing any work. If you don’t, your pull request will be rejected.</p>
<p>In order to remove this change, run the following commands</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/bedrock/vendor-local/src/legal-docs/
$ git checkout master
$ git pull
$ cd ~/mozilla/git/bedrock
</code></pre>
<p>Make sure you’re back to the <code>bedrock</code> folder in your virtual machine, and check that there are no pending changes with <code>git status</code>.</p>
<h2><a class="header" href="#edit-bedrocks-settings" id="edit-bedrocks-settings">Edit Bedrock’s settings</a></h2>
<p>The file to modify is <code>bedrock/base/settings.py</code>.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/bedrock
$ atom bedrock/settings/base.py
</code></pre>
<p>Search for <code>PROD_LANGUAGES</code>.</p>
<pre><code class="language-PYTHON">PROD_LANGUAGES = ('ach', 'af', 'an', 'ar', 'as', 'ast', 'az', 'bg',
                  'bn-BD', 'bn-IN', 'br', 'bs', 'ca', 'cak', 'cs',
                  'cy', 'da', 'de', 'dsb', 'el', 'en-GB', 'en-US',
                  'en-ZA', 'eo', 'es-AR', 'es-CL', 'es-ES', 'es-MX', 'et',
                  'eu', 'fa', 'ff', 'fi', 'fr', 'fy-NL', 'ga-IE', 'gd',
                  'gl', 'gn', 'gu-IN', 'he', 'hi-IN', 'hr', 'hsb',
                  'hu', 'hy-AM', 'id', 'is', 'it', 'ja', 'ja-JP-mac',
                  'ka', 'kab', 'kk', 'km', 'kn', 'ko', 'lij', 'lt',
                  'ltg', 'lv', 'mai', 'mk', 'ml', 'mr', 'ms', 'my', 'nb-NO',
                  'nl', 'nn-NO', 'oc', 'or', 'pa-IN', 'pl', 'pt-BR', 'pt-PT',
                  'rm', 'ro', 'ru', 'si', 'sk', 'sl', 'son', 'sq',
                  'sr', 'sv-SE', 'ta', 'te', 'th', 'tr', 'uk', 'ur',
                  'uz', 'vi', 'xh', 'zh-CN', 'zh-TW', 'zu')
</code></pre>
<p>You need to add your locale to the list, making sure to:</p>
<ul>
<li>Respect the alphabetical order.</li>
<li>Use one space after commas, no comma after the last element.</li>
<li>Maximum 80 characters per line.</li>
<li>Enclose the locale code in single quotes.</li>
</ul>
<p>In Atom there’s a vertical line to display where the 80 characters limit is. If your line is too long, like in this case, you can use a trick to make sure the text fits within the maximum length. First add the new locale code in the correct position, don’t worry about the line length.</p>
<pre><code class="language-PYTHON">PROD_LANGUAGES = ('ach', 'af', 'an', 'ar', 'as', 'ast', 'az', 'bg',
                  'bn-BD', 'bn-IN', 'br', 'bs', 'ca', 'cak', 'cs',
                  'cy', 'da', 'de', 'dsb', 'el', 'en-GB', 'en-US',
                  'en-ZA', 'eo', 'es-AR', 'es-CL', 'es-ES', 'es-MX', 'et',
                  'eu', 'fa', 'ff', 'fi', 'fr', 'fy-NL', 'ga-IE', 'gd',
                  'gl', 'gn', 'gu-IN', 'he', 'hi-IN', 'hr', 'hsb',
                  'hu', 'hy-AM', 'id', 'is', 'it', 'ja', 'ja-JP-mac',
                  'ka', 'kab', 'kk', 'km', 'kn', 'ko', 'lij', 'lt',
                  'ltg', 'lv', 'mai', 'mk', 'ml', 'mr', 'ms', 'my', 'nb-NO', 'ne-NP',
                  'nl', 'nn-NO', 'oc', 'or', 'pa-IN', 'pl', 'pt-BR', 'pt-PT',
                  'rm', 'ro', 'ru', 'si', 'sk', 'sl', 'son', 'sq',
                  'sr', 'sv-SE', 'ta', 'te', 'th', 'tr', 'uk', 'ur',
                  'uz', 'vi', 'xh', 'zh-CN', 'zh-TW', 'zu')
</code></pre>
<p>Add an empty line two lines above and below the line you need to fix (more if needed, i.e. all lines are at near the maximum length).</p>
<pre><code class="language-PYTHON">PROD_LANGUAGES = ('ach', 'af', 'an', 'ar', 'as', 'ast', 'az', 'bg',
                  'bn-BD', 'bn-IN', 'br', 'bs', 'ca', 'cak', 'cs',
                  'cy', 'da', 'de', 'dsb', 'el', 'en-GB', 'en-US',
                  'en-ZA', 'eo', 'es-AR', 'es-CL', 'es-ES', 'es-MX', 'et',
                  'eu', 'fa', 'ff', 'fi', 'fr', 'fy-NL', 'ga-IE', 'gd',
                  'gl', 'gn', 'gu-IN', 'he', 'hi-IN', 'hr', 'hsb',
                  'hu', 'hy-AM', 'id', 'is', 'it', 'ja', 'ja-JP-mac',

                  'ka', 'kab', 'kk', 'km', 'kn', 'ko', 'lij', 'lt',
                  'ltg', 'lv', 'mai', 'mk', 'ml', 'mr', 'ms', 'my', 'nb-NO', 'ne-NP',
                  'nl', 'nn-NO', 'oc', 'or', 'pa-IN', 'pl', 'pt-BR', 'pt-PT',

                  'rm', 'ro', 'ru', 'si', 'sk', 'sl', 'son', 'sq',
                  'sr', 'sv-SE', 'ta', 'te', 'th', 'tr', 'uk', 'ur',
                  'uz', 'vi', 'xh', 'zh-CN', 'zh-TW', 'zu')
</code></pre>
<p>Position the cursor in the block including the line you need to fix, and select <em>Edit -&gt; Reflow Selection</em>. With this command lines are reorganized to fit the 80 characters limit, and this will be the result:</p>
<pre><code class="language-PYTHON">PROD_LANGUAGES = ('ach', 'af', 'an', 'ar', 'as', 'ast', 'az', 'bg',
                  'bn-BD', 'bn-IN', 'br', 'bs', 'ca', 'cak', 'cs',
                  'cy', 'da', 'de', 'dsb', 'el', 'en-GB', 'en-US',
                  'en-ZA', 'eo', 'es-AR', 'es-CL', 'es-ES', 'es-MX', 'et',
                  'eu', 'fa', 'ff', 'fi', 'fr', 'fy-NL', 'ga-IE', 'gd',
                  'gl', 'gn', 'gu-IN', 'he', 'hi-IN', 'hr', 'hsb',
                  'hu', 'hy-AM', 'id', 'is', 'it', 'ja', 'ja-JP-mac',

                  'ka', 'kab', 'kk', 'km', 'kn', 'ko', 'lij', 'lt', 'ltg', 'lv',
                  'mai', 'mk', 'ml', 'mr', 'ms', 'my', 'nb-NO', 'ne-NP', 'nl',
                  'nn-NO', 'oc', 'or', 'pa-IN', 'pl', 'pt-BR', 'pt-PT',

                  'rm', 'ro', 'ru', 'si', 'sk', 'sl', 'son', 'sq',
                  'sr', 'sv-SE', 'ta', 'te', 'th', 'tr', 'uk', 'ur',
                  'uz', 'vi', 'xh', 'zh-CN', 'zh-TW', 'zu')
</code></pre>
<p>You can then <strong>remove the empty lines</strong> and save the file. These empty lines are needed to avoid affecting more content than needed, in particular the first line. Without them you would end up with this:</p>
<pre><code class="language-PYTHON">PROD_LANGUAGES = ('ach', 'af', 'an', 'ar', 'as', 'ast', 'az', 'bg', 'bn-BD',
'bn-IN', 'br', 'bs', 'ca', 'cak', 'cs', 'cy', 'da', 'de', 'dsb', 'el', 'en-GB',
'en-US', 'en-ZA', 'eo', 'es-AR', 'es-CL', 'es-ES', 'es-MX', 'et', 'eu', 'fa',
'ff', 'fi', 'fr', 'fy-NL', 'ga-IE', 'gd', 'gl', 'gn', 'gu-IN', 'he', 'hi-IN',
'hr', 'hsb', 'hu', 'hy-AM', 'id', 'is', 'it', 'ja', 'ja-JP-mac', 'ka', 'kab',
'kk', 'km', 'kn', 'ko', 'lij', 'lt', 'ltg', 'lv', 'mai', 'mk', 'ml', 'mr', 'ms',
'my', 'nb-NO', 'ne-NP', 'nl', 'nn-NO', 'oc', 'or', 'pa-IN', 'pl', 'pt-BR',
'pt-PT', 'rm', 'ro', 'ru', 'si', 'sk', 'sl', 'son', 'sq', 'sr', 'sv-SE', 'ta',
'te', 'th', 'tr', 'uk', 'ur', 'uz', 'vi', 'xh', 'zh-CN', 'zh-TW', 'zu')
</code></pre>
<p>Verify that there are no other changed files, and the diff looks good with <code>git diff</code>. Since you reorganized lines to fit the 80 characters limit, there will be more than one line changed.</p>
<pre><code class="language-BASH">$ git status
On branch bug1338759
Changes not staged for commit:
  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)

	modified:   bedrock/settings/base.py

no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)
$ git diff
</code></pre>
<p>If you notice <strong>trailing whitespaces</strong> after a line, you need to remove them. First make sure that Atom is set to trim whitespaces:</p>
<ul>
<li>Open <em>Edit-&gt;Preferences</em>.</li>
<li>Select the <em>Packages</em> tab and search for <em>whitespace</em>.</li>
<li>Click on the package <em>whitespace</em> in <em>Core Packages</em>.</li>
<li>Check <em>Remove Trailing Whitespace</em>. If it’s already selected, uncheck and check it again (this should fix configuration problems).</li>
</ul>
<p>Then open and save your file again.</p>
<h2><a class="header" href="#commit-and-open-a-pull-request" id="commit-and-open-a-pull-request">Commit and open a pull request</a></h2>
<p>You’re ready to commit your change. Remember to references your bug with &quot;Fix&quot;, this will automatically close the bug when the change lands.</p>
<pre><code class="language-BASH">$ git commit -a -m &quot;Fix Bug 1338759 - Enable ne-NP on production for mozilla.org&quot;
$ git push origin bug1338759
</code></pre>
<p>Then visit <a href="https://github.com/mozilla/bedrock">Bedrock on GitHub</a> and use the <em>Compare &amp; pull request</em> button. Don’t forget to double check the diff:</p>
<ul>
<li>Only one file should be included: <code>bedrock/settings/base.py</code>).</li>
<li>No trailing whitespaces added.</li>
<li>New locale should be there.</li>
</ul>
<h1><a class="header" href="#set-up-searchplugins-2" id="set-up-searchplugins-2">Set up searchplugins</a></h1>
<h2><a class="header" href="#cloningupdating-the-locales-repository" id="cloningupdating-the-locales-repository">Cloning/Updating the locale’s repository</a></h2>
<p>You will be working on l10n-central for a new locale, and you need this locale’s Mercurial repository on your computer.</p>
<p>l10n repositories for Firefox live in https://hg.mozilla.org/l10n-central/. In this case let’s assume that l10n clones will be stored in <code>~/mozilla/mercurial/l10n</code>, with a subfolder for each locale and each branch. So, if the locale is <code>ur</code>, the repository will be stored in <code>~/mozilla/mercurial/l10n/ur/l10n-central</code>.</p>
<pre><code class="language-BASH">$ mkdir -p ~/mozilla/mercurial/l10n/ur
$ cd ~/mozilla/mercurial/l10n/ur
</code></pre>
<p>The first command makes sure that the path for <code>ur</code> exists, the second moves into the folder.</p>
<p>If you don’t have a clone yet, you need to create it.</p>
<pre><code class="language-BASH">$ hg clone ssh://hg.mozilla.org/l10n-central/ur l10n-central
</code></pre>
<p>A couple of details to note in this <code>hg clone</code> command:</p>
<ul>
<li>The command uses <code>ssh://</code>, which means you need an active (and <a href="products/searchplugins/../../tools/mercurial/setting_mercurial_environment.html">properly configured</a>) SSH access to the repository.</li>
<li>It doesn’t use the default folder for the local clone, but specify a <code>l10n-central</code> directory. Without that it would create a <code>ur</code> folder, making it impossible to distinguish different branches.</li>
</ul>
<p>At this point there’s a clone stored in <code>~/mozilla/mercurial/l10n/ur/l10n-central</code> (remember that you already moved to <code>~/mozilla/mercurial/l10n/ur</code> before running <code>hg clone</code>).</p>
<p>If you already have a clone on your computer, always make sure to update it before doing anything:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/l10n/ur/l10n-central
$ hg pull -r default -u
</code></pre>
<h2><a class="header" href="#setting-up-files-for-mozilla-unified" id="setting-up-files-for-mozilla-unified">Setting up files for mozilla-unified</a></h2>
<p>First of all make sure that your environment is <a href="products/searchplugins/../../tools/mercurial/setting_mercurial_environment.html">correctly set up</a>, and update your local mozilla-unified clone to be in sync with central:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/mozilla-unified
$ hg pull -u
$ hg up central
</code></pre>
<h3><a class="header" href="#listjson" id="listjson">list.json</a></h3>
<p>The list of searchplugins is stored in JSON format:</p>
<ul>
<li>For Firefox desktop in <a href="https://hg.mozilla.org/mozilla-central/file/default/browser/components/search/searchplugins/list.json">browser/components/search/searchplugins/list.json</a>.</li>
<li>For Firefox for Android in <a href="https://hg.mozilla.org/mozilla-central/file/default/mobile/android/components/search/searchplugins/list.json">mobile/android/components/search/searchplugins/list.json</a>.</li>
</ul>
<p>The default search engine is defined as <code>searchDefault</code> in a <code>default</code> key, together with a list of searchplugins and their <code>searchOrder</code>:</p>
<pre><code class="language-JSON">&quot;default&quot;: {
  &quot;searchDefault&quot;: &quot;Google&quot;,
  &quot;searchOrder&quot;: [&quot;Google&quot;, &quot;Bing&quot;],
  &quot;visibleDefaultEngines&quot;: [
    &quot;google&quot;, &quot;amazondotcom&quot;, &quot;bing&quot;, &quot;ddg&quot;, &quot;ebay&quot;, &quot;twitter&quot;, &quot;wikipedia&quot;
  ]
}
</code></pre>
<p>Unlike the list in <code>visibleDefaultEngines</code>, <code>searchDefault</code> and <code>searchOrder</code> require the searchplugin name, defined as <code>ShortName</code> in the corresponding XML file. For example, in <code>google.xml</code>:</p>
<pre><code class="language-XML">&lt;SearchPlugin xmlns=&quot;http://www.mozilla.org/2006/browser/search/&quot;&gt;
&lt;ShortName&gt;Google&lt;/ShortName&gt;
&lt;Description&gt;Google Search&lt;/Description&gt;
</code></pre>
<p>If a locale is missing from <code>list.json</code>, or doesn’t provide any of these values, the <code>default</code> key is used as a fallback. Since <code>Google</code> is the default for most locales, this system allows to avoid defining the same <code>searchDefault</code> for each locale. The same is valid for <code>searchOrder</code>, using <code>Google</code> and <code>Bing</code> as first two searchplugins for most locales.</p>
<p>The basic structure for each locale is fairly simple. Assuming the locale code is <code>ur</code>, it will have a <code>default</code> key, with <code>visibleDefaultEngines</code>.</p>
<pre><code class="language-JSON">&quot;ur&quot;: {
  &quot;default&quot;: {
    &quot;visibleDefaultEngines&quot;: [
      &quot;google&quot;, &quot;bing&quot;, &quot;amazon-in&quot;, &quot;ddg&quot;, &quot;wikipedia-ur&quot;
    ]
  }
},
</code></pre>
<p>Notes about the list:</p>
<ul>
<li>If the searchplugin XML file is called <code>google.xml</code>, the item to add to <code>visibleDefaultEngines</code> will be only <code>google</code>, without the extension but also <strong>respecting the case</strong>. Only <code>searchDefault</code> and <code>searchOrder</code> use the <em>ShortName</em> of the searchplugin.</li>
<li>Order should reflect the actual order of searchplugins: if Google is default, and Bing 2nd, the list should start with <code>&quot;google&quot;, &quot;bing&quot;</code>. The remaining searchplugins can be in alphabetical order.</li>
<li>If a locale is missing from <code>list.json</code>, it will fall back to <code>default</code>, defined at the beginning of the file.</li>
</ul>
<p>A locale can also have regional overrides, for example:</p>
<pre><code class="language-JSON">&quot;be&quot;: {
  &quot;default&quot;: {
    &quot;visibleDefaultEngines&quot;: [
      &quot;yandex-by&quot;, &quot;google&quot;, &quot;ddg&quot;, &quot;wikipedia-be&quot;, &quot;wikipedia-be-tarask&quot;
    ]
  },
  &quot;BY&quot;: {
    &quot;searchDefault&quot;: &quot;Яндекс&quot;
  },
  &quot;KZ&quot;: {
    &quot;searchDefault&quot;: &quot;Яндекс&quot;
  },
  &quot;RU&quot;: {
    &quot;searchDefault&quot;: &quot;Яндекс&quot;
  },
  &quot;TR&quot;: {
    &quot;searchDefault&quot;: &quot;Яндекс&quot;
  }
}
</code></pre>
<p>This defines a different default engine for Belarussian in 4 countries, each one indicated by its <a href="https://www.iso.org/obp/ui/#search">country code</a>.</p>
<p>A locale can also override the default search order:</p>
<pre><code class="language-JSON">&quot;cs&quot;: {
  &quot;default&quot;: {
    &quot;searchOrder&quot;: [&quot;Google&quot;, &quot;Seznam&quot;],
    &quot;visibleDefaultEngines&quot;: [
      &quot;google&quot;, &quot;seznam-cz&quot;, &quot;ddg&quot;, &quot;heureka-cz&quot;, &quot;mapy-cz&quot;, &quot;wikipedia-cz&quot;
    ]
  }
}
</code></pre>
<p>To make sure you’re not creating a broken JSON, you can test the final content with an online validator like <a href="https://jsonlint.com/">jsonlint</a>.</p>
<h3><a class="header" href="#xml-files" id="xml-files">XML files</a></h3>
<p>Searchplugins are stored:</p>
<ul>
<li>For Firefox desktop in <a href="https://hg.mozilla.org/mozilla-central/file/default/browser/components/search/searchplugins">browser/locales/searchplugins</a>.</li>
<li>For Firefox for Android in <a href="https://hg.mozilla.org/mozilla-central/file/default/mobile/android/components/search/searchplugins">mobile/android/components/search/searchplugins</a>.</li>
</ul>
<p>For other searchplugins you will need to create the .xml file yourself, with some general rules to keep in mind:</p>
<ul>
<li>Always have a MPL2 license header at the beginning.</li>
<li>On desktop icons are currently square 16px and 32px, both embedded in a multilayer <code>.ico</code> file.</li>
<li>On Android icons are currently 96px transparent PNG images, with rounded corners (radius 6px), preferably with a colored background since the UI is white, and a white background wouldn’t show the rounded corners.</li>
<li>Check if other locales already ship the same searchplugin, and copy their XML file to use as a base. If the searchplugin is brand new, it needs to be approved by BD and it will take some time, so it might be worth starting with a shorter list of searchplugins, and consider the new one in a follow-up bug. Icons will also be provided by the search provider after approval.</li>
</ul>
<h4><a class="header" href="#icons" id="icons">Icons</a></h4>
<p>These are some useful tips to deal with new icons for searchplugins:</p>
<ul>
<li>If the image is a PNG (for Android), make sure to optimize it before encoding it to base64 (for example using <a href="https://tinypng.com/">tinypng.com</a>).</li>
<li>You can create an <code>.ico</code> file starting from separate 16px and 32px PNG icons. Create a 32px image in <a href="https://www.gimp.org/">Gimp</a>, add each icon to a separate layer, and export the file as <code>.ico</code> (make sure to select the option to compress each of the layers).</li>
<li>You can use online services (like <a href="http://freeonlinetools24.com/base64-image">this one</a>) to quickly encode an image to base64.</li>
<li>You can test the image in the browser (copy and paste the data URI in the address bar). You will still have to download it to check that everything looks good, since only one image will be displayed for multilayer <code>.ico</code> files, and transparency is quite confusing in Firefox preview.</li>
</ul>
<h4><a class="header" href="#wikipedia" id="wikipedia">Wikipedia</a></h4>
<p><strong>URLs:</strong> If you copy the .xml file from another locale (en-US is always the best choice for Wikipedia), make sure to update all URLs. If the URL for English starts with <code>en.wikipedia.</code>, for <code>ur</code> it should start with <code>ur.wikipedia.</code> (check if the domain actually exists).</p>
<p><strong>Search template:</strong> There’s one special URL to keep in mind, in English it’s https://en.wikipedia.org/wiki/Special:Search
It’s particular because the last part changes according to the locale, just try replacing the domain first from <code>en.</code> to <code>ur.</code>: https://ur.wikipedia.org/wiki/Special:Search
You’ll notice that it redirects to <code>https://ur.wikipedia.org/wiki/خاص:تلاش</code> and that’s the URL you need to use in the .xml file.</p>
<p>You can’t copy the full URL from the address bar since it will encode UTF-8 characters, e.g. <code>https://ur.wikipedia.org/wiki/%D8%AE%D8%A7%D8%B5:%D8%AA%D9%84%D8%A7%D8%B4</code>, so it’s faster to just copy only part of the URL and fixing the rest by hand.</p>
<p><strong>Description:</strong> You will need localizers to provide the translation for <code>Wikipedia, the Free Encyclopedia</code>.</p>
<p><strong>shortName:</strong> In the .xml file there’s an attribute called <code>shortName</code>. For English is:</p>
<pre><code class="language-XML">&lt;ShortName&gt;Wikipedia&lt;/ShortName&gt;
</code></pre>
<p>When you visit a page that exposes a searchplugin, like Wikipedia, Firefox checks if you already have one installed with the same <code>shortName</code>: if you don’t, the UI will suggest you to install it by displaying a small green + sign on the magnifying glass icon in the search bar. To avoid this, the searchplugin shipping in Firefox needs to match the shortName of the searchplugin available from Wikipedia. Visit https://gn.wikipedia.org and press <code>CTRL+U</code> to view the source code of the page. At the beginning you will find a line looking like this:</p>
<pre><code class="language-HTML">&lt;link rel=&quot;search&quot; type=&quot;application/opensearchdescription+xml&quot; href=&quot;/w/opensearch_desc.php&quot; title=&quot;ویکیپیڈیا (ur)&quot;/&gt;
</code></pre>
<p>The shortName to use in your .xml file is <code>ویکیپیڈیا (ur)</code>. Copying and pasting RTL languages is particularly tricky.</p>
<h2><a class="header" href="#creating-a-patch-for-review" id="creating-a-patch-for-review">Creating a patch for review</a></h2>
<p>Once files are ready, follow the instructions available in <a href="products/searchplugins/../../tools/mercurial/creating_mercurial_patch.html">this document</a> to create a patch, submit it for review, and land it.</p>
<h2><a class="header" href="#setting-up-files-for-locales-repository" id="setting-up-files-for-locales-repository">Setting up files for locale’s repository</a></h2>
<h3><a class="header" href="#regionproperties" id="regionproperties">region.properties</a></h3>
<p>region.properties is stored in <code>/browser/chrome/browser-region</code> for Firefox desktop (<code>/mobile/chrome</code> for Firefox for Android), and it contains information about protocol handlers. You can use these files as a base:</p>
<ul>
<li>For Firefox desktop <a href="products/searchplugins/files/desktop_region.properties">this region.properties model</a>.</li>
<li>For Firefox for Android <a href="products/searchplugins/files/mobile_region.properties">this region.properties model</a>.</li>
</ul>
<p>A few tips:</p>
<ul>
<li>If you’re updating an existing file, make sure to not reset the <code>gecko.handlerService.defaultHandlersVersion</code> key. If, on the other hand, you’re adding a new handler, you will have to increment the existing numeric value.</li>
</ul>
<h2><a class="header" href="#creating-a-patch-for-review-locale-repository" id="creating-a-patch-for-review-locale-repository">Creating a patch for review (locale repository)</a></h2>
<p>Once files are ready, follow the instructions available in <a href="products/searchplugins/../../tools/mercurial/creating_mercurial_patch.html">this document</a> to create a patch, submit it for review, and land it.</p>
<h1><a class="header" href="#working-with-pontoon" id="working-with-pontoon">Working with Pontoon</a></h1>
<p>Some documentation specific for common and advanced tasks on Pontoon</p>
<ul>
<li><a href="tools/pontoon/adding_new_project.html">Adding a new project</a>.</li>
<li><a href="tools/pontoon/adding_new_short_term_project.html">Adding a new short-term project</a>.</li>
<li><a href="tools/pontoon/adding_new_locale.html">Adding a new locale</a>.</li>
<li><a href="tools/pontoon/sending_notifications.html">Sending notifications</a>.</li>
<li><a href="tools/pontoon/renaming_a_file.html">Renaming a localization file</a>.</li>
</ul>
<h1><a class="header" href="#adding-a-new-project-on-pontoon" id="adding-a-new-project-on-pontoon">Adding a new project on Pontoon</a></h1>
<h2><a class="header" href="#verify-that-the-project-is-properly-localizable" id="verify-that-the-project-is-properly-localizable">Verify that the project is properly localizable</a></h2>
<p>Project owners can follow the <a href="https://mozilla-pontoon.readthedocs.io/en/latest/user/localizing-your-projects.html">guidelines</a> available in Pontoon Documentation to properly structure files inside the repository. Some things to check:</p>
<ul>
<li>Files should be in a folder like <code>locale(s)/ab-CD/somefile.extension</code> and be in one of the supported formats (.ftl, .lang, .properties, .po, .xliff).</li>
<li>User <strong>mozilla-pontoon</strong> needs write access to the repository.</li>
</ul>
<p>It’s important to also check the files for localization issues before exposing them to localizers: unclear strings, lack of localization comments, missing plural forms are some of the things to check.</p>
<h2><a class="header" href="#create-the-project-in-pontoon-stage-instance" id="create-the-project-in-pontoon-stage-instance">Create the project in Pontoon STAGE instance</a></h2>
<p>First you want to test that everything works using Pontoon staging server.</p>
<p>Access Pontoon’s <a href="https://mozilla-pontoon-staging.herokuapp.com/admin/">admin console</a> on the <strong>stage server</strong> and click <strong>ADD NEW PROJECT</strong>.</p>
<ul>
<li>Name: name of the repository (it will be displayed in Pontoon’s project selector).</li>
<li>Slug: used in URLs, will be generated automatically based on the repository’s name.</li>
<li>Locales:
<ul>
<li>Select at least one locale. To make things faster it’s possible to copy supported locales from an existing project.</li>
<li>The <em>Read-only</em> column can be used to add languages in read-only mode. In this way, their translations will be available to other languages in the LOCALES tab when translating, but it won’t be possible to change or submit translations directly in Pontoon.</li>
<li>You can uncheck the <code>Locales can opt-in</code> checkbox to prevent localizers from requesting this specific project.</li>
</ul>
</li>
<li>Repositories: select the type of repository and URL. Make sure to use SSH to allow write access. For example, if the repository is <code>https://github.com/meandavejustice/min-vid</code>, the URL should be <code>git@github.com:meandavejustice/min-vid.git</code>. You can use the <em>Clone or download</em> button in the repository page on GitHub, making sure that <em>Clone with SSH</em> is selected.</li>
<li>Leave the <code>Branch</code> field empty, unless developers asked to commit translations in a branch instead of <em>master</em>.</li>
<li>Download prefix: a URL prefix for downloading localized files. For GitHub repositories, select any localized file on GitHub, click <code>Raw</code> and replace locale code and the following bits in the URL with <code>{locale_code}</code>. For example, if the link is <code>https://raw.githubusercontent.com/bwinton/TabCenter-l10n/master/locales/en-US/addon.properties</code>, the field should be set to <code>https://github.com/bwinton/TabCenter-l10n/blob/master/locales/{locale_code}</code>.</li>
<li>Public Repository Website: displayed on dashboards. E.g. <code>https://github.com/meandavejustice/min-vid</code>. Pontoon will try to prefill it after you enter Repository URL.</li>
<li>Project info: provide some information about the project to help localizers with context or testing instructions. HTML is supported, so you can add external links. For example:</li>
</ul>
<pre><code class="language-HTML">Localization for the &lt;a href=&quot;https://testpilot.firefox.com/experiments/min-vid&quot;&gt;Min Vid add-on&lt;/a&gt;.
</code></pre>
<ul>
<li>Internal admin notes: use them e.g. for developer contacts and information that other PMs will find useful when covering for you.</li>
<li>Deadline: if available, enter project deadline in the YYYY-MM-DD format.</li>
<li>Priority: select priority level from one of the 5 levels available (Lowest, Low, Normal, High, Highest).</li>
<li>Contact: select the L10n driver in charge of the project, probably yourself.</li>
<li>External Resources: provide links to external resources like l10n preview environment. You need to enter the name and the URL for each resource. You can also pick one of the predefined names: Development site, Production site, Development build, Production build, Screenshots, Language pack.</li>
</ul>
<p>Click <strong>SAVE PROJECT</strong> at the bottom of the page, then click <strong>SYNC</strong> to run a test sync. In the <a href="https://mozilla-pontoon-staging.herokuapp.com/sync/log/">Sync log</a> you should be able to see if it succeeded or failed.</p>
<h3><a class="header" href="#tags" id="tags">Tags</a></h3>
<p>Tags can be used in a project to logically group resources, assigning them a priority. To enable tags for a project, check <em>Tags enabled</em> and save the project.</p>
<p>For each tag, it’s possible to define:</p>
<ul>
<li><em>Name</em>: it will be displayed in project (e.g. <code>/projects/firefox/tags/</code>) and localization dashboards (e.g. <code>/it/firefox/tags/</code>), but also in search filters.</li>
<li><em>Slug</em>: used in URLs for tag dashboards, e.g. <code>/projects/firefox/tags/devtools/</code>.</li>
<li><em>Priority</em>: like for a project, it’s possible to select a priority level from one of the 5 levels available (Lowest, Low, Normal, High, Highest).</li>
</ul>
<p><img src="tools/pontoon/../../assets/images/pontoon/manage_tags_resources.png" alt="Tags resources" /></p>
<p>Once you’ve created a new tag, you need to save the project in order to be able to manage the resources associated to the tag itself, using the button highlighted in red.</p>
<p>A few tips on using this section:</p>
<ul>
<li>Use the selector on the right (highlighted in orange) to switch between <em>Linked</em> resources, i.e. resources already associated to the tag, and <em>Unlinked</em> resources.</li>
<li>It’s possible to use wildcards in the search box, e.g. <code>devtools/*</code> or <code>*/client/*</code>.</li>
<li>The first checkbox on the left (highlighted in green) allows to select all displayed items. Note: if the search returns multiple pages, only those currently displayed are selected and will be linked if <em>Link resources</em> is clicked.</li>
<li>There is no need to save the project when adding resources to a tag: linked resources are stored in the database as soon as they’re added with the <em>Link resources</em> button.</li>
</ul>
<p>Considering the amount of information required to properly set up tags in a project, it’s recommended to set them up directly in production, and use stage only for specific testing.</p>
<h3><a class="header" href="#resource-deadline" id="resource-deadline">Resource deadline</a></h3>
<p>Like for a project, it’s possible to set a deadline for a Resource.</p>
<p>Go to the <a href="https://pontoon.mozilla.org/a/base/resource/">resource section</a> of the admin panel, then type the name of your project (e.g. <code>engagement</code>) and hit <code>Enter</code>. All the resources for your project should appear. Click on the one you want to edit, set the deadline in the <code>Deadline</code> field, then click <code>SAVE</code>.</p>
<h2><a class="header" href="#create-the-project-in-pontoon-prod-instance" id="create-the-project-in-pontoon-prod-instance">Create the project in Pontoon PROD instance</a></h2>
<p>At this point you need to repeat the same steps on the <strong>production server</strong>.</p>
<p>Access Pontoon’s <a href="https://pontoon.mozilla.org/admin/">admin console</a>, add the same information you used on the staging server and make sure to select all supported locales for this project.</p>
<p>The new project will appear in the <a href="https://pontoon.mozilla.org/projects/">public list of Projects</a> only after the next sync cycle.</p>
<h1><a class="header" href="#adding-a-new-short-term-project-on-pontoon" id="adding-a-new-short-term-project-on-pontoon">Adding a new short-term project on Pontoon</a></h1>
<p>Short-term projects are things like newsletters, marketing campaigns, surveys… They do not have a repository, and data is instead stored only in Pontoon’s database.</p>
<p>The process to create a short-term project is very similar to that of a regular one.</p>
<h2><a class="header" href="#create-the-project-in-pontoon-stage-instance-1" id="create-the-project-in-pontoon-stage-instance-1">Create the project in Pontoon STAGE instance</a></h2>
<p>First you want to test that everything works using Pontoon staging server.</p>
<p>Access Pontoon’s <a href="https://mozilla-pontoon-staging.herokuapp.com/admin/">admin console</a> on the <strong>stage server</strong> and click <strong>ADD NEW PROJECT</strong>.</p>
<ul>
<li>Name: name of the project (it will be displayed in Pontoon’s project selector).</li>
<li>Slug: used in URLs, will be generated automatically based on the repository’s name.</li>
<li>Locales:
<ul>
<li>Select at least one locale. To make things faster it’s possible to copy supported locales from an existing project.</li>
<li>You can uncheck the <code>Locales can opt-in</code> checkbox to prevent localizers from requesting this specific project.</li>
</ul>
</li>
<li>Data Source: select <code>Database</code> in the list of options. This will hide the <em>Repositories</em> section and show a <em>Strings</em> section instead.</li>
<li>Strings: you can enter the initial set of strings here. Strings must be separated by new lines. If you leave this empty, you’ll be able to enter strings as a batch again after creating the project. Strings must be in <code>en-US</code>, and they will become the entities on that project. A resource named <code>database</code> will automatically be created.</li>
<li>For every other option, please refer to the <a href="tools/pontoon/adding_new_project.html">new project documentation</a>.</li>
</ul>
<p>Click <strong>SAVE PROJECT</strong> at the bottom of the page, and you’re done!</p>
<h2><a class="header" href="#create-the-project-in-pontoon-prod-instance-1" id="create-the-project-in-pontoon-prod-instance-1">Create the project in Pontoon PROD instance</a></h2>
<p>At this point you need to repeat the same steps on the <strong>production server</strong>.</p>
<p>Access Pontoon’s <a href="https://pontoon.mozilla.org/admin/">admin console</a>, add the same information you used on the staging server and make sure to select all supported locales for this project.</p>
<p>The new project will immediately appear in the <a href="https://pontoon.mozilla.org/projects/">public list of Projects</a>.</p>
<h2><a class="header" href="#managing-strings" id="managing-strings">Managing strings</a></h2>
<p>After you have created your project, you will be able to manage its source strings. On the admin project page (that you can find from the <a href="https://pontoon.mozilla.org/admin/">admin console</a>), under the <em>Strings</em> section, you will find two links. The one called <strong>MANAGE STRINGS</strong> will lead you to a page where all strings are listed. There you can edit the string content, edit the string comment, add new strings (use the <strong>NEW STRING</strong> button) or remove existing strings (use the trashbin icon under the comment input). Once you’re done editing, click the <strong>SAVE STRINGS</strong> button to save your changes.</p>
<h2><a class="header" href="#downloading-translations" id="downloading-translations">Downloading translations</a></h2>
<p>On the project’s admin page and on the Manage Strings page, you’ll find a <strong>DOWNLOAD STRINGS</strong> link. Clicking it will download a CSV file that contains all the translations in all enabled locales. The file format looks as follow:</p>
<pre><code class="language-CSV">Source, fr, de
Hello, Salut, Hallo
World, Monde, Welt
</code></pre>
<h1><a class="header" href="#adding-a-new-locale-on-pontoon" id="adding-a-new-locale-on-pontoon">Adding a new locale on Pontoon</a></h1>
<h2><a class="header" href="#verify-if-the-locale-is-already-available" id="verify-if-the-locale-is-already-available">Verify if the locale is already available</a></h2>
<p>Access Django’s admin interface at <code>https://pontoon.mozilla.org/a/</code> (note that this is not the usual admin interface), then click <code>Locales</code>. In the next page search for the locale you want to add (safer to search for the locale code).</p>
<p>Before moving forward:</p>
<ul>
<li>If the locale is going to work on mozilla.org, files need to be set up in <a href="tools/pontoon/../webdashboards/">tools</a> and GitHub before enabling the project in Pontoon.</li>
<li>If the locale is going to work on Firefox or Firefox for Android, and an <a href="https://hg.mozilla.org/l10n-central/">official Mercurial repository</a> is not available, a repository needs to be created in the <a href="https://bitbucket.org/mozilla-l10n/">mozilla-l10n organization on BitBucket</a>. Currently :pike, :mathjazz and :flod have permissions to create such repository.</li>
</ul>
<h2><a class="header" href="#add-the-new-locale" id="add-the-new-locale">Add the new locale</a></h2>
<p>If the locale you need is not available, click the <strong>ADD LOCALE+</strong> button in the top right corner. For this example, let’s consider that the task is to add Amharic (am).</p>
<p>You will need to complete the following fields in the next page.</p>
<h3><a class="header" href="#code" id="code">Code</a></h3>
<p>It’s the locale code, in this case <code>am</code>.</p>
<h3><a class="header" href="#google-translate-code" id="google-translate-code">Google Translate code</a></h3>
<p>Google Translate maintains a list of supported locales in its own format. Choose one that matches the locale from <a href="https://translate.google.com/intl/en/about/languages/">a list of supported locales</a> or leave it blank to disable support for Google Translate for this locale.</p>
<h3><a class="header" href="#ms-translator-code" id="ms-translator-code">MS translator code</a></h3>
<p>Microsoft Translator maintains a list of supported locales in its own format. Choose one that matches the locale from <a href="https://msdn.microsoft.com/en-us/library/hh456380.aspx">a list of supported locales</a> or leave it blank to disable support for Microsoft Translator for this locale.</p>
<h3><a class="header" href="#ms-terminology-code" id="ms-terminology-code">MS terminology code</a></h3>
<p>Microsoft Terminology maintains a list of supported locales in its own format. Choose one that matches the locale from a list provided below the field or leave it blank to disable support for Microsoft Terminology for this locale.</p>
<h3><a class="header" href="#name" id="name">Name</a></h3>
<p>It’s the language name, in this case <code>Amharic</code>.</p>
<h3><a class="header" href="#plural-rule" id="plural-rule">Plural rule</a></h3>
<p>It’s the GetText plural rule. This <a href="http://docs.translatehouse.org/projects/localization-guide/en/latest/l10n/pluralforms.html">document</a> has plural rules for several languages. For example, for Amharic it would be:</p>
<pre><code>nplurals=2; plural=(n &gt; 1);
</code></pre>
<p>As explained in the note below the field, you only need to put the last part in the field:</p>
<pre><code>(n &gt; 1)
</code></pre>
<h3><a class="header" href="#cldr-plurals" id="cldr-plurals">CLDR Plurals</a></h3>
<p>You need to find the locale on <a href="http://www.unicode.org/cldr/charts/dev/supplemental/language_plural_rules.html">CLDR</a>. For Amharic, there are only two <strong>cardinal</strong> plural forms listed: one, other.</p>
<p>The mapping is:</p>
<pre><code>0 -&gt; zero
1 -&gt; one
2 -&gt; two
3 -&gt; few
4 -&gt; many
5 -&gt; other
</code></pre>
<p>For Amharic you will need to set the field as <code>1,5</code>, separating the available forms with a comma (no spaces).</p>
<p>Irish (ga-IE), for example, has all of them except for 0, so it will be <code>1,2,3,4,5</code>.</p>
<h3><a class="header" href="#script" id="script">Script</a></h3>
<p>The script used by this locale. Find it in <a href="http://www.unicode.org/cldr/charts/latest/supplemental/languages_and_scripts.html">CLDR Languages and Scripts</a>.</p>
<h3><a class="header" href="#direction" id="direction">Direction</a></h3>
<p>Writing direction of the script. Set to <code>right-to-left</code> if <code>rtl</code> value for the locale script is set to <code>YES</code> in <a href="https://github.com/unicode-cldr/cldr-core/blob/master/scriptMetadata.json">CLDR scriptMetadata.json</a>.</p>
<h3><a class="header" href="#population" id="population">Population</a></h3>
<p>This represents the number of native speakers. There are two ways to get this information from CLDR.</p>
<h4><a class="header" href="#using-a-script" id="using-a-script">Using a script</a></h4>
<p>Python needs to be available on the method to use this system: save <a href="https://raw.githubusercontent.com/mozilla-l10n/documentation/master/scripts/cldr_population.py">this file</a> on your computer as <code>cldr_population.py</code> and run it as <code>python cldr_population.py LOCALE_CODE</code>.</p>
<p>For example, this is the output of the script when checking data for <code>sl</code>:</p>
<pre><code>$ python scripts/cldr_population.py sl

Adding HU: 4937 (0.05% of 9874780)
Adding IT: 105412 (0.17% of 62007500)
Adding SI: 1720886 (87% of 1978030)
Adding AT: 32233 (0.37% of 8711770)
--------
Territories: AT, HU, IT, SI
Population: 1863468
--------
</code></pre>
<h4><a class="header" href="#manual-process" id="manual-process">Manual process</a></h4>
<p>Find the locale code in <a href="https://github.com/unicode-cldr/cldr-core/blob/master/supplemental/territoryInfo.json">CLDR territoryInfo.json</a> and multiply its <code>_populationPercent</code> with the territory <code>_population</code>. Repeat if multiple occurrences of locale code exist and sum products.</p>
<p>At this point click <strong>SAVE</strong> in the bottom right corner to save and create the new locale. Then, from the <a href="https://pontoon.mozilla.org/admin/">standard admin interface</a>, enable at least one “non system project” (i.e. not <code>Tutorial</code> or <code>Pontoon Intro</code>) and wait until Pontoon syncs for the locale dashboard to work. You can then check if the locale’s page, as well as the new project, are available - in this case at https://pontoon.mozilla.org/am/</p>
<h1><a class="header" href="#sending-notifications-in-pontoon" id="sending-notifications-in-pontoon">Sending notifications in Pontoon</a></h1>
<p>Pontoon allows you to send in-app notifications to contributors of a specific project. To do so, go to your project dashboard and select the <a href="https://pontoon.mozilla.org/projects/pontoon-intro/notifications/">Notifications</a> tab.</p>
<h2><a class="header" href="#choose-recipient-teams" id="choose-recipient-teams">Choose recipient teams</a></h2>
<p>First you need to select project teams to send the notification to. You can select them manually or by using one of the available shortcuts:</p>
<ul>
<li><strong>All:</strong> all teams translating the project.</li>
<li><strong>Complete:</strong> teams with all strings translated in the project.</li>
<li><strong>Incomplete:</strong> teams that have untranslated strings in the project.</li>
</ul>
<p>All project contributors from selected teams will receive the notification.</p>
<p>You need to select at least one team.</p>
<h3><a class="header" href="#enter-notification-message" id="enter-notification-message">Enter notification message</a></h3>
<p>Next, enter the message you’d like to send. You can use HTML tags. Try to be concise and use HTML wisely.</p>
<h3><a class="header" href="#send" id="send">Send</a></h3>
<p>To send the notification, simply click the <strong>Send</strong> button and wait for the confirmation message to appear. It might take a moment. Once notifications are sent, you’ll be redirected to the Sent notifications panel.</p>
<h1><a class="header" href="#renaming-a-localization-file-in-a-project-without-losing-data" id="renaming-a-localization-file-in-a-project-without-losing-data">Renaming a localization file in a project without losing data</a></h1>
<p>In some cases, project owners will want to rename a file for clarity, or for technical reasons. If it’s only done in the VCS repository, the file will be imported again and you will lose attribution, pending suggestions and history. Since this is a special case, we can work around this and rename the file in Pontoon while keeping existing data (translations, suggestions, attribution, history). The process is not complicated, but it has to be highly coordinated.</p>
<h2><a class="header" href="#get-a-pull-request-ready" id="get-a-pull-request-ready">Get a Pull Request ready</a></h2>
<p>Either you or the project owners will get a Pull Request ready that renames the file for all locales. Using a script is recommended as you will need to generate the patch not too long before the next steps to avoid conflicts.</p>
<h2><a class="header" href="#rename-the-resource-in-pontoon-admin-panel" id="rename-the-resource-in-pontoon-admin-panel">Rename the resource in Pontoon admin panel</a></h2>
<p>Wait for the current Pontoon sync cycle to end, and make sure you are already logged into Pontoon admin, then merge the Pull Request.</p>
<p>As soon as the Pull Request is merged, go to the <a href="https://pontoon.mozilla.org/a/base/resource/">resource section</a> of the admin panel, then type the name of your project (e.g. <code>thimble</code>) and hit <code>Enter</code>. All the resources for your project should appear. Click on the one you want to rename, and in the <code>path</code> field, for instance rename <code>messages.properties</code> into <code>server.properties</code> then click <code>SAVE</code>.</p>
<p>It is crucial to do this step <strong>before</strong> the next sync cycle, otherwise the process won’t be effective.</p>
<p>After the next sync, open the file for one of the locales, you should be able to see all the existing data.</p>
<h1><a class="header" href="#webdashboards" id="webdashboards">Webdashboards</a></h1>
<h2><a class="header" href="#structure" id="structure">Structure</a></h2>
<p>There are four interdependent elements in the current webdashboard system.</p>
<h3><a class="header" href="#webdashboard" id="webdashboard">Webdashboard</a></h3>
<p><a href="https://l10n.mozilla-community.org/webdashboard/">Webdashboard</a> is the main dashboard used by localizers. It contains information about files with missing strings, deadlines, and more. Data is also available via RSS, with information about missing strings and deadlines.</p>
<p>Webdashboard in itself doesn’t generate any data, it just displays information provided by Langchecker and Webstatus in JSON format.</p>
<h3><a class="header" href="#langchecker" id="langchecker">Langchecker</a></h3>
<p><a href="tools/webdashboards/langchecker.html">Langchecker</a> is used to analyze all projects using .lang files as data sources. It also stores all configuration information needed to manage these repositories: which projects are supported, which files are in each project, which locales are supported for each project or file, metadata like critical status or deadlines.</p>
<p>Langchecker’s scripts are used to propagate changes to all .lang files, or add news ones, in l10n repositories. It also provides an API to retrieve translations, and information about coverage, i.e how many locales translated a specific string or a page, and what percentage of the l10n population that represents.</p>
<h3><a class="header" href="#webstatus" id="webstatus">Webstatus</a></h3>
<p><a href="https://l10n.mozilla-community.org/webstatus/">Webstatus</a> is used to analyze external projects, currently supporting the following formats: <code>.po</code> (Gettext), <code>.properties</code>, <code>.xliff</code>, and <code>.ftl</code> (l20n). It also provides an <a href="https://github.com/mozilla-l10n/webstatus/#available-urls">API</a> to get list of locales (supported, complete), in JSON or TXT format, for a specific product.</p>
<p>This diagram describes the relation between each of the components, including relation with external entities.</p>
<p><a href="tools/webdashboards/../../assets/images/webdashboards/webdashboards.png"><img src="tools/webdashboards/../../assets/images/webdashboards/webdashboards.png" alt="Webdashboards diagram" style="width: 600px; margin: 0 auto; display: block;"/></a></p>
<h2><a class="header" href="#installation" id="installation">Installation</a></h2>
<p>See the <em><a href="tools/webdashboards/index.html#useful-links">Useful Links</a></em> at the end of the document for links to the relevant GitHub code repositories. Follow the instructions provided in each README for system requirements and instructions.</p>
<p>Note that the instances on the l10n community server of all products use a GitHub’s webhook to update code automatically every time the repository is updated.</p>
<h2><a class="header" href="#tools" id="tools">Tools</a></h2>
<p>For detailed information check the specific pages for each project:</p>
<ul>
<li><a href="tools/webdashboards/langchecker.html">Langchecker</a>.</li>
<li><a href="tools/webdashboards/webdashboard.html">Webdashboard</a>.</li>
</ul>
<p>These are detailed instructions for the most common tasks:</p>
<ul>
<li><a href="tools/webdashboards/add_locales.html">Add locales to an existing file</a>.</li>
<li><a href="tools/webdashboards/update_existing_file.html">Update an existing file</a>.</li>
<li><a href="tools/webdashboards/add_new_file.html">Add a new file to an existing project</a>.</li>
<li><a href="tools/webdashboards/bootstrap_new_locale.html">Bootstrap a new locale</a>.</li>
<li><a href="tools/webdashboards/remove_obsolete_files.html">Remove obsolete files</a>.</li>
</ul>
<p>For documentation specific to mozilla.org, see <a href="tools/webdashboards/../../products/mozilla_org/">this page</a>.</p>
<h2><a class="header" href="#contribution-guidelines" id="contribution-guidelines">Contribution Guidelines</a></h2>
<p>Always work on forks of the main repository and open pull requests if you’re going to update code. Automated tests are run with Travis on each pull request to check for syntax and functional errors.</p>
<h2><a class="header" href="#useful-links" id="useful-links">Useful Links</a></h2>
<h3><a class="header" href="#mozillaorg" id="mozillaorg">Mozilla.org</a></h3>
<ul>
<li>Code repository (codename bedrock): https://github.com/mozilla/bedrock</li>
<li>Trunk localization: https://github.com/mozilla-l10n/www.mozilla.org</li>
<li>Production localization: https://github.com/mozilla-l10n/bedrock-l10n</li>
</ul>
<h3><a class="header" href="#webdashboard-1" id="webdashboard-1">Webdashboard</a></h3>
<ul>
<li>Production instance: https://l10n.mozilla-community.org/webdashboard/</li>
<li>Code: https://github.com/mozilla-l10n/webdashboard/</li>
</ul>
<h3><a class="header" href="#langchecker-1" id="langchecker-1">Langchecker</a></h3>
<ul>
<li>Production instance:https://l10n.mozilla-community.org/langchecker/</li>
<li>Code: https://github.com/mozilla-l10n/langchecker/</li>
</ul>
<h3><a class="header" href="#webstatus-1" id="webstatus-1">Webstatus</a></h3>
<ul>
<li>Production instance: https://l10n.mozilla-community.org/webstatus/</li>
<li>Code: https://github.com/mozilla-l10n/webstatus</li>
</ul>
<h1><a class="header" href="#langchecker-2" id="langchecker-2">Langchecker</a></h1>
<p>Langchecker is the main repository to update when adding or updating files. There are four different configuration files:</p>
<ul>
<li><a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/locales.inc.php">app/config/locales.inc.php</a>: it contains several lists of locales, like locales supported in mozilla.org, locales only working in Fennec, etc. These lists are then used in the main configuration file to determine which locales are supported for each file. Normally you would need to update this file only when bootstrapping new languages.</li>
<li><a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/store_locales.inc.php">app/config/store_locales.inc.php</a>: this file is generated automatically from external data and tracks locales supported in online stores (Play Store, App Store).</li>
<li><a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/websites.inc.php">app/config/websites.inc.php</a>: it contains the configuration for websites (projects) supported in Langchecker.</li>
<li><a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/sources.inc.php">app/config/sources.inc.php</a>: it contains the configuration for all files supported in Langchecker.</li>
</ul>
<p>Langchecker also includes several command line scripts to manage day-to-day operations on supported repositories. For example:</p>
<ul>
<li><a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/scripts/lang_update">app/scripts/lang_update</a>: reads the original en-US file, adds missing strings to requested files, reformat localized .lang files. It can also be used to import existing translations from another .lang file.</li>
<li><a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/scripts/mark_active">app/scripts/mark_active</a>: mark complete files (all strings translated, no errors) as active.</li>
<li><a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/scripts/add_tags">app/scripts/add_tags</a>: add l10n tags to a file. Some strings in a file can be bound to a tag, allowing to display them in production for mozilla.org only when they’re localized. This script examines if all the strings associated to a specific tag are localized, and adds tags to localized files.</li>
</ul>
<p><a href="https://github.com/mozilla-l10n/langchecker/wiki">Langchecker's wiki</a> has a full list of the available views, API calls, and command line scripts.</p>
<h2><a class="header" href="#sources-structure" id="sources-structure">Sources Structure</a></h2>
<p>Each project is internally called website, and it’s identified by a numeric index. These are the projects currently supported.</p>
<table><thead><tr><th>ID</th><th>Codename</th><th>Description</th></tr></thead><tbody>
<tr><td>0</td><td>www.mozilla.org</td><td>Used to track all files for www.mozilla.org</td></tr>
<tr><td>6</td><td>engagement</td><td>Used for Engagement material, typically snippets.</td></tr>
</tbody></table>
<p>Let’s consider a simple project like Engagement. This is how its definition looks like in the main <code>$sites</code> variable.</p>
<pre><code class="language-PHP">6 =&gt; [
    'engagement',
    $repositories['engagement']['local_path'],
    '',
    $engagement_locales,
    $engagement_lang,
    'en-US', // source locale
    $repositories['engagement']['public_path'],
    1,
    'lang',
    'engagement',
    ['tags'],
],
</code></pre>
<p>The structure of each item is:</p>
<ol>
<li>Name (used when displaying the website).</li>
<li>Path to local repository.</li>
<li>Folder containing locale files.</li>
<li>Array of supported locale.</li>
<li>Array of supported files with all associated data.</li>
<li>Reference locale code.</li>
<li>URL to public repo (used to create links to files).</li>
<li>Default priority, used as fallback when files don't specify one.</li>
<li>Type of files (<code>lang</code>, <code>raw</code>).</li>
<li>Project name on Pontoon (used for edit links).</li>
<li>Array of excluded error checks (<code>tags</code>).</li>
</ol>
<p>For each website there is a list of supported locales, but each file might only use a subset of this list.</p>
<p>For this project, the list of supported files is stored in <code>$engagement_lang</code>.</p>
<pre><code class="language-PHP">$engagement_lang = [
    'ads/ios_android_apr2016.lang' =&gt; [
        'supported_locales' =&gt; ['de', 'es-ES', 'fr', 'pl'],
    ],
    'ads/ios_android_feb2017.lang' =&gt; [
        'deadline'          =&gt; '2017-02-02',
        'supported_locales' =&gt; ['zh-HK', 'zh-TW'],
    ],
    ...
</code></pre>
<p>Flags commonly used are:</p>
<ul>
<li><strong>obsolete</strong>: the file won’t be displayed in webdashboard at all, and its strings won’t be counted in stats. It’s usually used to mark a file that will be completely deleted later but needs to remain in the repository.</li>
<li><strong>opt-in</strong>: the file was requested only for some locales, but others can decide to <em>opt-in</em> and request the page for translation through Bugzilla.</li>
</ul>
<p>For more details on the structure of this file, check the [add_new_file.md](documentation to track new files).</p>
<h1><a class="header" href="#webdashboard-2" id="webdashboard-2">Webdashboard</a></h1>
<p>Webdashboard, getting its data from Langchecker, has only one configuration file, <a href="https://github.com/mozilla-l10n/webdashboard/blob/master/app/data/project.php">app/data/project.php</a>, that is used to create special project views (e.g. <a href="https://l10n.mozilla-community.org/webdashboard/?project=fall2015">Fall 2015</a>).</p>
<p>The list of supported locales is taken directly from Langchecker.</p>
<h1><a class="header" href="#bootstrap-a-new-locale" id="bootstrap-a-new-locale">Bootstrap a new locale</a></h1>
<h2><a class="header" href="#langchecker-3" id="langchecker-3">Langchecker</a></h2>
<p>The first thing you need to do is to add the new locale code to the <code>$mozilla</code> array in <a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/locales.inc.php">app/config/locales.php</a>. Note that all lists of locales are in alphabetical order.</p>
<p>If this new locale is going to localize only Fennec, you need to add it also to the <code>$fennec_locales</code> array. If it’s only working on mozilla.org, add it to <code>$mozorg_locales</code>. In this way desktop specific pages won’t be exposed for this language.</p>
<p>Example: let’s say you need to add the <code>ab-CD</code> locale. This is how the <code>$mozilla</code> array begins:</p>
<pre><code class="language-PHP">$mozilla = [
    'ach', 'af', 'an', 'ar', 'as', 'ast', 'az', 'be', 'bg',
    'bm', 'bn-BD', 'bn-IN', 'br', 'brx', 'bs', 'ca', 'cak',
</code></pre>
<p>And how it becomes after adding the new locale:</p>
<pre><code class="language-PHP">$mozilla = [
    'ab-CD', 'ach', 'af', 'an', 'ar', 'as', 'ast', 'az', 'be', 'bg',
    'bm', 'bn-BD', 'bn-IN', 'br', 'brx', 'bs', 'ca', 'cak',
</code></pre>
<h2><a class="header" href="#add-files-to-l10n-repositories-mozillaorg" id="add-files-to-l10n-repositories-mozillaorg">Add files to l10n repositories (mozilla.org)</a></h2>
<p>At this point you need to add the files to <code>www.mozilla.org</code> by using the <code>lang_update</code> script.</p>
<p>Run the following commands:</p>
<pre><code class="language-BASH">$ lang_update all 0 ab-CD
</code></pre>
<p>This will add <strong>all</strong> missing files to mozilla.org (ID: 0) for the <strong>ab-CD</strong> locale (you could also run it with the <strong>all</strong> parameter, but it might introduce changes not relevant for this task).</p>
<p>Move to the l10n repository for mozilla.org, check the status and commit (don’t forget to add the new folder). <code>trunkst</code> is available as a shortcut to move in the folder and run <code>git status</code>.</p>
<pre><code class="language-BASH">$ trunkst
On branch master
Your branch is up-to-date with 'origin/master'.
Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)

	ab-CD/

nothing added to commit but untracked files present (use &quot;git add&quot; to track)

$ git add ab-CD

$ git commit -m &quot;Bootstrap locale ab-CD on mozilla.org&quot;

$ git push
</code></pre>
<h1><a class="header" href="#add-locales-to-an-existing-file" id="add-locales-to-an-existing-file">Add locales to an existing file</a></h1>
<p>Example task: add <code>sv-SE</code> to the list of supported locales for <code>foundation/index.lang</code>.</p>
<h2><a class="header" href="#updating-langchecker-sources" id="updating-langchecker-sources">Updating Langchecker sources</a></h2>
<p>First you need to search for the file that you want to update in <a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/sources.inc.php">app/config/sources.inc.php</a>.</p>
<p>Always remember to <strong>work on a fork</strong> of the main repository, and <strong>create a branch</strong> in your local clone. Assuming the langchecker installation is in <code>~/mozilla/git/langchecker</code>, and that the branch name you want to create is <code>TESTBRANCH</code>, the commands to use would be:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/langchecker
$ git branch TESTBRANCH
$ git checkout TESTBRANCH
</code></pre>
<p>At this point you’re ready to update the configuration file.</p>
<pre><code class="language-PHP">'foundation/index.lang' =&gt; [
    'flags' =&gt; [
        'opt-in' =&gt; ['all'],
    ],
    'supported_locales' =&gt; [
        'de', 'es-ES', 'fr', 'kab', 'pl', 'pt-BR', 'zh-TW',
    ],
],
</code></pre>
<p>Adding <code>sv-SE</code> would result in:</p>
<pre><code class="language-PHP">'foundation/index.lang' =&gt; [
    'flags' =&gt; [
        'opt-in' =&gt; ['all'],
    ],
    'supported_locales' =&gt; [
        'de', 'es-ES', 'fr', 'kab', 'pl', 'pt-BR', 'sv-SE', 'zh-TW',
    ],
],
</code></pre>
<p>Commit the changes and open a pull request on the <a href="https://github.com/mozilla-l10n/langchecker">main repository</a>.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/git/langchecker
$ git add app/config/sources.inc.php
$ git commit -m &quot;Add sv-SE to foundation/index.lang&quot;
$ git push origin TESTBRANCH
</code></pre>
<h2><a class="header" href="#adding-the-file-to-the-repository" id="adding-the-file-to-the-repository">Adding the file to the repository</a></h2>
<p>At this point you need to run <code>lang_update</code> to actually add the file to the repository.</p>
<pre><code class="language-BASH">$ lang_update all 0 sv-SE
</code></pre>
<p>This line updates <strong>all</strong> files, for website 0 (mozilla.org), for <strong>sv-SE</strong>.</p>
<p>Move in the l10n repository, make sure to add the file and commit.</p>
<pre><code class="language-BASH">$ trunkst
On branch master
Your branch is up-to-date with 'origin/master'.
Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)

	sv-SE/foundation/index.lang

nothing added to commit but untracked files present (use &quot;git add&quot; to track)

$ git add sv-SE
$ git commit -m &quot;Add foundation/index.lang to sv-SE&quot;
$ git push
</code></pre>
<h1><a class="header" href="#update-an-existing-file" id="update-an-existing-file">Update an existing file</a></h1>
<p>This task can be split into smaller tasks:</p>
<ul>
<li>Add the new strings to the reference file (typically en-US).</li>
<li>Update the deadline (optional).</li>
<li>Update the file for all locales adding the new strings.</li>
</ul>
<h2><a class="header" href="#add-the-new-strings-to-the-reference-file" id="add-the-new-strings-to-the-reference-file">Add the new strings to the reference file</a></h2>
<p>Edit the reference file and add new strings as needed.</p>
<p>If you’re adding a string behind a tag, always remember to bind the new string to the tag and to add the tag itself to the beginning of the file. <a href="tools/webdashboards/../../products/mozilla_org/working_bedrock.html">Working with Bedrock</a> has more details about it.</p>
<p>Always check the diff after completing, to make sure you’re not introducing unwanted changes. If you’re using the l10n-drivers virtual machine, you can use <code>trunkst</code> to move to the mozilla.org trunk folder and check the status (<code>git status</code>) and diff (<code>git diff</code>).</p>
<p>Also double check the <a href="https://l10n.mozilla-community.org/langchecker/?action=errors">Errors View</a>, since it will warn if you’re introducing a duplicated string in the same file.</p>
<h2><a class="header" href="#update-the-deadline" id="update-the-deadline">Update the deadline</a></h2>
<p>If the file has a deadline set, you normally need to update it (e.g. plus 2 weeks from the the update).</p>
<p>Search for the filename in <a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/sources.inc.php">app/config/sources.inc.php</a> and simply update the date associated to this file respecting the format <code>YEAR-MM-DD</code>.</p>
<h2><a class="header" href="#update-the-file-for-all-locales" id="update-the-file-for-all-locales">Update the file for all locales</a></h2>
<p>At this point you need to run <code>lang_update</code> to propagate the update to all locales. Assuming that the file is called <code>mozorg/contribute/signup.lang</code>, run:</p>
<pre><code class="language-BASH">$ lang_update mozorg/contribute/signup.lang 0 all
</code></pre>
<p>This line updates <code>mozorg/contribute/signup.lang</code>, for website <code>0</code> (mozilla.org), for <strong>all</strong> locales.</p>
<p>Move in the l10n repository (remember the <code>trunkst</code> shortcut) and spot check at least a couple of locales. For example, to check <code>fr</code>, run <code>git diff fr</code>. <strong>IMPORTANT</strong>: never run just <code>git diff</code>, otherwise you’ll get the diff for over a hundred locales.</p>
<p>After checking that everything looks correct, commit (notice the <code>-a</code>parameter to commit all changed files already tracked).</p>
<pre><code class="language-BASH">$ trunkst
On branch master
Your branch is up-to-date with 'origin/master'.
Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)

	(list of all locales and files added)

nothing added to commit but untracked files present (use &quot;git add&quot; to track)

$ git commit -a -m &quot;Add new strings to mozorg/contribute/signup.lang&quot;
$ git push
</code></pre>
<p>Make sure to check the commit on GitHub after pushing, especially to verify if the commit included any unwanted change.</p>
<h1><a class="header" href="#remove-obsolete-files-from-repositories" id="remove-obsolete-files-from-repositories">Remove obsolete files from repositories</a></h1>
<p>Once a file has been completely removed from <a href="tools/webdashboards/langchecker.html">Langchecker</a>, it’s possible to remove files from the repository using a script available within the tool. Note that files are initially marked as obsolete, and only removed after a few weeks or months.</p>
<p>This document assumes that you have set up the system as explained in <a href="tools/webdashboards/../../config/setup_l10ndrivers_vm.html">this document</a>, so aliases like <code>lang_update</code> are available, repositories are already cloned in <code>~/mozilla/repositories</code>, Atom is available and includes the syntax highlighter for LANG files.</p>
<p>Let’s assume that the file removed from Langchecker is called <code>firefox/australis/firefox_tour.lang</code> and belongs to the website <em>mozilla.org</em> (ID 0).</p>
<p>To check which locales still have this file, it’s enough to move into the local clone (since it’s <em>mozilla.org</em>, you can use the <code>trunkst</code> shortcut instead of <code>cd ~/mozilla/repositories/mozilla_org</code>) and run the script called <code>untracked_files</code> (full path to the script would be <code>~/mozilla/git/langchecker/app/scripts/untracked_files</code>).</p>
<pre><code>$ trunkst
On branch master
Your branch is up-to-date with 'origin/master'.
nothing to commit, working directory clean
$ untracked_files
$
</code></pre>
<p>If the output of the command is empty, like in this case, it means that there are no untracked files in the repository.</p>
<p>Without additional parameters, the script checks automatically <em>mozilla.org</em>. It’s possible to examine a different repository by passing the ID of the website within Langchecker, e.g. for engagement (ID 6):</p>
<pre><code>$ untracked_files 6
</code></pre>
<p>If there are untracked files, the output will look like this:</p>
<pre><code>$ untracked_files
ach/firefox/australis/firefox_tour.lang
af/firefox/australis/firefox_tour.lang
am/firefox/australis/firefox_tour.lang
an/firefox/australis/firefox_tour.lang
ar/firefox/australis/firefox_tour.lang
as/firefox/australis/firefox_tour.lang
...
</code></pre>
<p>The first step to remove these files is to <strong>create a new branch</strong>:</p>
<pre><code>$ git branch my_branch
$ git checkout my_branch
</code></pre>
<p>Then <em>pipe</em> the output of <code>untracked_files</code> to a command that actually removes the files from the repository (make sure to be in the repository’s folder before running the command):</p>
<pre><code>$ untracked_files | xargs git rm $1
rm 'ach/firefox/australis/firefox_tour.lang'
rm 'af/firefox/australis/firefox_tour.lang'
rm 'am/firefox/australis/firefox_tour.lang'
rm 'an/firefox/australis/firefox_tour.lang'
rm 'ar/firefox/australis/firefox_tour.lang'
rm 'as/firefox/australis/firefox_tour.lang'
...
</code></pre>
<p>Checking <code>git status</code> will show that files are staged to be removed. You only need to commit these changes and push them to your branch:</p>
<pre><code>$ git status
On branch test
Changes to be committed:
  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)

	deleted:    ach/firefox/australis/firefox_tour.lang
	deleted:    af/firefox/australis/firefox_tour.lang
	deleted:    am/firefox/australis/firefox_tour.lang
	deleted:    an/firefox/australis/firefox_tour.lang
	deleted:    ar/firefox/australis/firefox_tour.lang
	deleted:    as/firefox/australis/firefox_tour.lang
...

$ git commit -a -m &quot;Remove obsolete file firefox/australis/firefox_tour.lang&quot;
$ git push origin my_branch
</code></pre>
<p>At this point create a pull request from this branch, review it to make sure it doesn’t include unnecessary changes, squash and merge it. In case of <em>mozilla.org</em>, you’ll also need to cherry-pick the merge commit to production.</p>
<p>One important detail to keep in mind is that <strong>Japanese (ja) is automatically excluded from checks for mozilla.org</strong>, since they localize several pages that are not tracked by our systems. It’s possible to check the list of untracked files in Japanese alone by running:</p>
<pre><code>$ untracked_files 0 ja
ja/foundation/annualreport/2010/ahead.lang
ja/foundation/annualreport/2010/faq.lang
ja/foundation/annualreport/2010/index.lang
ja/foundation/annualreport/2010/opportunities.lang
ja/foundation/annualreport/2010/people.lang
ja/foundation/feed-icon-guidelines/faq.lang
ja/foundation/feed-icon-guidelines/index.lang
ja/foundation/trademarks/distribution-policy.lang
ja/foundation/trademarks/faq.lang
ja/foundation/trademarks/index.lang
ja/foundation/trademarks/l10n-website-policy.lang
ja/foundation/trademarks/list.lang
ja/foundation/trademarks/policy.lang
ja/mozorg/about/policy/lean-data.lang
</code></pre>
<p>If you want to remove a file for Japanese, you’ll need to do it manually with <code>git rm</code> before committing to the branch, i.e.</p>
<pre><code>$ git rm ja/firefox/australis/firefox_tour.lang
</code></pre>
<h1><a class="header" href="#add-a-new-file-to-an-existing-project" id="add-a-new-file-to-an-existing-project">Add a new file to an existing project</a></h1>
<p>This task can be split into smaller tasks:</p>
<ul>
<li>Add the file to the list of supported files specifying:
<ul>
<li>List of supported locales.</li>
<li>Priority (optional).</li>
<li>Flags (optional).</li>
<li>Deadline (optional).</li>
</ul>
</li>
<li>Add the files to all locales in the l10n repository.</li>
</ul>
<p>To analyze all steps, let’s consider a practical example: you need to add a file called <code>mozorg/contribute/signup.lang</code> to the project <code>www.mozilla.org</code>. The file is priority 1 only for French and German, <code>opt-in</code> for other locales, and deadline is May 30th, 2016. Note that most of the time a file will have the same priority for all locales, and won’t have any flags.</p>
<h2><a class="header" href="#add-the-file-to-the-list-of-supported-files" id="add-the-file-to-the-list-of-supported-files">Add the file to the list of supported files</a></h2>
<p>The file you need to update is <a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/sources.inc.php">app/config/sources.inc.php</a>.</p>
<p>In <a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/websites.inc.php">app/config/websites.inc.php</a> there is a global array <code>$sites</code> that defines all parameters for each project. For <code>www.mozilla.org</code> it looks like this:</p>
<pre><code class="language-PHP">0 =&gt; [
    'www.mozilla.org',
    $repositories['www.mozilla.org']['local_path'],
    '',
    $mozillaorg,
    $mozillaorg_lang,
    'en-US', // source locale
    $repositories['www.mozilla.org']['public_path'],
    3,
    'lang',
    [],
],
</code></pre>
<p>The array storing all supported files is the 5th element (<code>$mozillaorg_lang</code>). With time you won’t need to check the configuration array, it will be enough to search for a similar file in the same project.</p>
<h3><a class="header" href="#supported-locales" id="supported-locales">Supported locales</a></h3>
<p>Search for the definition of <code>$mozillaorg_lang</code> in <code>app/config/sources.inc.php</code> and add the new file, respecting the existing alphabetical order (snippets represent an exception to this rule). This is how the definition’s begin looks:</p>
<pre><code class="language-PHP">$mozillaorg_lang = [
    'download_button.lang' =&gt; [
        'deadline'          =&gt; '2016-04-29',
        'priority '         =&gt; 1,
        'supported_locales' =&gt; $mozillaorg,
    ],
</code></pre>
<p>Supported locales are defined in each file as an array associated to the key <code>supported_locales</code>. If this key is missing, file will fall back to the list of locales supported for the website (project) it belongs to. For clarity it’s highly suggested to always specify the list of supported locales.</p>
<p>For the list of locales you should check the definition for existing similar files. In this case, you can use the same settings as another <code>contribute</code> pages:</p>
<pre><code class="language-PHP">'mozorg/contribute/index.lang' =&gt; [
    'flags' =&gt; [
        'opt-in' =&gt; ['all'],
    ],
    'priority'          =&gt; 2,
    'supported_locales' =&gt; $getinvolved_locales,
],
'mozorg/contribute/signup.lang' =&gt; [
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<h3><a class="header" href="#priority" id="priority">Priority</a></h3>
<p>Priority is optional and can defined for each file. If the priority is the same for all locales, you can assign the integer value (from 1 to 5) to a <code>priority</code> key.</p>
<pre><code class="language-PHP">'mozorg/contribute/index.lang' =&gt; [
    'priority'          =&gt; 2,
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<p>It’s also possible to define a more complex set of priorities using an associative array, where to each priority (a numeric key) is associated an array of locales. <code>all</code> is a special locale to represent all supported locales for this file. For example:</p>
<pre><code class="language-PHP">'priorities'          =&gt; [
    1 =&gt; ['de', 'fr'],
    2 =&gt; ['all'],
],
</code></pre>
<p>If you don’t specify a priority, the file will fall back to the default priority specified for the project (in <code>$sites</code>). In this case the request is to set the file with priority 1 for French and German, while the default for mozilla.org is 3.</p>
<p>In this case, the request is to assign priority 1 only to French and German</p>
<pre><code class="language-PHP">'mozorg/contribute/signup.lang' =&gt; [
    'priority'          =&gt; [
        1 =&gt; ['de', 'fr'],
    ],
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<h3><a class="header" href="#flags" id="flags">Flags</a></h3>
<p>Flag are defined for each file as an array associated to the key <code>flags</code>:</p>
<pre><code class="language-PHP">'mozorg/contribute/index.lang' =&gt; [
    'flags' =&gt; [
        'opt-in' =&gt; ['all'],
    ],
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<p>To each flag (key) is associated an array of locales. <code>all</code> is a special locale to represent all supported locales for this file. Flags currently in use are: obsolete, opt-in.</p>
<p>In this case, the request is to flag the file as opt-in for all locales.</p>
<pre><code class="language-PHP">'mozorg/contribute/signup.lang' =&gt; [
    'flags'    =&gt; [
        'opt-in' =&gt; ['all'],
    ],
    'priority'          =&gt; [
        1 =&gt; ['de', 'fr'],
    ],
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<h3><a class="header" href="#deadline" id="deadline">Deadline</a></h3>
<p>If a file is critical, you also want to set a deadline for it: in the last week before deadline the date will be displayed in orange on the Webdashboard, after deadline it will be displayed in red.</p>
<p>If the deadline is the same for all locales, you can assign the date (as a string in ISO format YYYY-MM-DD) to a <code>deadline</code> key. In this case, deadline needs to be set to May 30th, 2016 (2016-05-30):</p>
<pre><code class="language-PHP">'mozorg/contribute/signup.lang' =&gt; [
    'deadline' =&gt; '2016-05-30',
    'flags'    =&gt; [
        'opt-in' =&gt; ['all'],
    ],
    'priority'          =&gt; [
        1 =&gt; ['de', 'fr'],
    ],
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<p>It’s also possible to define different deadlines for locales using an associative array, where to each deadline (date in ISO format YYYY-MM-DD) is associated an array of locales. <code>all</code> is a special locale to represent all supported locales for this file. For example, a deadline for German and French, and a later date for other languages:</p>
<pre><code class="language-PHP">'deadline' =&gt; [
    '2016-05-30' =&gt; ['de', 'fr'],
    '2016-06-15' =&gt; ['all'],
];
</code></pre>
<p>Or a deadline only for French:</p>
<pre><code class="language-PHP">'deadline' =&gt; [
    '2016-05-30' =&gt; ['fr'],
];
</code></pre>
<h2><a class="header" href="#add-the-files-to-all-locales-in-the-l10n-repository" id="add-the-files-to-all-locales-in-the-l10n-repository">Add the files to all locales in the l10n repository</a></h2>
<p>At this point you need to run <code>lang_update</code> to actually add the file to all locales.</p>
<pre><code class="language-BASH">lang_update mozorg/contribute/signup.lang 0 all
</code></pre>
<p>This line updates <code>mozorg/contribute/signup.lang</code>, for website 0 (mozilla.org), for <strong>all</strong> locales.</p>
<p>Move in the l10n repository, make sure to add the file and commit.</p>
<pre><code class="language-BASH">$ trunkst
On branch master
Your branch is up-to-date with 'origin/master'.
Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)

	(list of all locales and files added)

nothing added to commit but untracked files present (use &quot;git add&quot; to track)

$ git add .
$ git commit -m &quot;Add new page mozorg/contribute/signup.lang&quot;
$ git push
</code></pre>
<p>Note: <code>git add .</code> adds all the new files in the current repository. Make sure to check the list returner by <code>git status</code>, and to check the commit on GitHub after pushing.</p>
<h1><a class="header" href="#working-with-mercurial" id="working-with-mercurial">Working with Mercurial</a></h1>
<p>How to set up and work with Mercurial:</p>
<ul>
<li><a href="tools/mercurial/setting_mercurial_environment.html">Set up the environment</a>.</li>
<li><a href="tools/mercurial/creating_mercurial_patch.html">Create a patch</a>.</li>
<li><a href="tools/mercurial/useful_mercurial_commands.html">Useful Mercurial commands</a>.</li>
</ul>
<h1><a class="header" href="#set-up-the-environment-for-mercurial" id="set-up-the-environment-for-mercurial">Set up the environment for Mercurial</a></h1>
<p><strong>IMPORTANT:</strong> This configuration has to be done only once on the computer. After that you will simply need to keep Mercurial up to date (a new version is released every month).</p>
<h2><a class="header" href="#mercurial" id="mercurial">Mercurial</a></h2>
<p>Most of the work needs to be done in <a href="https://www.mercurial-scm.org/downloads">Mercurial</a>, so you need to install if first. An alternative way to install it on macOS is via <a href="https://brew.sh/">homebrew</a> with <code>brew install hg</code> (<code>brew upgrade hg</code> to update it later).</p>
<p>To check if Mercurial is available and up to date, run in the terminal <code>hg --version</code>, the output should look like this:</p>
<pre><code class="language-BASH">$ hg --version
Mercurial Distributed SCM (version 4.0.1)
(see https://mercurial-scm.org for more information)

Copyright (C) 2005-2016 Matt Mackall and others
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</code></pre>
<p>Unless you’re familiar with <code>vi</code>, you also want to setup <code>nano</code> as the default editor in the system.</p>
<pre><code class="language-BASH">$ export EDITOR=/usr/bin/nano
</code></pre>
<h2><a class="header" href="#mercurial-configuration" id="mercurial-configuration">Mercurial configuration</a></h2>
<p>Mercurial’s configuration is stored in a hidden file called <code>.hgrc</code> inside your user folder (<code>~/.hgrc</code>). You will need to create it if it’s not available on the system.</p>
<p>It’s divided into sections, with section names between square parentheses. For example:</p>
<pre><code class="language-INI">[ui]
username = something@example.com
</code></pre>
<h2><a class="header" href="#set-up-ssh-access-for-l10n-repositories" id="set-up-ssh-access-for-l10n-repositories">Set up SSH access for l10n repositories</a></h2>
<p>In order to be able to commit directly to l10n repositories, you need SSH access via your LDAP account (both obtained through a bug, where you also provide your SSH key).</p>
<p>Assuming your SSH key is stored in <code>~/.ssh/id_rsa</code>, your <code>.ssh/config</code> file should have a line that looks like this</p>
<pre><code>Host hg.mozilla.org
User YOUR_LDAP_EMAIL_ADDRESS
IdentityFile ~/.ssh/id_rsa
</code></pre>
<h2><a class="header" href="#set-up-arcanist-for-phabricator" id="set-up-arcanist-for-phabricator">Set up Arcanist for Phabricator</a></h2>
<p>Detailed instructions and explanations are available in <a href="https://phabricator.services.mozilla.com/book/phabricator/article/arcanist_quick_start/">the official documentation</a>.</p>
<p>On macOS, PHP is already shipping as part of the operating system, but you might need to install <a href="https://git-scm.com/">Git</a> if not available. The following commands clone two repositories inside <code>~/mozilla/mercurial/</code>. If you move them, you’ll need to update the <code>PATH</code> command accordingly.</p>
<pre><code class="language-BASH">$ git clone https://github.com/phacility/libphutil.git ~/mozilla/mercurial/libphutil
$ git clone https://github.com/phacility/arcanist.git ~/mozilla/mercurial/arcanist
$ echo -e '\n# Arcanist path for Phabricator\nPATH=&quot;$PATH:$HOME/mozilla/mercurial/arcanist/bin/&quot;' &gt;&gt; ~/.bash_profile
$ source ~/.bash_profile
</code></pre>
<p>Check that the <code>arc</code> command is available:</p>
<pre><code class="language-BASH">$ arc --version
arcanist 875d018360374cb4b1287309782fcb9a75d4bcbf (9 Jul 2018)
libphutil 1613e68f474030e2c8de2797080a6872c140b1ef (20 Jul 2018)
</code></pre>
<p>You also need to <a href="https://moz-conduit.readthedocs.io/en/latest/phabricator-user.html">create an account</a> on Phabricator and <a href="https://phabricator.services.mozilla.com/">log in</a>.</p>
<p>At this point you still have to install Arcanist credentials, but you need a clone of mozilla-unified first.</p>
<h2><a class="header" href="#cloning-and-updating-mozilla-unified" id="cloning-and-updating-mozilla-unified">Cloning and updating mozilla-unified</a></h2>
<p>Since searchplugins are stored in mozilla-central, you will also need a clone of it on your computer. Using the <a href="https://mozilla-version-control-tools.readthedocs.io/en/latest/hgmozilla/unifiedrepo.html">mozilla-unified repository</a> repository is a better solution, especially if you need to work on more than just mozilla-central.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/
$ hg clone https://hg.mozilla.org/mozilla-unified
</code></pre>
<p>To update the existing repository:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/mozilla-unified
$ hg pull -u
$ hg up central
</code></pre>
<p>The last command makes sure you’re working against central (to be more precise, it moves you to the <code>central</code> bookmark).</p>
<p>Now you can complete the setup for Arcanist. Follow the instructions on screen to complete, it will require you to connect to Phabricator and generate an API key to copy in the terminal:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/mozilla-unified
$ arc install-certificate
</code></pre>
<h2><a class="header" href="#mercurial-configuration-1" id="mercurial-configuration-1">Mercurial configuration</a></h2>
<p>Mercurial configuration is stored in the <code>.hgrc</code> file in the user’s home directory.</p>
<p>Useful extensions are <code>Mercurial Queues Extension</code> (queues), <code>color</code> (colorize output, for example diffs) and <code>purge</code> (to remove untracked files from the repository). If the <code>.hgrc</code> file doesn’t have an <code>[extensions]</code> section create one and add the following lines:</p>
<pre><code class="language-INI">[extensions]
mq =
color =
purge =
</code></pre>
<p>Some aliases are also useful to work with bookmarks:</p>
<pre><code class="language-INI">[alias]
shortlog = log --template &quot;{node|short} | {date|isodatesec} | {author|user}: {desc|strip|firstline}\n&quot;
wip = log --graph --rev=wip --template=wip

[templates]
wip = '{label(&quot;log.branch&quot;, branches)} {label(&quot;changeset.{phase}&quot;, rev)}{label(&quot;changeset.{phase}&quot;, &quot;:&quot;)}{label(&quot;changeset.{phase}&quot;, short(node))} {label(&quot;grep.user&quot;, author|user)}{label(&quot;log.tag&quot;, if(tags,&quot; {tags}&quot;))}{label(&quot;log.tag&quot;, if(fxheads,&quot; {fxheads}&quot;))} {label(&quot;log.bookmark&quot;, if(bookmarks,&quot; {bookmarks}&quot;))}\n{label(ifcontains(rev, revset(&quot;.&quot;), &quot;desc.here&quot;),desc|firstline)}'
</code></pre>
<h2><a class="header" href="#text-editor" id="text-editor">Text editor</a></h2>
<p>The suggestion is to use <a href="https://atom.io/">Atom</a> with the optional <a href="https://atom.io/packages/sort-lines">Sort Lines package</a> installed.</p>
<p>If you don’t like to use <code>nano</code> to edit commit messages, you can also use a graphical editor. A possible alternative on macOS is to use <a href="https://macromates.com/">TextMate</a>: after installing it, open Preferences and install the <em>Shell support</em> (<em>Terminal</em> tab), then add a <code>editor</code> preference to <code>.hgrc</code>.</p>
<pre><code class="language-INI">[ui]
username = YOUR NAME &lt;YOUR EMAIL&gt;
ignore.other = ~/.hgignore
editor = mate -w
</code></pre>
<p>You can also use Atom, but it’s definitely slower.</p>
<pre><code class="language-INI">[ui]
username = YOUR NAME &lt;YOUR EMAIL&gt;
ignore.other = ~/.hgignore
editor = atom --wait
</code></pre>
<p>In general, in order to be able to use it for commit messages, you’ll need a text editor available from the command line, and with a <code>wait</code> option.</p>
<h1><a class="header" href="#create-a-patch-in-mercurial" id="create-a-patch-in-mercurial">Create a patch in Mercurial</a></h1>
<ul>
<li><a href="tools/mercurial/creating_mercurial_patch.html#creating-a-patch-using-phabricator">Creating a patch using Phabricator</a>
<ul>
<li><a href="tools/mercurial/creating_mercurial_patch.html#creating-a-patch">Creating a patch</a></li>
<li><a href="tools/mercurial/creating_mercurial_patch.html#updating-an-existing-patch">Updating an existing patch</a>
<ul>
<li><a href="tools/mercurial/creating_mercurial_patch.html#amend-the-last-commit">Amend the last commit</a></li>
<li><a href="tools/mercurial/creating_mercurial_patch.html#create-a-new-commit-and-squash-history">Create a new commit and squash history</a></li>
</ul>
</li>
<li><a href="tools/mercurial/creating_mercurial_patch.html#landing-the-patch">Landing the patch</a></li>
</ul>
</li>
<li><a href="tools/mercurial/creating_mercurial_patch.html#creating-a-patch-using-queues">Creating a patch using Queues</a>
<ul>
<li><a href="tools/mercurial/creating_mercurial_patch.html#creating-a-patch">Creating a patch</a></li>
<li><a href="tools/mercurial/creating_mercurial_patch.html#updating-an-existing-patch">Updating an existing patch</a></li>
<li><a href="tools/mercurial/creating_mercurial_patch.html#landing-the-patch">Landing the patch</a></li>
</ul>
</li>
</ul>
<p>There are currently two different methods available to create a patch for Mercurial repositories:</p>
<ul>
<li><a href="tools/mercurial/creating_mercurial_patch.html#creating-a-patch-using-phabricator">Using <strong>Phabricator</strong></a>.</li>
<li><a href="tools/mercurial/creating_mercurial_patch.html#creating-a-patch-using-queues">Using <strong>Mercurial Queues</strong></a> (<code>mq</code> extension).</li>
</ul>
<p>Phabricator is the preferred method for patches to main code repositories, like <code>mozilla-central</code>. On the other hand, Queues is the only tool available for patches to l10n repositories.</p>
<p>As a general rule, before creating a patch, make sure that your environment is <a href="tools/mercurial/../../tools/mercurial/setting_mercurial_environment.html">correctly set up</a>, and update your local clones.</p>
<h2><a class="header" href="#creating-a-patch-using-phabricator" id="creating-a-patch-using-phabricator">Creating a patch using Phabricator</a></h2>
<h3><a class="header" href="#creating-a-patch" id="creating-a-patch">Creating a patch</a></h3>
<p>Consider the following example: setting up productization for Urdu (ur) on Firefox desktop. After you’ve created or edited all the files you need, check the status of the repository.</p>
<pre><code class="language-BASH">$ hg status
M browser/locales/search/list.json
? browser/locales/searchplugins/amazon-in.xml
? browser/locales/searchplugins/wikipedia-ur.xml
</code></pre>
<p>These are all status codes relevant for working with patches:</p>
<ul>
<li>M = modified. File was already tracked but has been modified.</li>
<li>A = added. File is new and was already added with <code>hg add</code>.</li>
<li>R = removed. File has been removed with <code>hg remove</code>.</li>
<li>! = missing. File has been removed from the filesystem but it’s still tracked. Use <code>hg remove</code> to stop tracking it.</li>
<li>? = not tracked. File is not tracked yet. You can start tracking it by using <code>hg add</code>.</li>
</ul>
<p>Note that the file status will change once you commit, <code>hg status</code> only shows information about pending changes.</p>
<p>Now you need to add the new files. You can add them using the full path, or a parent folder, just make sure you’re not adding unnecessary files.</p>
<pre><code class="language-BASH">$ hg add browser/locales/searchplugins
$ hg status
M browser/locales/search/list.json
A browser/locales/searchplugins/amazon-in.xml
A browser/locales/searchplugins/wikipedia-ur.xml
</code></pre>
<p>Let’s create a bookmark for this pending work, for example <code>bug1304757</code>.</p>
<pre><code class="language-BASH">$ hg bookmark bug1304757
</code></pre>
<p>Commit the changes:</p>
<pre><code class="language-BASH">$ hg commit -m &quot;Bug 1304757 - [ur] Search engine setup for Firefox for Urdu&quot;
</code></pre>
<p>At this point you can check the status of the tree:</p>
<pre><code class="language-BASH">$ hg wip
</code></pre>
<p>And you should be able to identify your work and bookmark (press <code>q</code> to leave this view):</p>
<pre><code>@   358728:c0b04112d4e6 flod tip  bug1304757
|  Bug 1304757 - [ur] Search engine setup for Firefox for Urdu, r?flod
| o   358726:f7834b7b4050 aosmond  inbound
|/:  Bug 1299498 - Keep a main thread only pointer to the underlying nsIURI for ImageURL. r=tnikkel
| : o   358715:6f79cece26e9 ffxbld  beta
| : |  No bug, Automated blocklist update from host bld-linux64-spot-245 - a=blocklist-update
| : ~
| : o   358714:f5f73390f439 ffxbld  release
| : |  No bug, Automated blocklist update from host bld-linux64-spot-246 - a=blocklist-update
| : ~
o :   358709:f8107cf96144 cbook  central
:/   merge mozilla-inbound to mozilla-central a=merge
</code></pre>
<p>Create a revision in Differential:</p>
<pre><code class="language-BASH">$ arc diff
</code></pre>
<p>An editor will open, asking for some information about the commit:</p>
<pre><code>Bug 1304757 - [ur] Search engine setup for Firefox for Urdu

Summary:

Test Plan:

Reviewers: flod

Subscribers:

Bug #: 1304757
</code></pre>
<p>You need to provide:</p>
<ul>
<li><strong>Reviewers</strong>: use the Phabricator nickname (usually matches the nickname on Bugzilla). In this example: <code>flod</code>.</li>
<li><strong>Bug #</strong>: provide the bug number. In this example: <code>1304757</code>.</li>
</ul>
<p>Once finished, save the editor and exit. At the end of the process, you should find a link to a Differential in Phrabricator:</p>
<pre><code class="language-BASH">Linting...
No lint engine configured for this project.
Running unit tests...
No unit test engine is configured for this project.
 SKIP STAGING  Phabricator does not support staging areas for this repository.
Updating commit message...
Created a new Differential revision:
        Revision URI: https://phabricator.services.mozilla.com/Dxxxx

Included changes:
  M       browser/locales/search/list.json
  A       browser/locales/searchplugins/amazon-in.xml
  A       browser/locales/searchplugins/wikipedia-ur.xml
</code></pre>
<p>Once published, the review request will be attached automatically to the bug, and the reviewer will be flagged. Note that you can also update information about the patch, like reviewer or bug, directly in Phrabricator after using <code>arc diff</code>.</p>
<h3><a class="header" href="#updating-an-existing-patch" id="updating-an-existing-patch">Updating an existing patch</a></h3>
<p>If you need to address review comments, you can restore your branch by switching to your bookmark, and start working on it again.</p>
<pre><code class="language-BASH">$ hg up bug1304757
</code></pre>
<p>You can check which bookmark is currently active with <code>hg bookmarks</code>:</p>
<pre><code class="language-BASH">$ hg bookmarks
   aurora                    359014:96503957841c
   beta                      359025:34c73c520f93
 * bug1304757                359034:bde380bc54ff
   central                   358999:a69583d2dbc6
</code></pre>
<p>After addressing the review comments and editing your local files, you have two choices to save your work:</p>
<ul>
<li>Amend the last commit.</li>
<li>Create a new commit and squash history.</li>
</ul>
<h4><a class="header" href="#amend-the-last-commit" id="amend-the-last-commit">Amend the last commit</a></h4>
<p>To amend the last commit, simply execute:</p>
<pre><code class="language-BASH">$ hg commit --amend
</code></pre>
<p>Then confirm (or edit) the commit message by saving with <code>CTRL+O</code> and exiting with <code>CTRL+X</code> (assuming the default editor is nano). Finally, update phabricator (you will need to provide a commit message):</p>
<pre><code class="language-BASH">$ arc diff
</code></pre>
<h4><a class="header" href="#create-a-new-commit-and-squash-history" id="create-a-new-commit-and-squash-history">Create a new commit and squash history</a></h4>
<p>If you prefer to have a separate commit, execute:</p>
<pre><code class="language-BASH">$ hg commit -m &quot;Address review comments&quot;
</code></pre>
<p>Then squash the commits together by editing history:</p>
<pre><code class="language-BASH">$ hg histedit
</code></pre>
<p>The following screen will look like this:</p>
<pre><code>pick f6f70f6de69c 358597 Bug 123456 - [ur] Search engine setup for Firefox fo...
pick 8088fd8658fd 358598 Fix searchplugin name

# Edit history between f6f70f6de69c and 8088fd8658fd
#
# Commits are listed from least to most recent
#
# You can reorder changesets by reordering the lines
#
# Commands:
#
#  e, edit = use commit, but stop for amending
#  m, mess = edit commit message without changing commit content
#  p, pick = use commit
#  d, drop = remove commit from history
#  f, fold = use commit, but combine it with the one above
#  r, roll = like fold, but discard this commit's description
#
</code></pre>
<p>In this case you want to <em>roll</em> the second commit into the first one, so replace <code>pick</code> with <code>roll</code> (or <code>r</code>), save with <code>CTRL+O</code> and exit with <code>CTRL+X</code> (assuming the default editor is nano).</p>
<pre><code>pick f6f70f6de69c 358597 Bug 123456 - [ur] Search engine setup for Firefox fo...
roll 8088fd8658fd 358598 Fix searchplugin name

...
</code></pre>
<p>Update Phabricator (you will need to provide a commit message):</p>
<pre><code class="language-BASH">$ arc diff
</code></pre>
<p>You can also use <code>hg histedit</code> to reword a commit message (set the commit line to <code>edit</code>). Just remember to complete the <code>histedit</code> after commit.</p>
<pre><code class="language-BASH">$ hg commit -m &quot;Some changes&quot;
$ hg histedit --continue
</code></pre>
<p>If necessary, you can rebase against another bookmark, like <code>central</code> or <code>inbound</code></p>
<pre><code class="language-BASH">$ hg rebase -d central
</code></pre>
<p>More information about this workflow are available in the following pages:</p>
<ul>
<li>https://mozilla-version-control-tools.readthedocs.io/en/latest/hgmozilla/firefoxworkflow.html</li>
<li>https://www.mercurial-scm.org/wiki/Bookmarks</li>
</ul>
<h3><a class="header" href="#landing-the-patch" id="landing-the-patch">Landing the patch</a></h3>
<p>Once the patch has been reviewed, you have two options:</p>
<ul>
<li>If you have L3 access to the repository, you can use <a href="https://moz-conduit.readthedocs.io/en/latest/lando-user.html">Lando</a> to land your commit directly. If your reviewer has it, you can ask them to land.</li>
<li>You can set the <code>checkin-needed</code> keyword in the bug, and sheriffs will land it from you.</li>
</ul>
<h2><a class="header" href="#creating-a-patch-using-queues" id="creating-a-patch-using-queues">Creating a patch using Queues</a></h2>
<h3><a class="header" href="#creating-a-patch-1" id="creating-a-patch-1">Creating a patch</a></h3>
<p>Consider the following example: setting up productization for Urdu (ur) on Firefox desktop (l10n repository). The first step is to create a <code>region.properties</code> file. Move into the repository folder and check its status:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/l10n/ur/l10n-central

$ hg status
? browser/chrome/browser-region/region.properties
</code></pre>
<p>File is brand new and needs to be added:</p>
<pre><code class="language-BASH">$ hg add browser

$ hg status
A browser/chrome/browser-region/region.properties
</code></pre>
<p>You need to assign a name to this patch, it’s easy to use a reference to the bug number: for example, if the bug number is 123456, the file could be called <code>bug123456.patch</code> (note the added extension <code>.patch</code>).</p>
<pre><code class="language-BASH">$ hg qnew bug123456.patch
</code></pre>
<p>At this point you will be asked to provide a commit message for your patch (in <code>nano</code> if you followed the instructions to set up the environment): write your commit message, then press <code>CTRL+O</code> to save the file, <code>enter</code> to confirm the proposed filename, and finally <code>CTRL+X</code> to exit the editor.</p>
<p>The commit message should be the same as the bug, for example <code>Bug 123456 - Set up searchplugins for &quot;ur&quot; and Firefox desktop</code>.</p>
<p>You are ready to <em>pop</em> the patch out of the queue. Since it’s likely that there are no other patches, you can pop them all with <code>-a</code>.</p>
<pre><code class="language-BASH">$ hg qpop -a
popping bug123456.patch
patch queue now empty
</code></pre>
<p>The patch is stored inside the <code>.hg/patches</code> folder in the root of the repository (in the suggested setup, the full path would be <code>~/mozilla/mercurial/l10n-central/.hg/patches</code>). You can copy the file through the command line or the file explorer. For example, on macOS you can open the folder in Finder by typing:</p>
<pre><code class="language-BASH">$ open ~/mozilla/mercurial/l10n/ur/l10n-central/.hg/patches
</code></pre>
<p>Or you can copy the file on the Desktop with</p>
<pre><code class="language-BASH">$ cp ~/mozilla/mercurial/l10n/ur/l10n-central/.hg/patches/bug123456.patch ~/Desktop
</code></pre>
<p>Now you need to attach the file to Bugzilla and set an appropriate reviewer for it.</p>
<h3><a class="header" href="#updating-an-existing-patch-1" id="updating-an-existing-patch-1">Updating an existing patch</a></h3>
<p>Let’s assume that the review found some issues with the patch and you need to update it. The fastest way is to import the .patch file without committing, update the files as needed, and create a new patch using the same process explained above.</p>
<p>Assuming the file is called <code>bug123456.patch</code> and it’s in your desktop, you can move in the repository folder and import the file like this:</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/l10n/ur/l10n-central

$ hg import --no-commit ~/Desktop/bug123456.patch
</code></pre>
<p>Don’t forget the <code>--no-commit</code> part. If you do, the patch will be added to your repository and you’ll need to clone the original repository again.</p>
<!-- markdownlint-disable MD038 -->
<p><strong>Note:</strong> You can drag and drop the patch file on the terminal on macOS to get its full path instead of typing it. In other words, type <code>hg import --no-commit </code> (leave an empty space at the end), then drag the icon of the patch on the Terminal’s window: its full path will appear automatically.</p>
<!-- markdownlint-enable MD038 -->
<p>At this point you’re ready to modify the files, and create a new patch. The only difference is that you will need to use a different filename, for example <code>bug123456v1.patch</code>.</p>
<h3><a class="header" href="#landing-the-patch-1" id="landing-the-patch-1">Landing the patch</a></h3>
<p>Your patch got a <code>r+</code>, so you need to update the commit message to reference the review, import the patch and push it to the remote server.</p>
<p><strong>Note:</strong> If the patch is for a repository where you don’t have write access, you don’t need to follow these instructions, only to set the <code>checkin-needed</code> flag in Bugzilla.</p>
<p>Open the .patch file in your editor, find the line with the commit message, and add <code>r=NICKNAME</code> to the commit message. For example, the last line in</p>
<pre><code># HG changeset patch
# User SOMENAME &lt;SOME EMAIL&gt;
# Parent  b45d23bc53df9227aa262acb2a5c6b0ab903b76e
Bug 123456 - Set up searchplugins for &quot;ur&quot; and Firefox for Android
</code></pre>
<p>Should become like this, assuming flod is the reviewer.</p>
<pre><code>Bug 123456 - Set up searchplugins for &quot;ur&quot; and Firefox for Android, r=flod
</code></pre>
<p>Then you need to import the patch, this time without the <code>no-commit</code> parameter.</p>
<pre><code class="language-BASH">$ cd ~/mozilla/mercurial/l10n/ur/l10n-central

$ hg import ~/Desktop/bug123456.patch
</code></pre>
<p>The patch has been imported and committed. If you get an error while applying the patch, check if the editor you’re using hasn’t modified other lines of the patch, for example removing trailing whitespaces. In that case, using <code>nano</code> to edit the patch is probably your faster option.</p>
<p>Now you’re ready to push to the remote repository</p>
<pre><code class="language-BASH">$ hg push
</code></pre>
<p>The reply from the server will contain the URL to your changeset: copy and paste that URL in the bug. If the bug only contains a patch to region.properties, you can close the bug after landing; if it also contains a patch stored in MozReview, the bug will be automatically closed when the patch is merged to mozilla-central.</p>
<h1><a class="header" href="#useful-mercurial-commands" id="useful-mercurial-commands">Useful Mercurial commands</a></h1>
<h2><a class="header" href="#display-log" id="display-log">Display log</a></h2>
<p>To display the log you can use <code>hg log -l NUMBER</code>, where <em>NUMBER</em> is the number of commits. Note that Mercurial uses <code>l</code> instead of Git’s <code>n</code>. Use the space bar to move to the next page if the results don’t fit in the screen.</p>
<p>You can also browse the history by running <code>hg serve</code> within the repository folder, then opening http://localhost:8000</p>
<h2><a class="header" href="#display-content-of-the-last-commit" id="display-content-of-the-last-commit">Display content of the last commit</a></h2>
<p>To display the content of the last commit you can use:</p>
<pre><code class="language-BASH">$ hg log --patch --rev tip
</code></pre>
<p>Press the space bar to move to the next page, <code>q</code> to quit.</p>
<h2><a class="header" href="#revert-staged-changes" id="revert-staged-changes">Revert staged changes</a></h2>
<p>Let’s assume that you have staged (uncommitted) changes in your repositories but you want to go back to a clean state:</p>
<ul>
<li>If you only want to reset one file, you can use <code>hg revert FILENAME</code>. Note that this will leave a <code>FILENAME.orig</code> in the repository, in case you decide to change your mind. To avoid that, use the <code>-C</code> option: <code>hg revert -C FILENAME</code>. You can use this command also to restore a file marked as <code>!</code> (missing in the filesystem, but still tracked).</li>
<li><code>hg up -C</code> will reset all changed files to the last commit. Note that it won’t remove untracked files.</li>
<li>To remove all untracked files, you can use the <code>purge</code> extension and run <code>hg purge</code>. It won’t remove staged changes, like modified files still uncommitted.</li>
</ul>
<h2><a class="header" href="#revert-changes-already-committed" id="revert-changes-already-committed">Revert changes already committed</a></h2>
<p>If you want to revert changes already committed:</p>
<ul>
<li>To backout a specific changeset use <code>hg backout -r CHANGESET</code>. This will prompt you directly with a request for the commit message to use in the backout.</li>
<li>To revert a file to a specific changeset, use <code>hg revert -r CHANGESET FILENAME</code>. This will revert the file without committing it.</li>
</ul>
<h1><a class="header" href="#miscellaneous-documentation" id="miscellaneous-documentation">Miscellaneous documentation</a></h1>
<ul>
<li><a href="misc/creating_new_repository.html">How to create a new repository for localization projects</a>.</li>
<li><a href="misc/working_w_l10n_agency.html">How to work with a Localization Agency</a>.</li>
<li><a href="misc/documentation_styleguide.html">Documentation styleguide</a>.</li>
<li><a href="misc/stock_emails.html">Stock email for interaction with localizers and vendors</a>.</li>
</ul>
<h1><a class="header" href="#creating-a-new-repository-for-projects" id="creating-a-new-repository-for-projects">Creating a new repository for projects</a></h1>
<p>Creating a new repository in the <a href="https://github.com/mozilla-l10n">mozilla-l10n</a> organization provides the advantage of letting l10n-drivers manage this repository directly, reducing delays when dealing with permissions. It also allows localizers to work directly on GitHub with pull requests.</p>
<p>Note that you need to be a manager of the organization in order to create a new repository.</p>
<h2><a class="header" href="#create-the-new-repository" id="create-the-new-repository">Create the new repository</a></h2>
<p>A new repository can be created in <a href="https://github.com/organizations/mozilla-l10n/repositories/new">this page</a>, or using the <strong>New</strong> button in the organization’s landing page.</p>
<p><strong>Name</strong>: always include the <code>-l10n</code> suffix for localization repositories, to differentiate them from other repositories used for tools. Notable exceptions to this rule are <code>appstores</code> and <code>www.mozilla.org</code>.</p>
<p>For example, if the project is <em>Focus for Android</em>, a good repository name is <code>focus-android-l10n</code>.</p>
<p><strong>Description</strong>: add a short description, e.g. <code>Strings for the Focus (Android) project</code>.</p>
<p>Set the project as <strong>Public</strong> and don’t initialize it with a README.</p>
<p><img src="misc/../assets/images/new_repository/new_repo.png" alt="New repository" /></p>
<h2><a class="header" href="#add-collaborators" id="add-collaborators">Add collaborators</a></h2>
<p>Go into the project settings, panel <strong>Collaborators &amp; teams</strong>:</p>
<ul>
<li>Add the relevant l10n-drivers as Admin. You can either pick individuals or one of the pre-existing groups.</li>
<li>Only when the project is ready for localization, add the <strong>Localizers</strong> group with <strong>Write</strong> permissions. Note that Pontoon’s bot is included in the localizers group, so you will need to enable it for testing the sync process.</li>
<li>Add relevant developers as contributors if they need to make commits to the repository (that’s usually the case, in order to update strings).</li>
</ul>
<p><img src="misc/../assets/images/new_repository/settings.png" alt="New repository" /></p>
<h2><a class="header" href="#add-a-readmemd-to-the-project" id="add-a-readmemd-to-the-project">Add a README.md to the project</a></h2>
<p>Add a README with some useful information about the project. For example, for Focus for Android:</p>
<pre><code># Focus by Firefox localization
Localization for the Focus by Firefox project for Android.

The application code with build instructions can be found
at &lt;https://github.com/mozilla-mobile/focus-android&gt;.

# License
Translations in this repository are available under the
terms of the [Mozilla Public License v2.0](https://www.mozilla.org/MPL/2.0/).
</code></pre>
<h2><a class="header" href="#add-a-codeowners-file" id="add-a-codeowners-file">Add a CODEOWNERS file</a></h2>
<p>It’s possible to add a <em>CODEOWNERS</em> file to automatically ping the owner of the project in case of pull requests. File should be placed in the root of the repository, it’s called <code>CODEOWNERS</code> and uses the following format:</p>
<pre><code>path/to/files/to/monitor @nickname_of_owner
</code></pre>
<p>For example, this is the content of the <a href="https://github.com/mozilla-l10n/focus-android-l10n/blob/master/CODEOWNERS">CODEOWNERS</a> file for Focus for Android:</p>
<pre><code>locales/templates/*.pot @delphine
</code></pre>
<p>Pull requests to update strings always modify <code>locales/templates/app.pot</code>, while <code>delphine</code> is the nickname of the PM in charge of this product. Any pull request trying to modify files matching that path will automatically send a review request to the code owner.</p>
<h2><a class="header" href="#add-topics-to-the-repository-optional" id="add-topics-to-the-repository-optional">Add topics to the repository (optional)</a></h2>
<p>In the main repository page you can add <a href="https://github.com/blog/2309-introducing-topics">topics</a> to make the repository more discoverable by potential contributors. For example, all localization projects have the following topics: mozilla-l10n, localization, translation.</p>
<h1><a class="header" href="#working-with-a-localization-agency" id="working-with-a-localization-agency">Working with a Localization Agency</a></h1>
<p>This document is a guideline for project manager who interacts with a localization agency that already successfully went through our <a href="https://docs.google.com/document/d/1Y0xfGo-24ZJI_uYFLtJFcuxCi20FNIqaeEc7v_FlaY4/edit">vetting process</a>. Our vetting process helps us ensure the vendors we work with are able to deliver translations in a timely manner, with the required level of quality and following our localization processes. We are also assessing their flexibility to work efficiently with our communities and our tools when it’s required.</p>
<h2><a class="header" href="#initial-set-up-before-sending-localization-requests" id="initial-set-up-before-sending-localization-requests">Initial set up before sending localization requests</a></h2>
<h3><a class="header" href="#ask-for-a-rate-sheet" id="ask-for-a-rate-sheet">Ask for a rate sheet</a></h3>
<ul>
<li>Make sure you have received a rate sheet customized for Mozilla needs. This should have been sent as part of the vetting process, and it can be updated annually. An example of the official <a href="https://drive.google.com/a/mozilla.com/file/d/0B7u_NzvpgGcgTDhoVFBsN3dMc0E/view?usp=sharing">rate sheet</a> that includes the following but not limited to:
<ul>
<li>Word rate for each of the interested locales as in new words, 100% match, fuzzy match for translation, review, proofreading.</li>
<li>Hourly rate: engineering, QA and testing, PM rate.</li>
<li>Minimum charge for a project and the thresholds by number of words per locale.</li>
<li>Rush rate, and its threshold.</li>
</ul>
</li>
</ul>
<h3><a class="header" href="#do-the-initial-paperwork" id="do-the-initial-paperwork">Do the initial paperwork</a></h3>
<p>A series of activities need to happen before an l10n project can start. The first step is doing the paperwork to be able to receive quotes for projects and pay bills for requests.</p>
<p>Unless there are changes in the signed document, this step is done once, for the whole organization, and only at the beginning of relationship engagement.</p>
<ul>
<li>A master service agreement (or MSA) has to be signed between Mozilla and the vendor. The person signing on Mozilla side could be the PM or PM’s manager. This document shows the conditions that the contract is operated in between the service provider and Mozilla. Without this agreement, a service can’t start. Here is an example of <a href="https://drive.google.com/a/mozilla.com/file/d/0B7u_NzvpgGcgSW5Jend3TlpyRlE/view?usp=sharing">MSA</a>. Note that two separate MSA must be signed, one for Mozilla Corporation and another one for Mozilla Foundation.</li>
<li>An Account Payable (or AP) form has to be filled. It contains banking information, billing cycle (monthly, quarterly, or “as soon as”) and payment due terms (within 30 or 45 days), billing email address. Here is an example of <a href="https://drive.google.com/a/mozilla.com/file/d/0B7u_NzvpgGcgYmN6c0tJc2IwUzA/view?usp=sharing">AP form</a>.</li>
</ul>
<p>PO, or Purchase Order, may or may not be necessary in order to get vendor service. Some teams have ongoing need for l10n service and have a budget set aside annually. This is a good reason to have a PO established. For most projects that are one time need, or sporadic, it’s best to go without a PO, and bill to the serviced department as needed.</p>
<h3><a class="header" href="#set-up-accounts" id="set-up-accounts">Set up accounts</a></h3>
<p>Depending on the needs and where the source file can be accessed, it’s good to have an account set up for the vendor’s project manager in the following places:</p>
<ul>
<li>Pontoon: set up a “translator” account when there is no community; or a basic “contributor” account when a community exists so that the vendor provides suggestions and the community can review them.</li>
<li>Bugzilla: so that the vendor’s project manager can interact in bugs. Bugzilla will allow us to have a central place to post project details and updates. Communication is generally handled via email with the vendor, but it’s useful to have a bug number to reference to, and the vendor can use the bug to quickly access all the details.</li>
<li>Google Drive: create a shared folder for the vendor to view, review, and translate directly spreadsheets or Google Docs.</li>
<li>GitHub: give commit permission if they need to commit directly in a repository (e.g. <a href="https://github.com/mozilla/legal-docs/">Legal docs</a>).</li>
</ul>
<p>Note: additional account setup may be needed if the project does not support our localization process (e.g. WordPress).</p>
<p>Once accounts are set up, allow the agency to explore the tools, flows and the product features to familiarize itself before actual work starts. Make sure to provide links to documentation as needed on how to use Pontoon and explain how to perform queries on Transvision. Setting up a meeting to share your screen might be a good idea, and use this opportunity to answer their questions about the project or the tools.</p>
<h2><a class="header" href="#localizing-a-project" id="localizing-a-project">Localizing a project</a></h2>
<h3><a class="header" href="#planning-the-request" id="planning-the-request">Planning the request</a></h3>
<p>Once outsourcing is a necessity for a project, before reaching out to the l10n agency to make an official request, make sure to check the following:</p>
<ul>
<li>Required locales.</li>
<li>Scope of work: is the request asking for anything other than translation, review and testing?</li>
<li>Milestones and Deadlines: negotiate it so the agency has sufficient time to finish each of the required tasks, and the community has enough time to review and sign off.</li>
<li>Check with communities if they want to fully handle the request, handle only some parts (e.g. initial translation or QA), or can’t work on it at all and let the agency do the work.</li>
</ul>
<h3><a class="header" href="#quotation" id="quotation">Quotation</a></h3>
<p>Now that you have all the initial info you need, you are good to go ahead and reach out to the vendor and provide what they need to generate a quote. Get a quote from the agency by communicating volume, locales, deadline, level of service needed, and type of content.</p>
<h3><a class="header" href="#setting-everything-up-for-the-request" id="setting-everything-up-for-the-request">Setting everything up for the request</a></h3>
<p>Now that you got a quote, you need to get it approved, send content to the vendor, and check permission.</p>
<ul>
<li>Provide a quote/estimate to the project requestor for approval.</li>
<li>For all the target locales, make sure both agency and the community have the proper access to the l10n tool or platform where the localizable content is staged and roles properly assigned per agreement.</li>
<li>Information to share with both the vendor and the community:
<ul>
<li>Scope: volume, type of content being localized, list of locales and type of service.</li>
<li>Plan: schedule with milestones.</li>
<li>Expectations: how you want the translations to be delivered (as a single batch or as each locale is ready), the file format you want the translations to be delivered into, and any additional service you would need, like following a specific test plan.</li>
</ul>
</li>
<li>Communicate the plan and the finalized schedule with the project stakeholders.</li>
<li>File a bug to track project progress. It can be a good idea to remind project specifics (repositories, deadline(s), locales…).</li>
</ul>
<h3><a class="header" href="#executing-the-request" id="executing-the-request">Executing the request</a></h3>
<p>The initial quote has been approved, roles and permission are set accordingly to the request. You can now execute it, receive translations and deliver them to the project stakeholders.</p>
<ul>
<li>Share the content with the agency:
<ul>
<li>Strings (whether it’s text files, a link to Pontoon, a link to a repository, a spreadsheet, a Google Doc…).</li>
<li>Locale specific style guides and product specific term list.</li>
<li>Terminology: Ask them to always refer to <a href="https://transvision.mozfr.org/">Transvision</a> to check terminology.</li>
</ul>
</li>
<li>Confirm with the vendor the following: word count, schedule and cost of the service.</li>
<li>Run testing/QA once you’ve received the translations, either by the community or the vendor, depending on the project agreement.</li>
<li>Communicate with communities for a chance to review and sign off on the project before releasing to the internal customer.</li>
</ul>
<h3><a class="header" href="#post-mortem" id="post-mortem">Post mortem</a></h3>
<p>After the project is delivered, you need to handle payment with the vendor and feedback with the community.
At the end of a calendar year, you would review the vendor working model and quality of paid service. You then provide feedback and evaluate if the service should be continued.</p>
<h4><a class="header" href="#steps-to-go-through-with-the-agency" id="steps-to-go-through-with-the-agency">Steps to go through with the agency</a></h4>
<ul>
<li>Have the agency send an updated quote, in case there is a change of scope in the project.</li>
<li>PM reviews the quote and checks for discrepancies and then approves the quote.</li>
<li>The agency’s account payable contact sends invoice to mozilla@bill.com and accounting@mozilla.com.</li>
<li>In a few days, PM will be notified and asked to approve the invoice in bill.com system.</li>
<li>PM reviews the bill one more time, updates the Cost Center to the one corresponding the internal customer’s.</li>
</ul>
<h4><a class="header" href="#steps-to-go-through-with-the-community" id="steps-to-go-through-with-the-community">Steps to go through with the community</a></h4>
<ul>
<li>PM should check with community periodically to gather input on translation quality if needed but it’s not necessary to do it every time. A necessary case could be if the community wants to replace the translator for their language because there are quality concerns.</li>
<li>Gather feedback in a spreadsheet, with summary in category of the type of issues reported, and detailed examples to support the summary.</li>
<li>Mozilla localizers give an overall quality rating and suggest to keep using the same translator(s) or ask for a replacement. The PM then shares the feedback with the agency for rebuttal and further feedback if needed.</li>
</ul>
<h2><a class="header" href="#terminology" id="terminology">Terminology</a></h2>
<dl>
  <dt>Account Manager</dt>
  <dd>Relationship, escalation of issues; handles complaints about quality or deadlines.</dd>
<dt>Project Manager</dt>
  <dd>Handles day-to-day operations. Coordinates resources on the agency side; provides estimate of a project’s deadline and cost.</dd>
<dt>Account Payable Manager</dt>
  <dd>Sends the bill to Mozilla Account Payable.</dd>
</dl>
<h1><a class="header" href="#documentation-style-guide" id="documentation-style-guide">Documentation style guide</a></h1>
<h2><a class="header" href="#general-rules" id="general-rules">General rules</a></h2>
<p>These are some of the general rules to follow when writing and reviewing documentation for this repository:</p>
<ul>
<li>Address the reader as <strong>you</strong>, avoid using <strong>we</strong>.</li>
<li>Avoid using generic terms.</li>
<li>Avoid unnecessary empty lines in the document.</li>
</ul>
<h2><a class="header" href="#typography" id="typography">Typography</a></h2>
<ul>
<li>Lists: each list item should start with an uppercase letter, and end with a period (only exception when the item ends with a URL). Use the <code>*</code> markdown notation for each item.</li>
<li>Use lowercase after colons, only one space after a period.</li>
<li>Use proper quotes, like <code>“example”</code>, instead of straight double quotes.</li>
<li>Use typographical apostrophes <code>’</code> instead of straight single quotes <code>'</code> (code fragments are the only exception).</li>
<li>Use backticks `, <strong>bold</strong>, or <em>italic</em> to highlight text in a sentence, not quotes.</li>
<li>Use <code>*</code> instead of <code>_</code> for bold and italic.</li>
<li>Try to use links instead of putting URLs directly in the text. For example, <code>visit [this page](http://example.com)</code> should be preferred to <code>visit http://example.com</code>.</li>
<li>Leave an empty line before and after code fragments, specify the language where possible. For example:</li>
</ul>
<pre>
This is some text.

```PHP
$test = 'test';
```

This is some other text.
</pre>
<h2><a class="header" href="#titles" id="titles">Titles</a></h2>
<ul>
<li>Use the dash syntax, leave one space after the dash, e.g. <code># This is a title</code>.</li>
<li>Use sentence case, avoid title case.</li>
<li>Documents should always start with a 1st level title. There should be <strong>only one</strong> 1st level title across the document.</li>
<li>Leave an empty line before and after each title. The only exception is the 1st level title at the beginning of the page.</li>
<li>Make sure to follow a logic when using titles, e.g. a 3rd level title should be in a section starting with a 2nd level title of its own.</li>
</ul>
<p>This is an example of a good structure:</p>
<pre><code># This is the main title for this document

## This is a section

This is some text.

### This is a subsection

This is some text.

## This is another section

This is some more text.
</code></pre>
<h2><a class="header" href="#bullet-and-numbered-items" id="bullet-and-numbered-items">Bullet and numbered items</a></h2>
<p>The first level has no indentation, and it’s completely aligned to the left. Sub levels should be indented using 4 spaces. Use <code>*</code> instead of <code>-</code> to create items. Example:</p>
<pre><code>* The first level bullet point
    * A second level bullet point
        * A third level bullet point
</code></pre>
<h2><a class="header" href="#links" id="links">Links</a></h2>
<p>There are three kind of links when cross referencing a document: within a document, within a project group, and outside a project group. The <code>[displayed text]</code> should be to the point and within a pair of square brackets. The displayed text must be followed by <code>(the link)</code> enclosed in a pair of parenthesis. Follow these formats for each case:</p>
<ul>
<li>Reference within the same document: link directly to the anchor, e.g. <code>[General rules](#general-rules)</code>. Note that GitHub automatically creates anchors for titles: if the title is <em>Title Example</em>, the anchor will be lowercase, with spaces replaced by dashes, i.e. <code>#title-example</code>.</li>
<li>Reference within a project group: use relative links, instead of absolute links (starting with <code>/</code>) or full GitHub URLs. For example, to link to a document in the parent folder, use <code>[other document](../other.md)</code>.</li>
<li>Reference outside the current repository: use the full GitHub URL, e.g. <code>[OpenDesign GitHub repository](https://github.com/mozilla/OpenDesign/tree/master/2017)</code>.</li>
</ul>
<h2><a class="header" href="#images" id="images">Images</a></h2>
<p>When adding images to a repository, make sure that the size is not too big for the content displayed on GitHub. In case of PNG files, make also sure to optimize files through online services like <a href="https://tinypng.com/">TinyPNG</a>.</p>
<ul>
<li>Create a folder that maps to the main folder in which your documented is stored.</li>
<li>Naming convention: if only a couple of images are needed, make the file name easily identifiable, e.g.: product_feature_type.png.</li>
<li>File name must not contain spaces and uppercase, and must use underscore to separate words as needed.</li>
<li>Image size: keep it under 800px. If necessary, create two versions: a small one and a bigger one to open when clicked.</li>
<li>Image format: <code>![Encoding bug](../assets/images/l10n_testing/encoding_bug.png)</code>.</li>
<li>When images contain personal information, such as email addresses, try to blur it out.</li>
</ul>
<h2><a class="header" href="#tools-1" id="tools-1">Tools</a></h2>
<p><a href="https://atom.io/">Atom</a> is the best tool for editing Markdown files:</p>
<ul>
<li>You can preview the content with <code>CTRL+SHIFT+M</code>. If you forget the shortcut, you can always use <code>CMD+SHIFT+P</code> to display the list of available commands, and search for <code>Markdown Preview: Toggle</code>.</li>
<li>You can install a package called <a href="https://atom.io/packages/smart-quotes-plus">smart-quotes-plus</a>, which lets you swap straight quotes with curly ones. Once the package is installed, press <code>CTRL+ALT+'</code> to swap quotes on the entire document, or the text currently selected. Again, you can use <code>CMD+SHIFT+P</code> and search for <code>Smart Quote Plus: Smartreplace</code>. Only make sure to not swap <code>&quot;</code> or <code>'</code> in code fragments where these characters are wanted.</li>
</ul>
<p>To install packages in Atom, open the Preferences, select the <em>Install</em> panel on the left and search for the package you’re interested in.</p>
<p><a href="https://github.com/DavidAnson/markdownlint">markdownlint</a>, a Markdown linter, is run on automation (Travis) for each pull request. If you want to use this tool on your system, make sure to install <a href="https://nodejs.org/en/">Node.js</a>, then run the following commands from the root of your repository (only once):</p>
<pre><code class="language-BASH">$ git clone https://github.com/flodolo/l10ndocs-linter
$ npm --prefix ./l10ndocs-linter install ./l10ndocs-linter
</code></pre>
<p>At this point you can launch the linter with this command:</p>
<pre><code class="language-BASH">$ node l10ndocs-linter/linter/markdownlint.js
Using config file: /your_path/documentation/l10ndocs-linter/linter/markdownlint.json
Searching path: /your_path/documentation

There are no linter errors.
</code></pre>
<h1><a class="header" href="#inquiries-about-joining-mozilla-l10n" id="inquiries-about-joining-mozilla-l10n">Inquiries about joining Mozilla L10n</a></h1>
<p>Here you’ll find a stockpile of templated responses to inquiries we frequently receive about Mozilla L10n. They’ve been centralized here so that you can simply copy and paste them into emails. While there is value to having these stock responses for common inquiries, we strongly feel that there is equal value to making them as personalized as possible. Take time to adjust the template in your email to include personalized information.</p>
<h2><a class="header" href="#general-inquiry" id="general-inquiry">General inquiry</a></h2>
<p>Hi [inquiree],</p>
<p>Thank you for your email and welcome to the Mozilla Community! We’re excited that you’re interested in joining our localization (L10n) effort.</p>
<p>Joining our L10n effort is easy. Within five easy steps you can start contributing to the project! We have a wiki page specially designed to help you get started. Please visit https://wiki.mozilla.org/L10n:Contribute and follow the five steps to get involved.</p>
<p>Could you also please provide me with some additional information about yourself, such as languages you speak, country you live in, and technical background?</p>
<p>You can also visit the following wiki pages to learn the details of how we localize:</p>
<ul>
<li><a href="https://wiki.mozilla.org/L10n:Localization_Process">L10n:Localization Process:</a> A good description of the whole process.</li>
<li><a href="https://developer.mozilla.org/en/Localization_Quick_Start_Guide">The L10n Quick Start Guide:</a> A resource of technical tutorials you’ll need to know as you get more involved.
Looking forward to hearing from you,</li>
</ul>
<p>[name]</p>
<h2><a class="header" href="#follow-up-to-general-inquiry" id="follow-up-to-general-inquiry">Follow up to general inquiry</a></h2>
<p>We’re very excited to have you join the Mozilla localization (l10n) effort! Your skills and dedication will be very valuable to your l10n team.</p>
<p>Next step, follow the steps outlined on https://wiki.mozilla.org/L10n:Contribute. When you contact your l10n team, please CC me on that email so that I can help to make sure you receive a prompt response.</p>
<p>If you have any questions or difficulties, please let me know.</p>
<p>Welcome!</p>
<h2><a class="header" href="#starting-a-new-localization" id="starting-a-new-localization">Starting a new localization</a></h2>
<p>Thank you for your email and welcome to the Mozilla Community! We’re excited that you’re interested in joining our localization effort.</p>
<p>Since you have stated that you would like to start a new localization effort, will be your mentor and point of contact.</p>
<p>Here’s how you can get started:</p>
<ul>
<li>Check our list of existing <a href="https://pontoon.mozilla.org/teams">localization communities</a> to see if an effort for your language already exists. If an effort exists, contact the community to join the team and help drive the effort. If it doesn’t exist, introduce your new l10n community on the <a href="https://groups.google.com/group/mozilla.dev.l10n">Mozilla localization mailing list</a>.</li>
<li>Introduce yourself to the L10n community on the <a href="https://groups.google.com/group/mozilla.dev.l10n">Mozilla localization mailing list</a> by subscribing and posting an introduction. In your introduction, please add some brief information about yourself (e.g., professional background, interests, etc.) and what you hope to work on (e.g., &quot;I saw that there was a xx-XX community and I’d like to help them out.&quot;).</li>
<li>Visit [L10n process doc needed] to become familiar with how we localize.</li>
</ul>
<p>For general information on the Mozilla localization program, visit our [GitBook link]. You’re also welcome to read through and post to  <a href="https://groups.google.com/group/mozilla.dev.l10n/topics">the localization discussion newsgroup</a>.
Hope to see more from you soon!</p>
<h2><a class="header" href="#localizing-thunderbird" id="localizing-thunderbird">Localizing Thunderbird</a></h2>
<p>We’re glad to see you’re interested in localizing Thunderbird. Please get in touch with <a href="mailto:mozilla@kewis.ch">the Thunderbird community</a> to learn how to contribute to localization.</p>
<h2><a class="header" href="#having-problems-with-pontoon" id="having-problems-with-pontoon">Having problems with Pontoon</a></h2>
<p>Sorry to hear that you’re having problems with Pontoon. Please do the following to allow us to troubleshoot your problem(s):</p>
<ul>
<li>Search <a href="https://bugzilla.mozilla.org">Bugzilla</a> to see if a bug has already been filed for your problem(s).</li>
<li>Check the <a href="http://groups.google.com/group/mozilla.dev.l10n">l10n mailing list</a> to see if anyone else has had the same problem.</li>
<li>If you can’t find a discussion thread about your problem, begin a discussion topic in those newsgroups asking for help. Include as much detail as possible.</li>
<li>If no one in the discussion group can offer a solution and there are no bugs currently filed, <a href="https://mzl.la/2tp26Ag">file a new bug</a> providing as many details about the problem as possible.</li>
</ul>
<p>If the first three steps don’t solve your problem and you have to file a bug, rest assured that the l10n-drivers will respond promptly.</p>
<h2><a class="header" href="#having-problems-with-mercurial-hg" id="having-problems-with-mercurial-hg">Having problems with Mercurial (hg)</a></h2>
<p>Sorry to hear that you’re having problems with hg. Please do the following to allow us to troubleshoot your problem(s):</p>
<ul>
<li>Search <a href="https://bugzilla.mozilla.org">Bugzilla</a> to see if a bug has already been filed for your problem(s).</li>
<li>Check the <a href="http://groups.google.com/group/mozilla.dev.l10n">l10n mailing list</a> to see if anyone else has had the same problem.</li>
<li>If you can’t find a discussion thread about your problem, begin a discussion topic in those newsgroups asking for help. Include as much detail as possible.</li>
<li>If no one in the discussion group can offer a solution and there are no bugs currently filed, file a new bug providing as many details about the  problem as possible.</li>
</ul>
<p>If the first three steps don’t solve your problem and you have to file a bug, rest assured that the l10n-drivers will respond promptly.</p>
<h2><a class="header" href="#update-your-team-wiki-page" id="update-your-team-wiki-page">Update your team wiki page</a></h2>
<p>Subject: [locale code]Please update [locale name] wiki page</p>
<p>I’m writing you to verify that your L10n team’s information on your wiki page (https://wiki.mozilla.org/L10n:Teams:[your-locale-here]) is up-to-date and accurate. Please take a look at your page and update it as needed.</p>
<p>Please follow the format outlined in <a href="https://wiki.mozilla.org/Template:L10n:Teams">this wiki template</a>.</p>
<p>If you have any questions, please feel free to contact me.</p>
<p>Thank you for your help!</p>
<h2><a class="header" href="#translationl10n-vendor-sales-pitches" id="translationl10n-vendor-sales-pitches">Translation/l10n vendor sales pitches</a></h2>
<p>It is a pleasure to meet you.</p>
<p>Mozilla is a non-profit, open source project. As such, all of our work, from development to marketing to localization, is performed by a dedicated, global community of volunteers. Our community is so thorough that it is very rare that we use vendors for translation, but when we do, we have a set of qualified vendors we rely on.</p>
<p>Of course, if you are interested in discussing a form of collaboration that fits with our volunteer, open source framework, I would be happy to arrange a meeting.</p>
<p>Thank you for your interest.</p>
<h2><a class="header" href="#responses-to-add" id="responses-to-add">Responses to add</a></h2>
<ul>
<li>Cold Call Inquiry: Would you to contribute to XX localization?</li>
<li>Reactivation: Are you still interested in contributing to L10n? Here’s where we need your help.</li>
<li>Assigning first tasks based on user profiles/interests</li>
<li>Phasing out a locale</li>
</ul>
<h1><a class="header" href="#setting-up-a-linux-virtual-machine-for-webdashboards" id="setting-up-a-linux-virtual-machine-for-webdashboards">Setting up a Linux Virtual Machine for Webdashboards</a></h1>
<p>This document describes how to configure a virtual machine based on Linux Ubuntu 18.04 LTS to manage tools like Langchecker, Bedrock (mozilla.org). The assumption is that you’ve already installed a software to manage virtual machines, like VMWare Fusion on Mac, and installed Linux. The virtual machine should have at least 40 GB of disk, 2 cores and 4 GB or memory.</p>
<h2><a class="header" href="#update-the-system" id="update-the-system">Update the system</a></h2>
<p>First of all, make sure to update the installed packages. Search for the terminal and type:</p>
<pre><code class="language-BASH">sudo sh -c &quot;apt update;apt dist-upgrade -y;apt autoremove -y&quot;
</code></pre>
<p>The password for <code>sudo</code> is the same you use to login to the system with your user. Once finished, reboot the virtual machine to make sure that all packages are updated.</p>
<p>If you’re using VMWare, make also sure to install VMWare Tools:</p>
<pre><code class="language-BASH">sudo apt install open-vm-tools open-vm-tools-desktop -y
</code></pre>
<p>Restart the virtual machine at the end to make sure all packages are up to date.</p>
<h2><a class="header" href="#configure-git-and-repositories" id="configure-git-and-repositories">Configure Git and repositories</a></h2>
<p>Before starting the setup you need to make sure to setup Git to use SSH on this VM.</p>
<p>Install Git:</p>
<pre><code class="language-BASH">sudo apt install git -y
</code></pre>
<p>Generate a new SSH key for this VM (replace the email address placeholder), make sure to setup a passphrase when asked:</p>
<pre><code class="language-BASH">ssh-keygen -t rsa -b 4096 -f ~/.ssh/github_ssh -C &quot;YOUR_EMAIL_ADDRESS&quot;
</code></pre>
<p>File will be stored in <code>~/.ssh/github_ssh</code>. The next step is to <a href="https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/#platform-linux">add this key</a> to your GitHub account.</p>
<pre><code class="language-BASH">cat ~/.ssh/github_ssh.pub
</code></pre>
<p>Add a new key in <a href="https://github.com/settings/keys">your profile</a> and copy and paste the test displayed by the previous command, starting with <code>ssh-rsa</code> and finishing with the email address you provided.</p>
<p>At this point you’re ready to test your connection to GitHub (you will need to accept the certificate by typing <code>yes</code>)</p>
<pre><code class="language-BASH">ssh -T git@github.com
The authenticity of host 'github.com (192.30.253.112)' can't be established.
RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.
Are you sure you want to continue connecting (yes/no)? yes
Hi USERNAME! You've successfully authenticated, but GitHub does not provide shell access.
</code></pre>
<p>It will ask for your passphrase, you can set the system to unlock this key whenever you’re logged in by selecting the checkbox under the input field.</p>
<p>You should also tweak your Git configuration with these commands (replace placeholders with your email address and name, they will be used for commit messages):</p>
<pre><code class="language-BASH">git config --global user.email &quot;YOUR_EMAIL_ADDRESS&quot;
git config --global user.name &quot;YOUR_NAME&quot;
git config --global push.default simple
</code></pre>
<h2><a class="header" href="#run-the-setup-scripts" id="run-the-setup-scripts">Run the setup scripts</a></h2>
<p>At this point you can run this command to download and execute a setup script. Note that this script must be run with <code>sudo</code>, since it needs to install several packages on the system.</p>
<pre><code class="language-BASH">sudo sh -c &quot;wget -O - https://raw.githubusercontent.com/mozilla-l10n/vm_scripts/master/setup_vm/setup_vm.sh | bash&quot;
</code></pre>
<p>Then run this script as standard user to clone all requested repositories:</p>
<pre><code class="language-BASH">~/mozilla/git/scripts/setup_vm/setup_repositories.sh
</code></pre>
<p>The entire procedure will take several minutes, depending on the speed of your Internet connection. During the process you will be asked, possibly more than once, to <strong>create a token on GitHub for Composer</strong>: follow the link to generate one and copy and paste it in the terminal.</p>
<p>All projects are now cloned using https and the original repository as <code>origin</code> (e.g. mozilla-l10n for langchecker), so you won’t be able to commit any changes. <strong>If you plan to make updates and commit them</strong>, make sure to create forks of the following repositories in your account:</p>
<ul>
<li>langchecker: https://github.com/mozilla-l10n/langchecker</li>
<li>webdashboard: https://github.com/mozilla-l10n/webdashboard</li>
<li>bedrock: https://github.com/mozilla/bedrock</li>
</ul>
<p>Then run the following script providing your GitHub username (e.g. <code>flodolo</code>): it will setup the original repository as a remote called <code>upstream</code>, and your fork as <code>origin</code>. It will also switch relevant l10n repositories, like mozilla_org, to ssh to allow you to make direct commits.</p>
<pre><code class="language-BASH">~/mozilla/git/scripts/setup_vm/setup_remotes.sh GITHUB_USERNAME
</code></pre>
<p>Make sure to restart the terminal to enable the new command aliases. It’s recommended to use <em>Terminator</em>, installed as part of the setup script: it’s an improved terminal with support for tabs and split windows.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
